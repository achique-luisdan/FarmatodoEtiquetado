"use strict";(self.webpackChunkFarmatodoEtiquetado=self.webpackChunkFarmatodoEtiquetado||[]).push([[700],{1700:(x,m,o)=>{o.r(m),o.d(m,{ExpressComponentRoutingModule:()=>b});var d=o(8555),t=o(5e3),h=o(520),c=o(9605),p=o(9223);let E=(()=>{class i{constructor(e){this.http=e}searchItem(e){const s=p.g.HTTP_HEADERS_IN,n=(new h.LE).append(p.g.REQUEST_JSON,JSON.stringify(e));return this.http.post(c.X.settings.urlAPI.itemsCompositionUrl.toString()+"/rest/get/item/store/stock",n,{headers:s})}processLabel(e){const s=p.g.HTTP_HEADERS_OPTIONS,n=(new h.LE).append(p.g.REQUEST_JSON,JSON.stringify(e));return this.http.options(c.X.settings.urlAPI.labelingUrl.toString()+"/rest/labeling/process/label",{headers:s,params:n})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(h.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var T=o(768),g=o(1496),r=o(3075),u=o(7322),C=o(7531),P=o(7110),y=o(7423);const S=function(){return{standalone:!0}},v=[{path:"express",component:(()=>{class i{constructor(e,s,n){this.expressService=e,this.token=s,this.translate=n,this.form={},this.form2={},this.application={},this.security={},this.sku="",this.errorMessage="",this.quantity=1,this.labelPrint="",this.loadingPanelVisible=!1,this.showLabelModule=!1,this.dataToPrint="",n.setDefaultLang("es"),n.use("es")}validateQty(){this.quantity=this.quantity>10?10:this.quantity}ngOnInit(){this.loadingPanelVisible=!this.loadingPanelVisible,setup(),this.currentUser=this.token.getUser(),this.showLabelModule=this.currentUser.funcionalities.functionalities.filter(e=>"Express"===e.name).length,this.form.transactionId="133654",this.form.source="localhost",this.form.transactionType="b\xfasqueda de item master",this.form.provider="Etiquetado",this.form.country=this.currentUser.defaultShop.country_ldap_code,this.application.id="",this.application.name="",this.application.url="",this.form.application=this.application,this.security.user="ferwis",this.security.password="na",this.form.security=this.security,this.form.storeId=this.currentUser.defaultShop.ussh_shops_id,this.loadingPanelVisible=!this.loadingPanelVisible}sendPrintItem(){this.sku!==this.form.item&&void 0!==this.form.item&&(this.loadingPanelVisible=!this.loadingPanelVisible,this.errorMessage="",this.expressService.searchItem(this.form).subscribe(e=>{const s=JSON.parse(JSON.stringify(e));if("FTD-200"===s.cod){this.sku=this.form.item,this.form2=this.form;const n=JSON.parse(JSON.stringify(e));this.form2.parameters=n.itemMasterJsonResponse,this.expressService.processLabel(this.form2).subscribe(a=>{const f=JSON.parse(JSON.stringify(a));"FTD-200"===f.cod?(this.labelPrint=f.stringLabelingChaing,this.loadingPanelVisible=!this.loadingPanelVisible,this.dataToPrint=this.labelPrint.replace("P1","P"+this.quantity),""!==this.dataToPrint?(this.send_printer(),this.form.item="",this.sku="0"):(this.sku="0",this.form.item="",this.translate.instant("TAG_EXPRESS_NO_VALID"))):(this.sku="0",this.loadingPanelVisible=!this.loadingPanelVisible,this.errorMessage=s.message),this.form.item=""},a=>{this.errorMessage=a.statusText,this.form.item=""})}else this.form.item="",this.sku="0",this.loadingPanelVisible=!this.loadingPanelVisible,this.errorMessage=s.message},e=>{this.errorMessage=e.statusText}))}send_printer(){let e=this.labelPrint.replace("P1","P"+this.quantity);""!==e?(writeToSelectedPrinter(e),this.form.item="",this.sku="0"):this.translate.instant("TAG_EXPRESS_NO_VALID")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(E),t.Y36(T.i),t.Y36(g.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-express-component"]],decls:29,vars:26,consts:[[1,"simple-container"],[1,"jumbotron"],["xpressForm","ngForm"],["appearance","outline"],["tabindex","1","type","text","matInput","","placeholder","","id","item","name","item","autoFocus","","required","",3,"ngModel","appFtdDirectives","ngModelChange"],["id","quantityExpress","min","1","max","10","required","","type","number","matInput","",1,"input-text-center",3,"value","ngModel","ngModelOptions","valueChange","ngModelChange","change"],["mat-raised-button","","color","primary",3,"disabled","id","keyup.enter","click"]],template:function(e,s){if(1&e&&(t.TgZ(0,"div",0)(1,"header",1)(2,"h3"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"form",null,2)(7,"div",0)(8,"mat-form-field",3)(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"input",4),t.NdJ("ngModelChange",function(a){return s.form.item=a}),t.qZA(),t.TgZ(13,"mat-error"),t._uU(14),t.ALo(15,"translate"),t.qZA()(),t._UZ(16,"br"),t.TgZ(17,"mat-form-field",3)(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"input",5),t.NdJ("valueChange",function(a){return s.quantity=a})("ngModelChange",function(a){return s.quantity=a})("change",function(){return s.validateQty()}),t.qZA(),t.TgZ(22,"mat-error"),t._uU(23),t.ALo(24,"translate"),t.qZA()(),t._UZ(25,"br"),t.TgZ(26,"button",6),t.NdJ("keyup.enter",function(){return s.sendPrintItem()})("click",function(){return s.sendPrintItem()}),t._uU(27),t.ALo(28,"translate"),t.qZA()()()()),2&e){const n=t.MAs(6);t.xp6(3),t.hij(" ",t.lcZ(4,13,"TAG_EXPRESS_TITLE")," "),t.xp6(7),t.Oqu(t.lcZ(11,15,"TAG_EXPRESS_CODE")),t.xp6(2),t.Q6J("ngModel",s.form.item)("appFtdDirectives",!0),t.xp6(2),t.Oqu(t.lcZ(15,17,"TAG_FIELD_REQUIRED")),t.xp6(5),t.hij(" ",t.lcZ(20,19,"TAG_EXPRESS_QTY")," "),t.xp6(2),t.Q6J("value",s.quantity)("ngModel",s.quantity)("ngModelOptions",t.DdM(25,S)),t.xp6(2),t.Oqu(t.lcZ(24,21,"TAG_FIELD_REQUIRED")),t.xp6(3),t.s9C("id",s.labelPrint),t.Q6J("disabled",!n.form.valid),t.xp6(1),t.hij(" ",t.lcZ(28,23,"TAG_EXPRESS_BUTTON")," ")}},directives:[r._Y,r.JL,r.F,u.KE,u.hX,C.Nt,r.Fj,r.Q7,r.JJ,r.On,P.m,u.TO,r.qQ,r.Fd,r.wV,y.lW],pipes:[g.X$],styles:[""]}),i})()}];let b=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.Bz.forChild(v)],d.Bz]}),i})()}}]);