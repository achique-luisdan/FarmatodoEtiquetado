"use strict";(self.webpackChunkFarmatodoEtiquetado=self.webpackChunkFarmatodoEtiquetado||[]).push([[788],{9788:(y,h,i)=>{i.r(h),i.d(h,{PricesRoutingModule:()=>S});var l=i(8555),P=i(655),a=i(9223),c=i(3457);class C extends c.bY{}class f extends c.bY{}var e=i(5e3),u=i(520),g=i(4766);let m=(()=>{class n{constructor(t){this.http=t}getAgreedPrices(t){const s=(new u.LE).append("RequestJson",JSON.stringify(t));return this.http.post(g.N.domainUrlCompMain+"/api-labeling-wsc/rest/get/agreed/price/label",s,{headers:a.g.HTTP_HEADERS})}getChangedPrices(t){const s=(new u.LE).append("RequestJson",JSON.stringify(t));return this.http.post(g.N.domainUrlCompMain+"/api-labeling-wsc/rest/get/change/price/label",s,{headers:a.g.HTTP_HEADERS})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(u.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var d=i(1496),A=i(768),p=i(3954),T=i(7423),b=i(9808);function R(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-grid-tile")(1,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSend("A")}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TAG_PRICES_CHANGE_AGREED_BUTTOM")))}const v=[{path:"prices",component:(()=>{class n{constructor(t,s,r){this.changePricesService=t,this.translate=s,this.token=r,this.labelingToPrint=[],this.buttonAgreed={},this.requestTo=new c.bY,this.requestToInit=new c.hm,this.buttonCountry=[{country:"VE",col:"2",showButton:!0},{country:"CO",col:"1",showButton:!1}],this.changePricesAgreedRequest=new C,this.changePricesChangeRequest=new f,s.setDefaultLang("es"),s.use("es")}findButtonCountry(){this.buttonAgreed=this.buttonCountry.find(t=>t.country===this.currentUser.defaultShop.country_ldap_code)}ngOnInit(){setup(),this.requestTo.setRequestTo(this.requestToInit,"Configuracion de Hand held",a.g.TRANSACTION_TYPE.get),this.setAttributesGenericRequest("changePricesAgreedRequest"),this.currentUser=this.token.getUser(),this.findButtonCountry()}onSend(t){"C"===t?(this.changePricesChangeRequest.storeId=this.currentUser.defaultShop.ussh_shops_id,this.setAttributesGenericRequest("changePricesChangeRequest"),this.changePricesService.getChangedPrices(this.changePricesChangeRequest).subscribe(s=>{if(void 0!==s&&null!=s&&"FTD-200"===s.cod){this.stringLabelingChaing=s.stringLabelingChaing,this.labelingToPrint=this.stringLabelingChaing.split("P1\\r\\n");for(let r of this.labelingToPrint)this.printLabel(r+"P1\\r\\n")}})):"A"===t&&(this.changePricesAgreedRequest.storeId=this.currentUser.defaultShop.ussh_shops_id,this.setAttributesGenericRequest("changePricesAgreedRequest"),this.changePricesService.getAgreedPrices(this.changePricesAgreedRequest).subscribe(s=>{if(void 0!==s&&null!=s&&"FTD-200"===s.cod){this.stringLabelingChaing=s.stringLabelingChaing,this.labelingToPrint=this.stringLabelingChaing.split("P1\\r\\n");for(let r of this.labelingToPrint)this.printLabel(r+"P1\\r\\n")}}))}setAttributesGenericRequest(t){this[t].setAttributesGenericRequest(this.requestTo)}sleep(t){return new Promise(s=>setTimeout(s,t))}printLabel(t){return(0,P.mG)(this,void 0,void 0,function*(){yield this.sleep(1e3),writeToSelectedPrinter(t)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m),e.Y36(d.sK),e.Y36(A.i))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-prices"]],decls:11,vars:8,consts:[[1,"simple-container"],[1,"jumbotron"],["rowHeight","100px",3,"cols"],["mat-raised-button","","color","primary",3,"click"],[4,"ngIf"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"header",1)(2,"h3"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"mat-grid-list",2)(6,"mat-grid-tile")(7,"button",3),e.NdJ("click",function(){return s.onSend("C")}),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.YNc(10,R,4,3,"mat-grid-tile",4),e.qZA()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,4,"TAG_PRICES_CHANGE")," "),e.xp6(2),e.s9C("cols",s.buttonAgreed.col),e.xp6(3),e.Oqu(e.lcZ(9,6,"TAG_PRICES_CHANGE_CHANGE_BUTTOM")),e.xp6(2),e.Q6J("ngIf",s.buttonAgreed.showButton))},directives:[p.Il,p.DX,T.lW,b.O5],pipes:[d.X$],styles:[""]}),n})()}];let S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[l.Bz.forChild(v)],l.Bz]}),n})()}}]);