"use strict";(self.webpackChunkFarmatodoEtiquetado=self.webpackChunkFarmatodoEtiquetado||[]).push([[158],{4158:(J,g,i)=>{i.r(g),i.d(g,{ControlRoutingModule:()=>P});var b=i(8555),l=i(9223),r=i(3457);class f extends r.bY{}class A extends r.bY{}class v{}class R extends r.bY{}class q{}var t=i(5e3),c=i(520),u=i(4766);let Z=(()=>{class n{constructor(e){this.http=e}labelingSearch(e){const o=l.g.HTTP_HEADERS_OPTIONS,s=(new c.LE).append("RequestLabelingControlJson",JSON.stringify(e));return this.http.options(u.N.domainUrlEtiquetado+"/api-labeling-rest-1.4/rest/labelControl/search",{headers:o,params:s})}searchItemInfo(e){const o=u.N.domainUrlCompMain+"/api-labeling-wsc/rest/get/item/store/stock",s=(new c.LE).append("RequestJson",JSON.stringify(e));return this.http.post(o,s,{headers:l.g.HTTP_HEADERS_IN})}labelControlCreate(e){const o=l.g.HTTP_HEADERS_OPTIONS,s=(new c.LE).append("RequestLabelingControlJson",JSON.stringify(e));return this.http.options(u.N.domainUrlEtiquetado+"/api-labeling-rest-1.4/rest/labelControl/create",{headers:o,params:s})}processLabel(e){const o=l.g.HTTP_HEADERS_OPTIONS,s=(new c.LE).append("RequestJson",JSON.stringify(e));return this.http.options(u.N.domainUrlEtiquetado+"/api-labeling-rest-1.4/rest/labeling/process/label",{headers:o,params:s})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var T=i(1496),O=i(768),x=i(8182),h=i(7322),_=i(7531),d=i(3075),E=i(7110),S=i(9808),I=i(7423),C=i(4623),U=i(4834),L=i(3954);function D(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSend()}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"TAG_LABEL_CONSUL_BUTTOM")))}function N(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"mat-list")(2,"mat-list-item")(3,"label",6),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"label",7),t._uU(7),t.qZA()(),t._UZ(8,"mat-divider"),t.TgZ(9,"mat-list-item")(10,"label",6),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"label",7),t._uU(14),t.qZA()(),t._UZ(15,"mat-divider"),t.TgZ(16,"mat-list-item")(17,"label",6),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"label",7),t._uU(21),t.qZA()(),t._UZ(22,"mat-divider"),t.TgZ(23,"mat-list-item")(24,"label",6),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"label",7),t._uU(28),t.qZA()(),t._UZ(29,"mat-divider"),t.qZA(),t.TgZ(30,"mat-grid-list",8)(31,"mat-grid-tile")(32,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSendLabel("C")}),t._uU(33),t.ALo(34,"translate"),t.qZA()(),t.TgZ(35,"mat-grid-tile")(36,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSendLabel("I")}),t._uU(37),t.ALo(38,"translate"),t.qZA()(),t.TgZ(39,"mat-grid-tile")(40,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSendLabel("S")}),t._uU(41),t.ALo(42,"translate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,11,"TAG_LABEL_PRODUCT")),t.xp6(3),t.hij(" ",e.itemData.product,""),t.xp6(4),t.Oqu(t.lcZ(12,13,"TAG_LABEL_DESCRIPTION")),t.xp6(3),t.hij(" ",e.itemData.description,""),t.xp6(4),t.Oqu(t.lcZ(19,15,"TAG_LABEL_REGULAR_PRICE")),t.xp6(3),t.hij(" ",e.itemData.price,""),t.xp6(4),t.Oqu(t.lcZ(26,17,"TAG_LABEL_TOTAL_VALID")),t.xp6(3),t.hij(" ",e.itemData.totalLabel,""),t.xp6(5),t.Oqu(t.lcZ(34,19,"TAG_LABEL_CORRECT")),t.xp6(4),t.Oqu(t.lcZ(38,21,"TAG_LABEL_INCORRECT")),t.xp6(4),t.Oqu(t.lcZ(42,23,"TAG_LABEL_NO_LABEL"))}}const M=[{path:"control",component:(()=>{class n{constructor(e,o,s,m){this.labelingService=e,this.translate=o,this.token=s,this.snackbarBaseComponent=m,this.nextPage=!1,this.value="",this.labelToPrint=["I","S"],this.requestTo=new r.bY,this.requestToInit=new r.hm,this.dataRequest=new f,this.createLabelRequest=new A,this.labelingControTo=new q,this.itemData=new v,this.processLabelRequest=new R,o.setDefaultLang("es"),o.use("es")}ngOnInit(){setup(),this.requestTo.setRequestTo(this.requestToInit,"Configuracion de Hand held",l.g.TRANSACTION_TYPE.get),this.setAttributesGenericRequest("dataRequest"),this.setAttributesGenericRequest("createLabelRequest"),this.currentUser=this.token.getUser()}onSend(){""!==this.value.trim()&&(this.dataRequest.storeId=this.currentUser.defaultShop.ussh_shops_id,this.labelingService.labelingSearch(this.dataRequest).subscribe(e=>{void 0!==e&&null!=e&&"FTD-200"===e.cod&&this.searchItem(this.dataRequest,e.labelingControlTo.totalLabel)}))}searchItem(e,o){e.transactionType="busqueda de item master",e.item=this.value,e.storeId=this.currentUser.defaultShop.ussh_shops_id,this.labelingService.searchItemInfo(e).subscribe(s=>{console.log(s),void 0!==s&&null!=s&&"FTD-200"===s.cod&&(this.nextPage=!0,this.itemMasterJsonResponse=s.itemMasterJsonResponse,this.value="",JSON.parse(s.itemMasterJsonResponse).listItemMasterTo.map(p=>{this.itemData.description=p.itemShortDesc,this.itemData.price=p.price,this.itemData.product=p.item,this.itemData.totalLabel=parseInt(o,10)}))})}onSendLabel(e){this.labelingControTo.controlLabel=e,this.labelingControTo.item=this.dataRequest.item,this.createLabelRequest.labelingControlTo=this.labelingControTo,this.createLabelRequest.storeId=this.dataRequest.storeId,this.labelingService.labelControlCreate(this.createLabelRequest).subscribe(o=>{void 0!==o&&null!=o&&"FTD-200"===o.cod&&(this.itemData.totalLabel=parseInt(o.labelingControlTo.totalLabel,10),this.labelToPrint.indexOf(e)>=0&&this.processLabel())})}processLabel(){this.labelingControTo.item=this.dataRequest.item,this.processLabelRequest.storeId=this.currentUser.defaultShop.ussh_shops_id,this.setAttributesGenericRequest("processLabelRequest"),this.processLabelRequest.parameters=this.itemMasterJsonResponse,this.labelingService.processLabel(this.processLabelRequest).subscribe(e=>{void 0!==e&&null!=e&&"FTD-200"===e.cod&&writeToSelectedPrinter(e.stringLabelingChaing)})}setAttributesGenericRequest(e){this[e].setAttributesGenericRequest(this.requestTo)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z),t.Y36(T.sK),t.Y36(O.i),t.Y36(x.p))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-control"]],decls:16,vars:13,consts:[[1,"simple-container"],[1,"jumbotron"],["appearance","outline","floatLabel","always"],["required","","matInput","","autofocus","","type","text",3,"appFtdDirectives","ngModel","keydown.enter","ngModelChange"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"small-text","bold","left"],[1,"small-text","bold","left","paddingLeft"],["cols","3"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"header",1)(2,"h3"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"div")(6,"mat-form-field",2)(7,"mat-label"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"input",3),t.NdJ("keydown.enter",function(){return o.onSend()})("ngModelChange",function(m){return o.value=m}),t.qZA(),t.TgZ(11,"mat-error"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.YNc(14,D,4,3,"div",4),t.qZA(),t.YNc(15,N,43,25,"div",4),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,7,"TAG_LABEL_CONTROL")," "),t.xp6(5),t.Oqu(t.lcZ(9,9,"TAG_PRODUCT_CODE")),t.xp6(2),t.Q6J("appFtdDirectives",!0)("ngModel",o.value),t.xp6(2),t.Oqu(t.lcZ(13,11,"TAG_FIELD_REQUIRED")),t.xp6(2),t.Q6J("ngIf",!o.nextPage),t.xp6(1),t.Q6J("ngIf",o.nextPage))},directives:[h.KE,h.hX,_.Nt,d.Fj,d.Q7,E.m,d.JJ,d.On,h.TO,S.O5,I.lW,C.i$,C.Tg,U.d,L.Il,L.DX],pipes:[T.X$],styles:[".bold[_ngcontent-%COMP%]{font-weight:700}.paddingLeft[_ngcontent-%COMP%]{padding-left:2%}.small-text[_ngcontent-%COMP%]{font-size:smaller}.left[_ngcontent-%COMP%]{text-align:left}section[_ngcontent-%COMP%]{display:table}"]}),n})()}];let P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[b.Bz.forChild(M)],b.Bz]}),n})()}}]);