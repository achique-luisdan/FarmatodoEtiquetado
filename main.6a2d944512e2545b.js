(self.webpackChunktest_case_codebar=self.webpackChunktest_case_codebar||[]).push([[179],{145:(Os,Rs,G)=>{"use strict";function nt(e){return"function"==typeof e}function Ls(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const _o=Ls(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,s)=>`${s+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function bo(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Fn{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const l of n)l.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(nt(r))try{r()}catch(l){t=l instanceof _o?l.errors:[l]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const l of s)try{ln(l)}catch(f){t=t??[],f instanceof _o?t=[...t,...f.errors]:t.push(f)}}if(t)throw new _o(t)}}add(t){var n;if(t&&t!==this)if(this.closed)ln(t);else{if(t instanceof Fn){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&bo(n,t)}remove(t){const{_finalizers:n}=this;n&&bo(n,t),t instanceof Fn&&t._removeParent(this)}}Fn.EMPTY=(()=>{const e=new Fn;return e.closed=!0,e})();const Ps=Fn.EMPTY;function zt(e){return e instanceof Fn||e&&"closed"in e&&nt(e.remove)&&nt(e.add)&&nt(e.unsubscribe)}function ln(e){nt(e)?e():e.unsubscribe()}const te={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Hn={setTimeout(e,t,...n){const{delegate:r}=Hn;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=Hn;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function It(e){Hn.setTimeout(()=>{const{onUnhandledError:t}=te;if(!t)throw e;t(e)})}function So(){}const qe=Et("C",void 0,void 0);function Et(e,t,n){return{kind:e,value:t,error:n}}let Ce=null;function Qe(e){if(te.useDeprecatedSynchronousErrorHandling){const t=!Ce;if(t&&(Ce={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Ce;if(Ce=null,n)throw r}}else e()}class rt extends Fn{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,zt(t)&&t.add(this)):this.destination=vt}static create(t,n,r){return new zn(t,n,r)}next(t){this.isStopped?Ge(function Fs(e){return Et("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Ge(function To(e){return Et("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ge(qe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $=Function.prototype.bind;function Be(e,t){return $.call(e,t)}class Y{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ft(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ft(r)}else Ft(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ft(n)}}}class zn extends rt{constructor(t,n,r){let s;if(super(),nt(t)||!t)s={next:t??void 0,error:n??void 0,complete:r??void 0};else{let l;this&&te.useDeprecatedNextContext?(l=Object.create(t),l.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&Be(t.next,l),error:t.error&&Be(t.error,l),complete:t.complete&&Be(t.complete,l)}):s=t}this.destination=new Y(s)}}function Ft(e){te.useDeprecatedSynchronousErrorHandling?function Mi(e){te.useDeprecatedSynchronousErrorHandling&&Ce&&(Ce.errorThrown=!0,Ce.error=e)}(e):It(e)}function Ge(e,t){const{onStoppedNotification:n}=te;n&&Hn.setTimeout(()=>n(e,t))}const vt={closed:!0,next:So,error:function ye(e){throw e},complete:So},V="function"==typeof Symbol&&Symbol.observable||"@@observable";function _t(e){return e}let pt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,s){const l=function Zt(e){return e&&e instanceof rt||function Bs(e){return e&&nt(e.next)&&nt(e.error)&&nt(e.complete)}(e)&&zt(e)}(n)?n:new zn(n,r,s);return Qe(()=>{const{operator:f,source:g}=this;l.add(f?f.call(l,g):g?this._subscribe(l):this._trySubscribe(l))}),l}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Gn(r))((s,l)=>{const f=new zn({next:g=>{try{n(g)}catch(w){l(w),f.unsubscribe()}},error:l,complete:s});this.subscribe(f)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[V](){return this}pipe(...n){return function zr(e){return 0===e.length?_t:1===e.length?e[0]:function(n){return e.reduce((r,s)=>s(r),n)}}(n)(this)}toPromise(n){return new(n=Gn(n))((r,s)=>{let l;this.subscribe(f=>l=f,f=>s(f),()=>r(l))})}}return e.create=t=>new e(t),e})();function Gn(e){var t;return null!==(t=e??te.Promise)&&void 0!==t?t:Promise}const yr=Ls(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Bt=(()=>{class e extends pt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new li(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new yr}next(n){Qe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Qe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Qe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:s,observers:l}=this;return r||s?Ps:(this.currentObservers=null,l.push(n),new Fn(()=>{this.currentObservers=null,bo(l,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:s,isStopped:l}=this;r?n.error(s):l&&n.complete()}asObservable(){const n=new pt;return n.source=this,n}}return e.create=(t,n)=>new li(t,n),e})();class li extends Bt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:Ps}}function nr(e){return t=>{if(function ce(e){return nt(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function mt(e,t,n,r,s){return new ci(e,t,n,r,s)}class ci extends rt{constructor(t,n,r,s,l,f){super(t),this.onFinalize=l,this.shouldUnsubscribe=f,this._next=n?function(g){try{n(g)}catch(w){t.error(w)}}:super._next,this._error=s?function(g){try{s(g)}catch(w){t.error(w)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(g){t.error(g)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Bn(e){return this instanceof Bn?(this.v=e,this):new Bn(e)}function El(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=n.apply(e,t||[]),l=[];return s={},f("next"),f("throw"),f("return"),s[Symbol.asyncIterator]=function(){return this},s;function f(S){r[S]&&(s[S]=function(v){return new Promise(function(O,F){l.push([S,v,O,F])>1||g(S,v)})})}function g(S,v){try{!function w(S){S.value instanceof Bn?Promise.resolve(S.value.v).then(m,E):A(l[0][2],S)}(r[S](v))}catch(O){A(l[0][3],O)}}function m(S){g("next",S)}function E(S){g("throw",S)}function A(S,v){S(v),l.shift(),l.length&&g(l[0][0],l[0][1])}}function X(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function yn(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(l){n[l]=e[l]&&function(f){return new Promise(function(g,w){!function s(l,f,g,w){Promise.resolve(w).then(function(m){l({value:m,done:g})},f)}(g,w,(f=e[l](f)).done,f.value)})}}}const fi=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Mo(e){return nt(e?.then)}function No(e){return nt(e[V])}function xn(e){return Symbol.asyncIterator&&nt(e?.[Symbol.asyncIterator])}function Pi(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Er=function Cr(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function hi(e){return nt(e?.[Er])}function _n(e){return El(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:s}=yield Bn(n.read());if(s)return yield Bn(void 0);yield yield Bn(r)}}finally{n.releaseLock()}})}function Gs(e){return nt(e?.getReader)}function cn(e){if(e instanceof pt)return e;if(null!=e){if(No(e))return function Oo(e){return new pt(t=>{const n=e[V]();if(nt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(fi(e))return function bn(e){return new pt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Mo(e))return function Dr(e){return new pt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,It)})}(e);if(xn(e))return ee(e);if(hi(e))return function Gr(e){return new pt(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Gs(e))return function Wr(e){return ee(_n(e))}(e)}throw Pi(e)}function ee(e){return new pt(t=>{(function Ro(e,t){var n,r,s,l;return function Ri(e,t,n,r){return new(n||(n=Promise))(function(l,f){function g(E){try{m(r.next(E))}catch(A){f(A)}}function w(E){try{m(r.throw(E))}catch(A){f(A)}}function m(E){E.done?l(E.value):function s(l){return l instanceof n?l:new n(function(f){f(l)})}(E.value).then(g,w)}m((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=X(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(f){s={error:f}}finally{try{r&&!r.done&&(l=n.return)&&(yield l.call(n))}finally{if(s)throw s.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Mt(e,t,n,r=0,s=!1){const l=t.schedule(function(){n(),s?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(l),!s)return l}function Ws(e,t,n=1/0){return nt(t)?Ws((r,s)=>function ui(e,t){return nr((n,r)=>{let s=0;n.subscribe(mt(r,l=>{r.next(e.call(t,l,s++))}))})}((l,f)=>t(r,l,s,f))(cn(e(r,s))),n):("number"==typeof t&&(n=t),nr((r,s)=>function Al(e,t,n,r,s,l,f,g){const w=[];let m=0,E=0,A=!1;const S=()=>{A&&!w.length&&!m&&t.complete()},v=F=>m<r?O(F):w.push(F),O=F=>{l&&t.next(F),m++;let k=!1;cn(n(F,E++)).subscribe(mt(t,z=>{s?.(z),l?v(z):t.next(z)},()=>{k=!0},void 0,()=>{if(k)try{for(m--;w.length&&m<r;){const z=w.shift();f?Mt(t,f,()=>O(z)):O(z)}S()}catch(z){t.error(z)}}))};return e.subscribe(mt(t,v,()=>{A=!0,S()})),()=>{g?.()}}(r,s,e,n)))}const Lo=new pt(e=>e.complete());function Po(e){return e[e.length-1]}function Bi(e,t=0){return nr((n,r)=>{n.subscribe(mt(r,s=>Mt(r,e,()=>r.next(s),t),()=>Mt(r,e,()=>r.complete(),t),s=>Mt(r,e,()=>r.error(s),t)))})}function j(e,t=0){return nr((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function je(e,t){if(!e)throw new Error("Iterable cannot be null");return new pt(n=>{Mt(n,t,()=>{const r=e[Symbol.asyncIterator]();Mt(n,t,()=>{r.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function Bo(...e){const t=function Ys(e){return function _l(e){return e&&nt(e.schedule)}(Po(e))?e.pop():void 0}(e),n=function ir(e,t){return"number"==typeof Po(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?cn(r[0]):function Fi(e=1/0){return Ws(_t,e)}(n)(function Fo(e,t){return t?function Oe(e,t){if(null!=e){if(No(e))return function bl(e,t){return cn(e).pipe(j(t),Bi(t))}(e,t);if(fi(e))return function Yr(e,t){return new pt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(Mo(e))return function ft(e,t){return cn(e).pipe(j(t),Bi(t))}(e,t);if(xn(e))return je(e,t);if(hi(e))return function Sl(e,t){return new pt(n=>{let r;return Mt(n,t,()=>{r=e[Er](),Mt(n,t,()=>{let s,l;try{({value:s,done:l}=r.next())}catch(f){return void n.error(f)}l?n.complete():n.next(s)},0,!0)}),()=>nt(r?.return)&&r.return()})}(e,t);if(Gs(e))return function He(e,t){return je(_n(e),t)}(e,t)}throw Pi(e)}(e,t):cn(e)}(r,t)):Lo}function ht(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new zn({next:()=>{r.unsubscribe(),e()}});return t(...n).subscribe(r)}function Pe(e){for(let t in e)if(e[t]===Pe)return t;throw Error("Could not find renamed property on target object.")}function me(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(me).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Xr(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Tl=Pe({__forward_ref__:Pe});function Wn(e){return e.__forward_ref__=Wn,e.toString=function(){return me(this())},e}function Q(e){return function Nt(e){return"function"==typeof e&&e.hasOwnProperty(Tl)&&e.__forward_ref__===Wn}(e)?e():e}class _ extends Error{constructor(t,n){super(function se(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}(t,n)),this.code=t}}function De(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function re(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function ae(e,t){throw new _(-201,!1)}function Ze(e,t){null==e&&function Ye(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function lt(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ir(e){return{providers:e.providers||[],imports:e.imports||[]}}function sr(e){return $r(e,gi)||$r(e,Qs)}function $r(e,t){return e.hasOwnProperty(t)?e[t]:null}function Uo(e){return e&&(e.hasOwnProperty(jo)||e.hasOwnProperty(Fl))?e[jo]:null}const gi=Pe({\u0275prov:Pe}),jo=Pe({\u0275inj:Pe}),Qs=Pe({ngInjectableDef:Pe}),Fl=Pe({ngInjectorDef:Pe});var xe=(()=>((xe=xe||{})[xe.Default=0]="Default",xe[xe.Host=1]="Host",xe[xe.Self=2]="Self",xe[xe.SkipSelf=4]="SkipSelf",xe[xe.Optional=8]="Optional",xe))();let ze;function $t(e){const t=ze;return ze=e,t}function Yn(e,t,n){const r=sr(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&xe.Optional?null:void 0!==t?t:void ae(me(e))}function P(e){return{toString:e}.toString()}var de=(()=>((de=de||{})[de.OnPush=0]="OnPush",de[de.Default=1]="Default",de))(),Sn=(()=>{return(e=Sn||(Sn={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Sn;var e})();const it=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Xn={},fe=[],qr=Pe({\u0275cmp:Pe}),ar=Pe({\u0275dir:Pe}),Qr=Pe({\u0275pipe:Pe}),pi=Pe({\u0275mod:Pe}),Fe=Pe({\u0275fac:Pe}),le=Pe({__NG_ELEMENT_ID__:Pe});let Bl=0;function Je(e){return P(()=>{const n=!0===e.standalone,r={},s={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===de.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||fe,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Sn.Emulated,id:"c"+Bl++,styles:e.styles||fe,_:null,setInput:null,schemas:e.schemas||null,tView:null},l=e.dependencies,f=e.features;return s.inputs=Go(e.inputs,r),s.outputs=Go(e.outputs),f&&f.forEach(g=>g(s)),s.directiveDefs=l?()=>("function"==typeof l?l():l).map(Ho).filter(ea):null,s.pipeDefs=l?()=>("function"==typeof l?l():l).map(Dt).filter(ea):null,s})}function Ho(e){return Xe(e)||Qt(e)}function ea(e){return null!==e}function mi(e){return P(()=>({type:e.type,bootstrap:e.bootstrap||fe,declarations:e.declarations||fe,imports:e.imports||fe,exports:e.exports||fe,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Go(e,t){if(null==e)return Xn;const n={};for(const r in e)if(e.hasOwnProperty(r)){let s=e[r],l=s;Array.isArray(s)&&(l=s[1],s=s[0]),n[s]=r,t&&(t[s]=l)}return n}function Xe(e){return e[qr]||null}function Qt(e){return e[ar]||null}function Dt(e){return e[Qr]||null}const i=18,u=22,b=10;function M(e){return Array.isArray(e)&&"object"==typeof e[1]}function N(e){return Array.isArray(e)&&!0===e[1]}function L(e){return 0!=(8&e.flags)}function B(e){return null!==e.template}function Me(e){return 0!=(256&e[2])}function Ci(e,t){return e.hasOwnProperty(Fe)?e[Fe]:null}class Hm{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function ef(e){return e.type.prototype.ngOnChanges&&(e.setInput=Gm),zm}function zm(){const e=nf(this),t=e?.current;if(t){const n=e.previous;if(n===Xn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Gm(e,t,n,r){const s=nf(e)||function Wm(e,t){return e[tf]=t}(e,{previous:Xn,current:null}),l=s.current||(s.current={}),f=s.previous,g=this.declaredInputs[n],w=f[g];l[g]=new Hm(w&&w.currentValue,t,f===Xn),e[r]=t}const tf="__ngSimpleChanges__";function nf(e){return e[tf]||null}function Ot(e){for(;Array.isArray(e);)e=e[0];return e}function vn(e,t){return Ot(t[e.index])}function Mn(e,t){const n=t[e];return M(n)?n:n[0]}function ra(e){return 64==(64&e[2])}function Jr(e,t){return null==t?null:e[t]}function rf(e){e[i]=0}function Gl(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Ee={lFrame:gf(null),bindingsEnabled:!0};function sf(){return Ee.bindingsEnabled}function H(){return Ee.lFrame.lView}function Ue(){return Ee.lFrame.tView}function Vt(){let e=af();for(;null!==e&&64===e.type;)e=e.parent;return e}function af(){return Ee.lFrame.currentTNode}function ur(e,t){const n=Ee.lFrame;n.currentTNode=e,n.isParent=t}function Wl(){return Ee.lFrame.isParent}function l2(e,t){const n=Ee.lFrame;n.bindingIndex=n.bindingRootIndex=e,Xl(t)}function Xl(e){Ee.lFrame.currentDirectiveIndex=e}function $l(e){Ee.lFrame.currentQueryIndex=e}function u2(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function ff(e,t,n){if(n&xe.SkipSelf){let s=t,l=e;for(;!(s=s.parent,null!==s||n&xe.Host||(s=u2(l),null===s||(l=l[15],10&s.type))););if(null===s)return!1;t=s,e=l}const r=Ee.lFrame=hf();return r.currentTNode=t,r.lView=e,!0}function ql(e){const t=hf(),n=e[1];Ee.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function hf(){const e=Ee.lFrame,t=null===e?null:e.child;return null===t?gf(e):t}function gf(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function pf(){const e=Ee.lFrame;return Ee.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const mf=pf;function Ql(){const e=pf();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ei(e){Ee.lFrame.selectedIndex=e}function ia(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const l=e.data[n].type.prototype,{ngAfterContentInit:f,ngAfterContentChecked:g,ngAfterViewInit:w,ngAfterViewChecked:m,ngOnDestroy:E}=l;f&&(e.contentHooks||(e.contentHooks=[])).push(-n,f),g&&((e.contentHooks||(e.contentHooks=[])).push(n,g),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,g)),w&&(e.viewHooks||(e.viewHooks=[])).push(-n,w),m&&((e.viewHooks||(e.viewHooks=[])).push(n,m),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,m)),null!=E&&(e.destroyHooks||(e.destroyHooks=[])).push(n,E)}}function oa(e,t,n){wf(e,t,3,n)}function sa(e,t,n,r){(3&e[2])===n&&wf(e,t,n,r)}function Kl(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function wf(e,t,n,r){const l=r??-1,f=t.length-1;let g=0;for(let w=void 0!==r?65535&e[i]:0;w<f;w++)if("number"==typeof t[w+1]){if(g=t[w],null!=r&&g>=r)break}else t[w]<0&&(e[i]+=65536),(g<l||-1==l)&&(x2(e,n,t,w),e[i]=(4294901760&e[i])+w+2),w++}function x2(e,t,n,r){const s=n[r]<0,l=n[r+1],g=e[s?-n[r]:n[r]];if(s){if(e[2]>>11<e[i]>>16&&(3&e[2])===t){e[2]+=2048;try{l.call(g)}finally{}}}else try{l.call(g)}finally{}}class Yo{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function aa(e,t,n){let r=0;for(;r<n.length;){const s=n[r];if("number"==typeof s){if(0!==s)break;r++;const l=n[r++],f=n[r++],g=n[r++];e.setAttribute(t,f,g,l)}else{const l=s,f=n[++r];xf(l)?e.setProperty(t,l,f):e.setAttribute(t,l,f),r++}}return r}function yf(e){return 3===e||4===e||6===e}function xf(e){return 64===e.charCodeAt(0)}function la(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const s=t[r];"number"==typeof s?n=s:0===n||Cf(e,n,s,null,-1===n||2===n?t[++r]:null)}}return e}function Cf(e,t,n,r,s){let l=0,f=e.length;if(-1===t)f=-1;else for(;l<e.length;){const g=e[l++];if("number"==typeof g){if(g===t){f=-1;break}if(g>t){f=l-1;break}}}for(;l<e.length;){const g=e[l];if("number"==typeof g)break;if(g===n){if(null===r)return void(null!==s&&(e[l+1]=s));if(r===e[l+1])return void(e[l+2]=s)}l++,null!==r&&l++,null!==s&&l++}-1!==f&&(e.splice(f,0,t),l=f+1),e.splice(l++,0,n),null!==r&&e.splice(l++,0,r),null!==s&&e.splice(l++,0,s)}function zi(e){return 32767&e}function Gi(e,t){let n=function I2(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let ec=!0;function ca(e){const t=ec;return ec=e,t}let _2=0;const dr={};function Zo(e,t){const n=nc(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,tc(r.data,e),tc(t,null),tc(r.blueprint,null));const s=ua(e,t),l=e.injectorIndex;if(function Ef(e){return-1!==e}(s)){const f=zi(s),g=Gi(s,t),w=g[1].data;for(let m=0;m<8;m++)t[l+m]=g[f+m]|w[f+m]}return t[l+8]=s,l}function tc(e,t){e.push(0,0,0,0,0,0,0,0,t)}function nc(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function ua(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,s=t;for(;null!==s;){if(r=Mf(s),null===r)return-1;if(n++,s=s[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function da(e,t,n){!function b2(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(le)&&(r=n[le]),null==r&&(r=n[le]=_2++);const s=255&r;t.data[e+(s>>5)]|=1<<s}(e,t,n)}function If(e,t,n){if(n&xe.Optional||void 0!==e)return e;ae()}function _f(e,t,n,r){if(n&xe.Optional&&void 0===r&&(r=null),0==(n&(xe.Self|xe.Host))){const s=e[9],l=$t(void 0);try{return s?s.get(t,r,n&xe.Optional):Yn(t,r,n&xe.Optional)}finally{$t(l)}}return If(r,0,n)}function bf(e,t,n,r=xe.Default,s){if(null!==e){if(1024&t[2]){const f=function O2(e,t,n,r,s){let l=e,f=t;for(;null!==l&&null!==f&&1024&f[2]&&!(256&f[2]);){const g=Sf(l,f,n,r|xe.Self,dr);if(g!==dr)return g;let w=l.parent;if(!w){const m=f[21];if(m){const E=m.get(n,dr,r);if(E!==dr)return E}w=Mf(f),f=f[15]}l=w}return s}(e,t,n,r,dr);if(f!==dr)return f}const l=Sf(e,t,n,r,dr);if(l!==dr)return l}return _f(t,n,r,s)}function Sf(e,t,n,r,s){const l=function v2(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(le)?e[le]:void 0;return"number"==typeof t?t>=0?255&t:M2:t}(n);if("function"==typeof l){if(!ff(t,e,r))return r&xe.Host?If(s,0,r):_f(t,n,r,s);try{const f=l(r);if(null!=f||r&xe.Optional)return f;ae()}finally{mf()}}else if("number"==typeof l){let f=null,g=nc(e,t),w=-1,m=r&xe.Host?t[16][6]:null;for((-1===g||r&xe.SkipSelf)&&(w=-1===g?ua(e,t):t[g+8],-1!==w&&vf(r,!1)?(f=t[1],g=zi(w),t=Gi(w,t)):g=-1);-1!==g;){const E=t[1];if(Tf(l,g,E.data)){const A=T2(g,t,n,f,r,m);if(A!==dr)return A}w=t[g+8],-1!==w&&vf(r,t[1].data[g+8]===m)&&Tf(l,g,t)?(f=E,g=zi(w),t=Gi(w,t)):g=-1}}return s}function T2(e,t,n,r,s,l){const f=t[1],g=f.data[e+8],E=function fa(e,t,n,r,s){const l=e.providerIndexes,f=t.data,g=1048575&l,w=e.directiveStart,E=l>>20,S=s?g+E:e.directiveEnd;for(let v=r?g:g+E;v<S;v++){const O=f[v];if(v<w&&n===O||v>=w&&O.type===n)return v}if(s){const v=f[w];if(v&&B(v)&&v.type===n)return w}return null}(g,f,n,null==r?function W(e){return 2==(2&e.flags)}(g)&&ec:r!=f&&0!=(3&g.type),s&xe.Host&&l===g);return null!==E?$o(t,f,E,g):dr}function $o(e,t,n,r){let s=e[n];const l=t.data;if(function C2(e){return e instanceof Yo}(s)){const f=s;f.resolving&&function vl(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new _(-200,`Circular dependency in DI detected for ${e}${n}`)}(De(l[n]));const g=ca(f.canSeeViewProviders);f.resolving=!0;const w=f.injectImpl?$t(f.injectImpl):null;ff(e,r,xe.Default);try{s=e[n]=f.factory(void 0,l,e,r),t.firstCreatePass&&n>=r.directiveStart&&function y2(e,t,n){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:l}=t.type.prototype;if(r){const f=ef(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,f),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,f)}s&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,s),l&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,l),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,l))}(n,l[n],t)}finally{null!==w&&$t(w),ca(g),f.resolving=!1,mf()}}return s}function Tf(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function vf(e,t){return!(e&xe.Self||e&xe.Host&&t)}class Wi{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return bf(this._tNode,this._lView,t,r,n)}}function M2(){return new Wi(Vt(),H())}function Mf(e){const t=e[1],n=t.type;return 2===n?t.declTNode:1===n?e[6]:null}class Re{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=lt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Mr(e,t){e.forEach(n=>Array.isArray(n)?Mr(n,t):t(n))}function ha(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Jo={},pa="ngTempTokenPath",G2=/\n/gm,Ff="__source";let es;function Qi(e){const t=es;return es=e,t}function Y2(e,t=xe.Default){if(void 0===es)throw new _(-203,!1);return null===es?Yn(e,void 0,t):es.get(e,t&xe.Optional?null:void 0,t)}function $e(e,t=xe.Default){return(function Ks(){return ze}()||Y2)(Q(e),t)}function uc(e){const t=[];for(let n=0;n<e.length;n++){const r=Q(e[n]);if(Array.isArray(r)){if(0===r.length)throw new _(900,!1);let s,l=xe.Default;for(let f=0;f<r.length;f++){const g=r[f],w=Z2(g);"number"==typeof w?-1===w?s=g.token:l|=w:s=g}t.push($e(s,l))}else t.push($e(r))}return t}function Z2(e){return e.__NG_DI_FLAG__}var Dn=(()=>((Dn=Dn||{})[Dn.Important=1]="Important",Dn[Dn.DashCase=2]="DashCase",Dn))();const pc=new Map;let fw=0;const wc="__ngContext__";function rn(e,t){M(t)?(e[wc]=t[20],function gw(e){pc.set(e[20],e)}(t)):e[wc]=t}function xc(e,t){return undefined(e,t)}function os(e){const t=e[3];return N(t)?t[3]:t}function Cc(e){return rh(e[13])}function Ec(e){return rh(e[4])}function rh(e){for(;null!==e&&!N(e);)e=e[4];return e}function Ji(e,t,n,r,s){if(null!=r){let l,f=!1;N(r)?l=r:M(r)&&(f=!0,r=r[0]);const g=Ot(r);0===e&&null!==n?null==s?ch(t,n,g):Ei(t,n,g,s||null,!0):1===e&&null!==n?Ei(t,n,g,s||null,!0):2===e?function Tc(e,t,n){const r=function Ca(e,t){return e.parentNode(t)}(e,t);r&&function Fw(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,g,f):3===e&&t.destroyNode(g),null!=l&&function Vw(e,t,n,r,s){const l=n[7];l!==Ot(n)&&Ji(t,e,r,l,s);for(let g=b;g<n.length;g++){const w=n[g];ss(w[1],w,e,t,r,l)}}(t,e,l,n,s)}}function Ac(e,t,n){return e.createElement(t,n)}function oh(e,t){const n=e[9],r=n.indexOf(t),s=t[3];512&t[2]&&(t[2]&=-513,Gl(s,-1)),n.splice(r,1)}function _c(e,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function Pw(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const s=t[n[r]];if(!(s instanceof Yo)){const l=n[r+1];if(Array.isArray(l))for(let f=0;f<l.length;f+=2){const g=s[l[f]],w=l[f+1];try{w.call(g)}finally{}}else try{l.call(s)}finally{}}}}(e,t),function Lw(e,t){const n=e.cleanup,r=t[7];let s=-1;if(null!==n)for(let l=0;l<n.length-1;l+=2)if("string"==typeof n[l]){const f=n[l+1],g="function"==typeof f?f(t):Ot(t[f]),w=r[s=n[l+2]],m=n[l+3];"boolean"==typeof m?g.removeEventListener(n[l],w,m):m>=0?r[s=m]():r[s=-m].unsubscribe(),l+=2}else{const f=r[s=n[l+1]];n[l].call(f)}if(null!==r){for(let l=s+1;l<r.length;l++)(0,r[l])();t[7]=null}}(e,t),1===t[1].type&&t[11].destroy();const n=t[17];if(null!==n&&N(t[3])){n!==t[3]&&oh(n,t);const r=t[19];null!==r&&r.detachView(e)}!function pw(e){pc.delete(e[20])}(t)}}function ah(e,t,n){return function lh(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const s=e.data[r.directiveStart].encapsulation;if(s===Sn.None||s===Sn.Emulated)return null}return vn(r,n)}(e,t.parent,n)}function Ei(e,t,n,r,s){e.insertBefore(t,n,r,s)}function ch(e,t,n){e.appendChild(t,n)}function uh(e,t,n,r,s){null!==r?Ei(e,t,n,r,s):ch(e,t,n)}let Oc,hh=function fh(e,t,n){return 40&e.type?vn(e,n):null};function Ea(e,t,n,r){const s=ah(e,r,t),l=t[11],g=function dh(e,t,n){return hh(e,t,n)}(r.parent||t[6],r,t);if(null!=s)if(Array.isArray(n))for(let w=0;w<n.length;w++)uh(l,s,n[w],g,!1);else uh(l,s,n,g,!1)}function ph(e,t){return null!==t?e[16][6].projection[t.projection]:null}function vc(e,t,n,r,s,l,f){for(;null!=n;){const g=r[n.index],w=n.type;if(f&&0===t&&(g&&rn(Ot(g),r),n.flags|=4),64!=(64&n.flags))if(8&w)vc(e,t,n.child,r,s,l,!1),Ji(t,e,s,g,l);else if(32&w){const m=xc(n,r);let E;for(;E=m();)Ji(t,e,s,E,l);Ji(t,e,s,g,l)}else 16&w?mh(e,t,r,n,s,l):Ji(t,e,s,g,l);n=f?n.projectionNext:n.next}}function ss(e,t,n,r,s,l){vc(n,r,e.firstChild,t,s,l,!1)}function mh(e,t,n,r,s,l){const f=n[16],w=f[6].projection[r.projection];if(Array.isArray(w))for(let m=0;m<w.length;m++)Ji(t,e,s,w[m],l);else vc(e,t,w,f[3],s,l,!0)}function wh(e,t,n){e.setAttribute(t,"style",n)}function Mc(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}const Nh=new Re("ENVIRONMENT_INITIALIZER"),Oh=new Re("INJECTOR",-1),Rh=new Re("INJECTOR_DEF_TYPES");class Lh{get(t,n=Jo){if(n===Jo){const r=new Error(`NullInjectorError: No provider for ${me(t)}!`);throw r.name="NullInjectorError",r}return n}}function gy(...e){return{\u0275providers:Ph(0,e)}}function Ph(e,...t){const n=[],r=new Set;let s;return Mr(t,l=>{const f=l;kc(f,n,[],r)&&(s||(s=[]),s.push(f))}),void 0!==s&&Fh(s,n),n}function Fh(e,t){for(let n=0;n<e.length;n++){const{providers:s}=e[n];Mr(s,l=>{t.push(l)})}}function kc(e,t,n,r){if(!(e=Q(e)))return!1;let s=null,l=Uo(e);const f=!l&&Xe(e);if(l||f){if(f&&!f.standalone)return!1;s=e}else{const w=e.ngModule;if(l=Uo(w),!l)return!1;s=w}const g=r.has(s);if(f){if(g)return!1;if(r.add(s),f.dependencies){const w="function"==typeof f.dependencies?f.dependencies():f.dependencies;for(const m of w)kc(m,t,n,r)}}else{if(!l)return!1;{if(null!=l.imports&&!g){let m;r.add(s);try{Mr(l.imports,E=>{kc(E,t,n,r)&&(m||(m=[]),m.push(E))})}finally{}void 0!==m&&Fh(m,t)}if(!g){const m=Ci(s)||(()=>new s);t.push({provide:s,useFactory:m,deps:fe},{provide:Rh,useValue:s,multi:!0},{provide:Nh,useValue:()=>$e(s),multi:!0})}const w=l.providers;null==w||g||Mr(w,E=>{t.push(E)})}}return s!==e&&void 0!==e.providers}const py=Pe({provide:String,useValue:Pe});function Vc(e){return null!==e&&"object"==typeof e&&py in e}function Ai(e){return"function"==typeof e}const Uc=new Re("Set Injector scope."),ba={},wy={};let jc;function Sa(){return void 0===jc&&(jc=new Lh),jc}class eo{}class Vh extends eo{constructor(t,n,r,s){super(),this.parent=n,this.source=r,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zc(t,f=>this.processProvider(f)),this.records.set(Oh,to(void 0,this)),s.has("environment")&&this.records.set(eo,to(void 0,this));const l=this.records.get(Uc);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(Rh.multi,fe,xe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=Qi(this),r=$t(void 0);try{return t()}finally{Qi(n),$t(r)}}get(t,n=Jo,r=xe.Default){this.assertNotDestroyed();const s=Qi(this),l=$t(void 0);try{if(!(r&xe.SkipSelf)){let g=this.records.get(t);if(void 0===g){const w=function Dy(e){return"function"==typeof e||"object"==typeof e&&e instanceof Re}(t)&&sr(t);g=w&&this.injectableDefInScope(w)?to(Hc(t),ba):null,this.records.set(t,g)}if(null!=g)return this.hydrate(t,g)}return(r&xe.Self?Sa():this.parent).get(t,n=r&xe.Optional&&n===Jo?null:n)}catch(f){if("NullInjectorError"===f.name){if((f[pa]=f[pa]||[]).unshift(me(t)),s)throw f;return function $2(e,t,n,r){const s=e[pa];throw t[Ff]&&s.unshift(t[Ff]),e.message=function q2(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let s=me(t);if(Array.isArray(t))s=t.map(me).join(" -> ");else if("object"==typeof t){let l=[];for(let f in t)if(t.hasOwnProperty(f)){let g=t[f];l.push(f+":"+("string"==typeof g?JSON.stringify(g):me(g)))}s=`{${l.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${e.replace(G2,"\n  ")}`}("\n"+e.message,s,n,r),e.ngTokenPath=s,e[pa]=null,e}(f,t,"R3InjectorError",this.source)}throw f}finally{$t(l),Qi(s)}}resolveInjectorInitializers(){const t=Qi(this),n=$t(void 0);try{const r=this.get(Nh.multi,fe,xe.Self);for(const s of r)s()}finally{Qi(t),$t(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(me(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _(205,!1)}processProvider(t){let n=Ai(t=Q(t))?t:Q(t&&t.provide);const r=function xy(e){return Vc(e)?to(void 0,e.useValue):to(function Uh(e,t,n){let r;if(Ai(e)){const s=Q(e);return Ci(s)||Hc(s)}if(Vc(e))r=()=>Q(e.useValue);else if(function kh(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...uc(e.deps||[]));else if(function Bh(e){return!(!e||!e.useExisting)}(e))r=()=>$e(Q(e.useExisting));else{const s=Q(e&&(e.useClass||e.provide));if(!function Cy(e){return!!e.deps}(e))return Ci(s)||Hc(s);r=()=>new s(...uc(e.deps))}return r}(e),ba)}(t);if(Ai(t)||!0!==t.multi)this.records.get(n);else{let s=this.records.get(n);s||(s=to(void 0,ba,!0),s.factory=()=>uc(s.multi),this.records.set(n,s)),n=t,s.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===ba&&(n.value=wy,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Ey(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=Q(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function Hc(e){const t=sr(e),n=null!==t?t.factory:Ci(e);if(null!==n)return n;if(e instanceof Re)throw new _(204,!1);if(e instanceof Function)return function yy(e){const t=e.length;if(t>0)throw function Ko(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new _(204,!1);const n=function Pl(e){const t=e&&(e[gi]||e[Qs]);if(t){const n=function en(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new _(204,!1)}function to(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Ay(e){return!!e.\u0275providers}function zc(e,t){for(const n of e)Array.isArray(n)?zc(n,t):Ay(n)?zc(n.\u0275providers,t):t(n)}class jh{}class by{resolveComponentFactory(t){throw function _y(e){const t=Error(`No component factory found for ${me(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Ta=(()=>{class e{}return e.NULL=new by,e})();function Sy(){return no(Vt(),H())}function no(e,t){return new ro(vn(e,t))}let ro=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=Sy,e})();class zh{}let My=(()=>{class e{}return e.\u0275prov=lt({token:e,providedIn:"root",factory:()=>null}),e})();class Gc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ny=new Gc("14.2.12"),Wc={};function Xc(e){return e.ngOriginalError}class io{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Xc(t);for(;n&&Xc(n);)n=Xc(n);return n||null}}function Yh(e,t,n){let r=e.length;for(;;){const s=e.indexOf(t,n);if(-1===s)return s;if(0===s||e.charCodeAt(s-1)<=32){const l=t.length;if(s+l===r||e.charCodeAt(s+l)<=32)return s}n=s+1}}const Xh="ng-template";function Hy(e,t,n){let r=0;for(;r<e.length;){let s=e[r++];if(n&&"class"===s){if(s=e[r],-1!==Yh(s.toLowerCase(),t,0))return!0}else if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===t)return!0;return!1}}return!1}function Zh(e){return 4===e.type&&e.value!==Xh}function zy(e,t,n){return t===(4!==e.type||n?e.value:Xh)}function Gy(e,t,n){let r=4;const s=e.attrs||[],l=function Xy(e){for(let t=0;t<e.length;t++)if(yf(e[t]))return t;return e.length}(s);let f=!1;for(let g=0;g<t.length;g++){const w=t[g];if("number"!=typeof w){if(!f)if(4&r){if(r=2|1&r,""!==w&&!zy(e,w,n)||""===w&&1===t.length){if(Zn(r))return!1;f=!0}}else{const m=8&r?w:t[++g];if(8&r&&null!==e.attrs){if(!Hy(e.attrs,m,n)){if(Zn(r))return!1;f=!0}continue}const A=Wy(8&r?"class":w,s,Zh(e),n);if(-1===A){if(Zn(r))return!1;f=!0;continue}if(""!==m){let S;S=A>l?"":s[A+1].toLowerCase();const v=8&r?S:null;if(v&&-1!==Yh(v,m,0)||2&r&&m!==S){if(Zn(r))return!1;f=!0}}}}else{if(!f&&!Zn(r)&&!Zn(w))return!1;if(f&&Zn(w))continue;f=!1,r=w|1&r}}return Zn(r)||f}function Zn(e){return 0==(1&e)}function Wy(e,t,n,r){if(null===t)return-1;let s=0;if(r||!n){let l=!1;for(;s<t.length;){const f=t[s];if(f===e)return s;if(3===f||6===f)l=!0;else{if(1===f||2===f){let g=t[++s];for(;"string"==typeof g;)g=t[++s];continue}if(4===f)break;if(0===f){s+=4;continue}}s+=l?1:2}return-1}return function Zy(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function $h(e,t,n=!1){for(let r=0;r<t.length;r++)if(Gy(e,t[r],n))return!0;return!1}function qh(e,t){return e?":not("+t.trim()+")":t}function qy(e){let t=e[0],n=1,r=2,s="",l=!1;for(;n<e.length;){let f=e[n];if("string"==typeof f)if(2&r){const g=e[++n];s+="["+f+(g.length>0?'="'+g+'"':"")+"]"}else 8&r?s+="."+f:4&r&&(s+=" "+f);else""!==s&&!Zn(f)&&(t+=qh(l,s),s=""),r=f,l=l||!Zn(r);n++}return""!==s&&(t+=qh(l,s)),t}const Ae={};function t0(e,t=null,n=null,r){const s=n0(e,t,n,r);return s.resolveInjectorInitializers(),s}function n0(e,t=null,n=null,r,s=new Set){const l=[n||fe,gy(e)];return r=r||("object"==typeof e?void 0:me(e)),new Vh(l,t||Sa(),r||null,s)}let Ii=(()=>{class e{static create(n,r){if(Array.isArray(n))return t0({name:""},r,n,"");{const s=n.name??"";return t0({name:s},n.parent,n.providers,s)}}}return e.THROW_IF_NOT_FOUND=Jo,e.NULL=new Lh,e.\u0275prov=lt({token:e,providedIn:"any",factory:()=>$e(Oh)}),e.__NG_ELEMENT_ID__=-1,e})();function Ne(e,t=xe.Default){const n=H();return null===n?$e(e,t):bf(Vt(),n,Q(e),t)}function C0(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r],l=n[r+1];if(-1!==l){const f=e.data[l];$l(s),f.contentQueries(2,t[l],l)}}}function Ra(e,t,n,r,s,l,f,g,w,m,E){const A=t.blueprint.slice();return A[0]=s,A[2]=76|r,(null!==E||e&&1024&e[2])&&(A[2]|=1024),rf(A),A[3]=A[15]=e,A[8]=n,A[10]=f||e&&e[10],A[11]=g||e&&e[11],A[12]=w||e&&e[12]||null,A[9]=m||e&&e[9]||null,A[6]=l,A[20]=function hw(){return fw++}(),A[21]=E,A[16]=2==t.type?e[16]:A,A}function ao(e,t,n,r,s){let l=e.data[t];if(null===l)l=function lu(e,t,n,r,s){const l=af(),f=Wl(),w=e.data[t]=function Lx(e,t,n,r,s,l){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,f?l:l&&l.parent,n,t,r,s);return null===e.firstChild&&(e.firstChild=w),null!==l&&(f?null==l.child&&null!==w.parent&&(l.child=w):null===l.next&&(l.next=w)),w}(e,t,n,r,s),function a2(){return Ee.lFrame.inI18n}()&&(l.flags|=64);else if(64&l.type){l.type=n,l.value=r,l.attrs=s;const f=function Wo(){const e=Ee.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();l.injectorIndex=null===f?-1:f.injectorIndex}return ur(l,!0),l}function lo(e,t,n,r){if(0===n)return-1;const s=t.length;for(let l=0;l<n;l++)t.push(r),e.blueprint.push(r),e.data.push(null);return s}function cu(e,t,n){ql(t);try{const r=e.viewQuery;null!==r&&wu(1,r,n);const s=e.template;null!==s&&E0(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&C0(e,t),e.staticViewQueries&&wu(2,e.viewQuery,n);const l=e.components;null!==l&&function Nx(e,t){for(let n=0;n<t.length;n++)qx(e,t[n])}(t,l)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,Ql()}}function La(e,t,n,r){const s=t[2];if(128!=(128&s)){ql(t);try{rf(t),function cf(e){return Ee.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&E0(e,t,n,2,r);const f=3==(3&s);if(f){const m=e.preOrderCheckHooks;null!==m&&oa(t,m,null)}else{const m=e.preOrderHooks;null!==m&&sa(t,m,0,null),Kl(t,0)}if(function Zx(e){for(let t=Cc(e);null!==t;t=Ec(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const s=n[r],l=s[3];0==(512&s[2])&&Gl(l,1),s[2]|=512}}}(t),function Xx(e){for(let t=Cc(e);null!==t;t=Ec(t))for(let n=b;n<t.length;n++){const r=t[n],s=r[1];ra(r)&&La(s,r,s.template,r[8])}}(t),null!==e.contentQueries&&C0(e,t),f){const m=e.contentCheckHooks;null!==m&&oa(t,m)}else{const m=e.contentHooks;null!==m&&sa(t,m,1),Kl(t,1)}!function vx(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const s=n[r];if(s<0)ei(~s);else{const l=s,f=n[++r],g=n[++r];l2(f,l),g(2,t[l])}}}finally{ei(-1)}}(e,t);const g=e.components;null!==g&&function Mx(e,t){for(let n=0;n<t.length;n++)$x(e,t[n])}(t,g);const w=e.viewQuery;if(null!==w&&wu(2,w,r),f){const m=e.viewCheckHooks;null!==m&&oa(t,m)}else{const m=e.viewHooks;null!==m&&sa(t,m,2),Kl(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Gl(t[3],-1))}finally{Ql()}}}function E0(e,t,n,r,s){const l=function gn(){return Ee.lFrame.selectedIndex}(),f=2&r;try{ei(-1),f&&t.length>u&&function Qh(e,t,n,r){if(!r)if(3==(3&t[2])){const l=e.preOrderCheckHooks;null!==l&&oa(t,l,n)}else{const l=e.preOrderHooks;null!==l&&sa(t,l,0,n)}ei(n)}(e,t,u,!1),n(r,s)}finally{ei(l)}}function A0(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=fu(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function fu(e,t,n,r,s,l,f,g,w,m){const E=u+r,A=E+s,S=function Ox(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Ae);return n}(E,A),v="function"==typeof m?m():m;return S[1]={type:e,blueprint:S,template:n,queries:null,viewQuery:g,declTNode:t,data:S.slice().fill(null,E),bindingStartIndex:E,expandoStartIndex:A,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof f?f():f,firstChild:null,schemas:w,consts:v,incompleteFirstPass:!1}}function _0(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const s=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,s):n[r]=[t,s]}return n}function b0(e,t){const r=t.directiveEnd,s=e.data,l=t.attrs,f=[];let g=null,w=null;for(let m=t.directiveStart;m<r;m++){const E=s[m],A=E.inputs,S=null===l||Zh(t)?null:Yx(A,l);f.push(S),g=_0(A,m,g),w=_0(E.outputs,m,w)}null!==g&&(g.hasOwnProperty("class")&&(t.flags|=16),g.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=f,t.inputs=g,t.outputs=w}function T0(e,t,n,r,s,l){const f=l.hostBindings;if(f){let g=e.hostBindingOpCodes;null===g&&(g=e.hostBindingOpCodes=[]);const w=~t.index;(function kx(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(g)!=w&&g.push(w),g.push(r,s,f)}}function v0(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function M0(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function zx(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;B(t)&&(n[""]=e)}}function N0(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function O0(e,t,n,r,s){e.data[r]=s;const l=s.factory||(s.factory=Ci(s.type)),f=new Yo(l,B(s),Ne);e.blueprint[r]=f,n[r]=f,T0(e,t,0,r,lo(e,n,s.hostVars,Ae),s)}function Gx(e,t,n){const r=vn(t,e),s=A0(n),l=e[10],f=Pa(e,Ra(e,s,null,n.onPush?32:16,r,t,l,l.createRenderer(r,n),null,null,null));e[t.index]=f}function Wx(e,t,n,r,s,l){const f=l[t];if(null!==f){const g=r.setInput;for(let w=0;w<f.length;){const m=f[w++],E=f[w++],A=f[w++];null!==g?r.setInput(n,A,m,E):n[E]=A}}}function Yx(e,t){let n=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;e.hasOwnProperty(s)&&(null===n&&(n=[]),n.push(s,e[s],t[r+1])),r+=2}else r+=2;else r+=4}return n}function $x(e,t){const n=Mn(t,e);if(ra(n)){const r=n[1];48&n[2]?La(r,n,r.template,n[8]):n[5]>0&&pu(n)}}function pu(e){for(let r=Cc(e);null!==r;r=Ec(r))for(let s=b;s<r.length;s++){const l=r[s];if(ra(l))if(512&l[2]){const f=l[1];La(f,l,f.template,l[8])}else l[5]>0&&pu(l)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const s=Mn(n[r],e);ra(s)&&s[5]>0&&pu(s)}}function qx(e,t){const n=Mn(t,e),r=n[1];(function Qx(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),cu(r,n,n[8])}function Pa(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Fa(e,t,n,r=!0){const s=t[10];s.begin&&s.begin();try{La(e,t,e.template,n)}catch(f){throw r&&function B0(e,t){const n=e[9],r=n?n.get(io,null):null;r&&r.handleError(t)}(t,f),f}finally{s.end&&s.end()}}function wu(e,t,n){$l(0),t(e,n)}function yu(e,t,n,r,s){for(let l=0;l<n.length;){const f=n[l++],g=n[l++],w=t[f],m=e.data[f];null!==m.setInput?m.setInput(w,s,r,g):w[g]=s}}function Ba(e,t,n){let r=n?e.styles:null,s=n?e.classes:null,l=0;if(null!==t)for(let f=0;f<t.length;f++){const g=t[f];"number"==typeof g?l=g:1==l?s=Xr(s,g):2==l&&(r=Xr(r,g+": "+t[++f]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=s:e.classesWithoutHost=s}function ka(e,t,n,r,s=!1){for(;null!==n;){const l=t[n.index];if(null!==l&&r.push(Ot(l)),N(l))for(let g=b;g<l.length;g++){const w=l[g],m=w[1].firstChild;null!==m&&ka(w[1],w,m,r)}const f=n.type;if(8&f)ka(e,t,n.child,r);else if(32&f){const g=xc(n,t);let w;for(;w=g();)r.push(w)}else if(16&f){const g=ph(t,n);if(Array.isArray(g))r.push(...g);else{const w=os(t[16]);ka(w[1],w,g,r,!0)}}n=s?n.projectionNext:n.next}return r}class Kx extends class us{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return ka(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(N(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(function Ic(e,t){if(e.length<=b)return;const n=b+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&oh(s,r),t>0&&(e[n-1][4]=r[4]);const l=ha(e,b+t);!function Tw(e,t){ss(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const f=l[19];null!==f&&f.detachView(l[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}(t,r),ha(n,r))}this._attachedToViewContainer=!1}!function sh(e,t){if(!(128&t[2])){const n=t[11];n.destroyNode&&ss(e,t,n,3,null,null),function Nw(e){let t=e[13];if(!t)return _c(e[1],e);for(;t;){let n=null;if(M(t))n=t[13];else{const r=t[b];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)M(t)&&_c(t[1],t),t=t[3];null===t&&(t=e),M(t)&&_c(t[1],t),n=t&&t[4]}t=n}}(t)}}(this._lView[1],this._lView)}onDestroy(t){!function I0(e,t,n,r){const s=function L0(e){return e[7]||(e[7]=[])}(t);null===n?s.push(r):(s.push(n),e.firstCreatePass&&function P0(e){return e.cleanup||(e.cleanup=[])}(e).push(r,s.length-1))}(this._lView[1],this._lView,null,t)}markForCheck(){!function mu(e){for(;e;){e[2]|=32;const t=os(e);if(Me(e)&&!t)return e;e=t}return null}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Fa(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Mw(e,t){ss(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new _(902,!1);this._appRef=t}}{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Fa(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class xu extends Ta{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Xe(t);return new ds(n,this.ngModule)}}function k0(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class eC{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){const s=this.injector.get(t,Wc,r);return s!==Wc||n===Wc?s:this.parentInjector.get(t,n,r)}}class ds extends jh{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Qy(e){return e.map(qy).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return k0(this.componentDef.inputs)}get outputs(){return k0(this.componentDef.outputs)}create(t,n,r,s){let l=(s=s||this.ngModule)instanceof eo?s:s?.injector;l&&null!==this.componentDef.getStandaloneInjector&&(l=this.componentDef.getStandaloneInjector(l)||l);const f=l?new eC(t,l):t,g=f.get(zh,null);if(null===g)throw new _(407,!1);const w=f.get(My,null),m=g.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",A=r?function Rx(e,t,n){return e.selectRootElement(t,n===Sn.ShadowDom)}(m,r,this.componentDef.encapsulation):Ac(m,E,function Jx(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(E)),S=this.componentDef.onPush?288:272,v=fu(0,null,null,1,0,null,null,null,null,null),O=Ra(null,v,null,S,null,null,g,m,w,f,null);let F,k;ql(O);try{const z=function rC(e,t,n,r,s,l){const f=n[1];n[22]=e;const w=ao(f,22,2,"#host",null),m=w.mergedAttrs=t.hostAttrs;null!==m&&(Ba(w,m,!0),null!==e&&(aa(s,e,m),null!==w.classes&&Mc(s,e,w.classes),null!==w.styles&&wh(s,e,w.styles)));const E=r.createRenderer(e,t),A=Ra(n,A0(t),null,t.onPush?32:16,n[22],w,r,E,l||null,null,null);return f.firstCreatePass&&(da(Zo(w,n),f,t.type),M0(f,w),N0(w,n.length,1)),Pa(n,A),n[22]=A}(A,this.componentDef,O,g,m);if(A)if(r)aa(m,A,["ng-version",Ny.full]);else{const{attrs:q,classes:U}=function Ky(e){const t=[],n=[];let r=1,s=2;for(;r<e.length;){let l=e[r];if("string"==typeof l)2===s?""!==l&&t.push(l,e[++r]):8===s&&n.push(l);else{if(!Zn(s))break;s=l}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);q&&aa(m,A,q),U&&U.length>0&&Mc(m,A,U.join(" "))}if(k=function zl(e,t){return e.data[t]}(v,u),void 0!==n){const q=k.projection=[];for(let U=0;U<this.ngContentSelectors.length;U++){const ie=n[U];q.push(null!=ie?Array.from(ie):null)}}F=function iC(e,t,n,r){const s=n[1],l=function Bx(e,t,n){const r=Vt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),O0(e,r,t,lo(e,t,1,null),n),b0(e,r));const s=$o(t,e,r.directiveStart,r);rn(s,t);const l=vn(r,t);return l&&rn(l,t),s}(s,n,t);if(e[8]=n[8]=l,null!==r)for(const g of r)g(l,t);if(t.contentQueries){const g=Vt();t.contentQueries(1,l,g.directiveStart)}const f=Vt();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(ei(f.index),T0(n[1],f,0,f.directiveStart,f.directiveEnd,t),v0(t,l)),l}(z,this.componentDef,O,[oC]),cu(v,O,null)}finally{Ql()}return new nC(this.componentType,F,no(k,O),O,k)}}class nC extends class Iy{}{constructor(t,n,r,s,l){super(),this.location=r,this._rootLView=s,this._tNode=l,this.instance=n,this.hostView=this.changeDetectorRef=new Kx(s),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let s;if(null!==r&&(s=r[t])){const l=this._rootLView;yu(l[1],l,s,t,n),function S0(e,t){const n=Mn(t,e);16&n[2]||(n[2]|=32)}(l,this._tNode.index)}}get injector(){return new Wi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function oC(){const e=Vt();ia(H()[1],e)}function Du(e,t,n,r,s){const f=s?"class":"style";yu(e,n,t.inputs[f],f,r)}function Au(e,t,n,r){const s=H(),l=Ue(),f=u+e,g=s[11],w=s[f]=Ac(g,t,function w2(){return Ee.lFrame.currentNamespace}()),m=l.firstCreatePass?function EC(e,t,n,r,s,l,f){const g=t.consts,m=ao(t,e,2,s,Jr(g,l));return function hu(e,t,n,r){let s=!1;if(sf()){const l=function jx(e,t,n){const r=e.directiveRegistry;let s=null;if(r)for(let l=0;l<r.length;l++){const f=r[l];$h(n,f.selectors,!1)&&(s||(s=[]),da(Zo(n,t),e,f.type),B(f)?(M0(e,n),s.unshift(f)):s.push(f))}return s}(e,t,n),f=null===r?null:{"":-1};if(null!==l){s=!0,N0(n,e.data.length,l.length);for(let E=0;E<l.length;E++){const A=l[E];A.providersResolver&&A.providersResolver(A)}let g=!1,w=!1,m=lo(e,t,l.length,null);for(let E=0;E<l.length;E++){const A=l[E];n.mergedAttrs=la(n.mergedAttrs,A.hostAttrs),O0(e,n,t,m,A),zx(m,A,f),null!==A.contentQueries&&(n.flags|=8),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(n.flags|=128);const S=A.type.prototype;!g&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),g=!0),!w&&(S.ngOnChanges||S.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),w=!0),m++}b0(e,n)}f&&function Hx(e,t,n){if(t){const r=e.localNames=[];for(let s=0;s<t.length;s+=2){const l=n[t[s+1]];if(null==l)throw new _(-301,!1);r.push(t[s],l)}}}(n,r,f)}return n.mergedAttrs=la(n.mergedAttrs,n.attrs),s}(t,n,m,Jr(g,f)),null!==m.attrs&&Ba(m,m.attrs,!1),null!==m.mergedAttrs&&Ba(m,m.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,m),m}(f,l,s,0,t,n,r):l.data[f];ur(m,!0);const E=m.mergedAttrs;null!==E&&aa(g,w,E);const A=m.classes;null!==A&&Mc(g,w,A);const S=m.styles;return null!==S&&wh(g,w,S),64!=(64&m.flags)&&Ea(l,s,w,m),0===function Jm(){return Ee.lFrame.elementDepthCount}()&&rn(w,s),function e2(){Ee.lFrame.elementDepthCount++}(),function Z(e){return 1==(1&e.flags)}(m)&&(function uu(e,t,n){!sf()||(function Vx(e,t,n,r){const s=n.directiveStart,l=n.directiveEnd;e.firstCreatePass||Zo(n,t),rn(r,t);const f=n.initialInputs;for(let g=s;g<l;g++){const w=e.data[g],m=B(w);m&&Gx(t,n,w);const E=$o(t,e,g,n);rn(E,t),null!==f&&Wx(0,g-s,E,w,0,f),m&&(Mn(n.index,t)[8]=E)}}(e,t,n,vn(n,t)),128==(128&n.flags)&&function Ux(e,t,n){const r=n.directiveStart,s=n.directiveEnd,l=n.index,f=function c2(){return Ee.lFrame.currentDirectiveIndex}();try{ei(l);for(let g=r;g<s;g++){const w=e.data[g],m=t[g];Xl(g),(null!==w.hostBindings||0!==w.hostVars||null!==w.hostAttrs)&&v0(w,m)}}finally{ei(-1),Xl(f)}}(e,t,n))}(l,s,m),function D0(e,t,n){if(L(t)){const s=t.directiveEnd;for(let l=t.directiveStart;l<s;l++){const f=e.data[l];f.contentQueries&&f.contentQueries(1,n[l],l)}}}(l,m,s)),null!==r&&function du(e,t,n=vn){const r=t.localNames;if(null!==r){let s=t.index+1;for(let l=0;l<r.length;l+=2){const f=r[l+1],g=-1===f?n(t,e):e[f];e[s++]=g}}}(s,m),Au}function Iu(){let e=Vt();Wl()?function Yl(){Ee.lFrame.isParent=!1}():(e=e.parent,ur(e,!1));const t=e;!function t2(){Ee.lFrame.elementDepthCount--}();const n=Ue();return n.firstCreatePass&&(ia(n,e),L(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function D2(e){return 0!=(16&e.flags)}(t)&&Du(n,t,H(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function A2(e){return 0!=(32&e.flags)}(t)&&Du(n,t,H(),t.stylesWithoutHost,!1),Iu}function _u(e,t,n,r){return Au(e,t,n,r),Iu(),_u}function Tu(e){return!!e&&"function"==typeof e.then}const IC=function J0(e){return!!e&&"function"==typeof e.subscribe},Eo="en-US";let Q1=Eo;class Do{}class Ag extends Do{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xu(this);const r=function dn(e,t){const n=e[pi]||null;if(!n&&!0===t)throw new Error(`Type ${me(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function Or(e){return e instanceof Function?e():e}(r.bootstrap),this._r3Injector=n0(t,n,[{provide:Do,useValue:this},{provide:Ta,useValue:this.componentFactoryResolver}],me(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ku extends class gD{}{constructor(t){super(),this.moduleType=t}create(t){return new Ag(this.moduleType,t)}}function Uu(e){return t=>{setTimeout(e,void 0,t)}}const Pr=class GD extends Bt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let s=t,l=n||(()=>null),f=r;if(t&&"object"==typeof t){const w=t;s=w.next?.bind(w),l=w.error?.bind(w),f=w.complete?.bind(w)}this.__isAsync&&(l=Uu(l),s&&(s=Uu(s)),f&&(f=Uu(f)));const g=super.subscribe({next:s,error:l,complete:f});return t instanceof Fn&&t.add(g),g}};function Za(...e){}const lp=new Re("Application Initializer");let $a=(()=>{class e{constructor(n){this.appInits=n,this.resolve=Za,this.reject=Za,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,s)=>{this.resolve=r,this.reject=s})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const l=this.appInits[s]();if(Tu(l))n.push(l);else if(IC(l)){const f=new Promise((g,w)=>{l.subscribe({complete:g,error:w})});n.push(f)}}Promise.all(n).then(()=>{r()}).catch(s=>{this.reject(s)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)($e(lp,8))},e.\u0275prov=lt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const As=new Re("AppId",{providedIn:"root",factory:function cp(){return`${Ku()}${Ku()}${Ku()}`}});function Ku(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const up=new Re("Platform Initializer"),dp=new Re("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vA=new Re("appBootstrapListener"),Br=new Re("LocaleId",{providedIn:"root",factory:()=>function X2(e,t=xe.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),$e(e,t)}(Br,xe.Optional|xe.SkipSelf)||function MA(){return typeof $localize<"u"&&$localize.locale||Eo}()}),PA=(()=>Promise.resolve(0))();function Ju(e){typeof Zone>"u"?PA.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class sn{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pr(!1),this.onMicrotaskEmpty=new Pr(!1),this.onStable=new Pr(!1),this.onError=new Pr(!1),typeof Zone>"u")throw new _(908,!1);Zone.assertZonePatched();const s=this;if(s._nesting=0,s._outer=s._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const l=Zone.AsyncStackTaggingZoneSpec;s._inner=s._inner.fork(new l("Angular"))}Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&n,s.shouldCoalesceRunChangeDetection=r,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function FA(){let e=it.requestAnimationFrame,t=it.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function VA(e){const t=()=>{!function kA(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(it,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,td(e),e.isCheckStableRunning=!0,ed(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),td(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,s,l,f,g)=>{try{return gp(e),n.invokeTask(s,l,f,g)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||e.shouldCoalesceRunChangeDetection)&&t(),pp(e)}},onInvoke:(n,r,s,l,f,g,w)=>{try{return gp(e),n.invoke(s,l,f,g,w)}finally{e.shouldCoalesceRunChangeDetection&&t(),pp(e)}},onHasTask:(n,r,s,l)=>{n.hasTask(s,l),r===s&&("microTask"==l.change?(e._hasPendingMicrotasks=l.microTask,td(e),ed(e)):"macroTask"==l.change&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(n,r,s,l)=>(n.handleError(s,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!sn.isInAngularZone())throw new _(909,!1)}static assertNotInAngularZone(){if(sn.isInAngularZone())throw new _(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,s){const l=this._inner,f=l.scheduleEventTask("NgZoneEvent: "+s,t,BA,Za,Za);try{return l.runTask(f,n,r)}finally{l.cancelTask(f)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const BA={};function ed(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function td(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function gp(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function pp(e){e._nesting--,ed(e)}class UA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pr,this.onMicrotaskEmpty=new Pr,this.onStable=new Pr,this.onError=new Pr}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,s){return t.apply(n,r)}}const mp=new Re(""),qa=new Re("");let id,nd=(()=>{class e{constructor(n,r,s){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,id||(function jA(e){id=e}(s),s.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{sn.assertNotInAngularZone(),Ju(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ju(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,s){let l=-1;r&&r>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(f=>f.timeoutId!==l),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:l,updateCb:s})}whenStable(n,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,s){return[]}}return e.\u0275fac=function(n){return new(n||e)($e(sn),$e(rd),$e(qa))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})(),rd=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return id?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),oi=null;const wp=new Re("AllowMultipleToken"),od=new Re("PlatformDestroyListeners");function xp(e,t,n=[]){const r=`Platform: ${t}`,s=new Re(r);return(l=[])=>{let f=sd();if(!f||f.injector.get(wp,!1)){const g=[...n,...l,{provide:s,useValue:!0}];e?e(g):function GA(e){if(oi&&!oi.get(wp,!1))throw new _(400,!1);oi=e;const t=e.get(Ep);(function yp(e){const t=e.get(up,null);t&&t.forEach(n=>n())})(e)}(function Cp(e=[],t){return Ii.create({name:t,providers:[{provide:Uc,useValue:"platform"},{provide:od,useValue:new Set([()=>oi=null])},...e]})}(g,r))}return function YA(e){const t=sd();if(!t)throw new _(401,!1);return t}()}}function sd(){return oi?.get(Ep)??null}let Ep=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const s=function Ap(e,t){let n;return n="noop"===e?new UA:("zone.js"===e?void 0:e)||new sn(t),n}(r?.ngZone,function Dp(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),l=[{provide:sn,useValue:s}];return s.run(()=>{const f=Ii.create({providers:l,parent:this.injector,name:n.moduleType.name}),g=n.create(f),w=g.injector.get(io,null);if(!w)throw new _(402,!1);return s.runOutsideAngular(()=>{const m=s.onError.subscribe({next:E=>{w.handleError(E)}});g.onDestroy(()=>{Qa(this._modules,g),m.unsubscribe()})}),function Ip(e,t,n){try{const r=n();return Tu(r)?r.catch(s=>{throw t.runOutsideAngular(()=>e.handleError(s)),s}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(w,s,()=>{const m=g.injector.get($a);return m.runInitializers(),m.donePromise.then(()=>(function K1(e){Ze(e,"Expected localeId to be defined"),"string"==typeof e&&(Q1=e.toLowerCase().replace(/_/g,"-"))}(g.injector.get(Br,Eo)||Eo),this._moduleDoBootstrap(g),g))})})}bootstrapModule(n,r=[]){const s=_p({},r);return function HA(e,t,n){const r=new ku(n);return Promise.resolve(r)}(0,0,n).then(l=>this.bootstrapModuleFactory(l,s))}_moduleDoBootstrap(n){const r=n.injector.get(ad);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(s=>r.bootstrap(s));else{if(!n.instance.ngDoBootstrap)throw new _(403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(od,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)($e(Ii))},e.\u0275prov=lt({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function _p(e,t){return Array.isArray(t)?t.reduce(_p,e):{...e,...t}}let ad=(()=>{class e{constructor(n,r,s){this._zone=n,this._injector=r,this._exceptionHandler=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new pt(g=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{g.next(this._stable),g.complete()})}),f=new pt(g=>{let w;this._zone.runOutsideAngular(()=>{w=this._zone.onStable.subscribe(()=>{sn.assertNotInAngularZone(),Ju(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,g.next(!0))})})});const m=this._zone.onUnstable.subscribe(()=>{sn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{g.next(!1)}))});return()=>{w.unsubscribe(),m.unsubscribe()}});this.isStable=Bo(l,f.pipe(function ko(e={}){const{connector:t=(()=>new Bt),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:s=!0}=e;return l=>{let f,g,w,m=0,E=!1,A=!1;const S=()=>{g?.unsubscribe(),g=void 0},v=()=>{S(),f=w=void 0,E=A=!1},O=()=>{const F=f;v(),F?.unsubscribe()};return nr((F,k)=>{m++,!A&&!E&&S();const z=w=w??t();k.add(()=>{m--,0===m&&!A&&!E&&(g=ht(O,s))}),z.subscribe(k),!f&&m>0&&(f=new zn({next:q=>z.next(q),error:q=>{A=!0,S(),g=ht(v,n,q),z.error(q)},complete:()=>{E=!0,S(),g=ht(v,r),z.complete()}}),cn(F).subscribe(f))})(l)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const s=n instanceof jh;if(!this._injector.get($a).done)throw!s&&function _r(e){const t=Xe(e)||Qt(e)||Dt(e);return null!==t&&t.standalone}(n),new _(405,false);let f;f=s?n:this._injector.get(Ta).resolveComponentFactory(n),this.componentTypes.push(f.componentType);const g=function zA(e){return e.isBoundToModule}(f)?void 0:this._injector.get(Do),m=f.create(Ii.NULL,[],r||f.selector,g),E=m.location.nativeElement,A=m.injector.get(mp,null);return A?.registerApplication(E),m.onDestroy(()=>{this.detachView(m.hostView),Qa(this.components,m),A?.unregisterApplication(E)}),this._loadComponent(m),m}tick(){if(this._runningTick)throw new _(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Qa(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(vA,[]).concat(this._bootstrapListeners).forEach(s=>s(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Qa(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new _(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)($e(sn),$e(eo),$e(io))},e.\u0275prov=lt({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Qa(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let Sp=!0;const uI=xp(null,"core",[]);let dI=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)($e(ad))},e.\u0275mod=mi({type:e}),e.\u0275inj=Ir({}),e})(),tl=null;function _s(){return tl}const Vr=new Re("DocumentToken");let R_=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mi({type:e}),e.\u0275inj=Ir({}),e})();class Sd extends class nb extends class gI{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function hI(e){tl||(tl=e)}(new Sd)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function rb(){return vs=vs||document.querySelector("base"),vs?vs.getAttribute("href"):null}();return null==n?null:function ib(e){fl=fl||document.createElement("a"),fl.setAttribute("href",e);const t=fl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){vs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function JI(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[s,l]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(s.trim()===t)return decodeURIComponent(l)}return null}(document.cookie,t)}}let fl,vs=null;const im=new Re("TRANSITION_ID"),sb=[{provide:lp,useFactory:function ob(e,t,n){return()=>{n.get($a).donePromise.then(()=>{const r=_s(),s=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let l=0;l<s.length;l++)r.remove(s[l])})}},deps:[im,Vr,Ii],multi:!0}];let lb=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const hl=new Re("EventManagerPlugins");let gl=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(s=>s.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,s){return this._findPluginFor(r).addEventListener(n,r,s)}addGlobalEventListener(n,r,s){return this._findPluginFor(r).addGlobalEventListener(n,r,s)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const s=this._plugins;for(let l=0;l<s.length;l++){const f=s[l];if(f.supports(n))return this._eventNameToPlugin.set(n,f),f}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)($e(hl),$e(sn))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();class om{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const s=_s().getGlobalEventTarget(this._doc,t);if(!s)throw new Error(`Unsupported event target ${s} for event ${n}`);return this.addEventListener(s,n,r)}}let sm=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})(),Ms=(()=>{class e extends sm{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,s){n.forEach(l=>{const f=this._doc.createElement("style");f.textContent=l,s.push(r.appendChild(f))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(am),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(n,s,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(am))}}return e.\u0275fac=function(n){return new(n||e)($e(Vr))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();function am(e){_s().remove(e)}const Td={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vd=/%COMP%/g;function pl(e,t,n){for(let r=0;r<t.length;r++){let s=t[r];Array.isArray(s)?pl(e,s,n):(s=s.replace(vd,e),n.push(s))}return n}function um(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Md=(()=>{class e{constructor(n,r,s){this.eventManager=n,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Nd(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Sn.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new gb(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(n),s}case 1:case Sn.ShadowDom:return new pb(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const s=pl(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)($e(gl),$e(Ms),$e(As))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();class Nd{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(Td[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(fm(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(fm(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,s){if(s){n=s+":"+n;const l=Td[s];l?t.setAttributeNS(l,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const s=Td[r];s?t.removeAttributeNS(s,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,s){s&(Dn.DashCase|Dn.Important)?t.style.setProperty(n,r,s&Dn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Dn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,um(r)):this.eventManager.addEventListener(t,n,um(r))}}function fm(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class gb extends Nd{constructor(t,n,r,s){super(t),this.component=r;const l=pl(s+"-"+r.id,r.styles,[]);n.addStyles(l),this.contentAttr=function db(e){return"_ngcontent-%COMP%".replace(vd,e)}(s+"-"+r.id),this.hostAttr=function fb(e){return"_nghost-%COMP%".replace(vd,e)}(s+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}class pb extends Nd{constructor(t,n,r,s){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=pl(s.id,s.styles,[]);for(let f=0;f<l.length;f++){const g=document.createElement("style");g.textContent=l[f],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let mb=(()=>{class e extends om{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,s){return n.addEventListener(r,s,!1),()=>this.removeEventListener(n,r,s)}removeEventListener(n,r,s){return n.removeEventListener(r,s)}}return e.\u0275fac=function(n){return new(n||e)($e(Vr))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const hm=["alt","control","meta","shift"],wb={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yb={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let xb=(()=>{class e extends om{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,s){const l=e.parseEventName(r),f=e.eventCallback(l.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_s().onAndCancel(n,l.domEventName,f))}static parseEventName(n){const r=n.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const l=e._normalizeKey(r.pop());let f="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),f="code."),hm.forEach(m=>{const E=r.indexOf(m);E>-1&&(r.splice(E,1),f+=m+".")}),f+=l,0!=r.length||0===l.length)return null;const w={};return w.domEventName=s,w.fullKey=f,w}static matchEventFullKeyCode(n,r){let s=wb[n.key]||n.key,l="";return r.indexOf("code.")>-1&&(s=n.code,l="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),hm.forEach(f=>{f!==s&&(0,yb[f])(n)&&(l+=f+".")}),l+=s,l===r)}static eventCallback(n,r,s){return l=>{e.matchEventFullKeyCode(l,n)&&s.runGuarded(()=>r(l))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)($e(Vr))},e.\u0275prov=lt({token:e,factory:e.\u0275fac}),e})();const pm=[{provide:dp,useValue:"browser"},{provide:up,useValue:function Cb(){Sd.makeCurrent()},multi:!0},{provide:Vr,useFactory:function Db(){return function Gw(e){Oc=e}(document),document},deps:[]}],Ab=xp(uI,"browser",pm),mm=new Re(""),wm=[{provide:qa,useClass:class ab{addToWindow(t){it.getAngularTestability=(r,s=!0)=>{const l=t.findTestabilityInTree(r,s);if(null==l)throw new Error("Could not find testability for element.");return l},it.getAllAngularTestabilities=()=>t.getAllTestabilities(),it.getAllAngularRootElements=()=>t.getAllRootElements(),it.frameworkStabilizers||(it.frameworkStabilizers=[]),it.frameworkStabilizers.push(r=>{const s=it.getAllAngularTestabilities();let l=s.length,f=!1;const g=function(w){f=f||w,l--,0==l&&r(f)};s.forEach(function(w){w.whenStable(g)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?_s().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:mp,useClass:nd,deps:[sn,rd,qa]},{provide:nd,useClass:nd,deps:[sn,rd,qa]}],ym=[{provide:Uc,useValue:"root"},{provide:io,useFactory:function Eb(){return new io},deps:[]},{provide:hl,useClass:mb,multi:!0,deps:[Vr,sn,dp]},{provide:hl,useClass:xb,multi:!0,deps:[Vr]},{provide:Md,useClass:Md,deps:[gl,Ms,As]},{provide:zh,useExisting:Md},{provide:sm,useExisting:Ms},{provide:Ms,useClass:Ms,deps:[Vr]},{provide:gl,useClass:gl,deps:[hl,sn]},{provide:class k_{},useClass:lb,deps:[]},[]];let Ib=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:As,useValue:n.appId},{provide:im,useExisting:As},sb]}}}return e.\u0275fac=function(n){return new(n||e)($e(mm,12))},e.\u0275mod=mi({type:e}),e.\u0275inj=Ir({providers:[...ym,...wm],imports:[R_,dI]}),e})();typeof window<"u"&&window;var ne=(()=>{return(e=ne||(ne={}))[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",ne;var e})(),Em=new Map([[ne.QR_CODE,"QR_CODE"],[ne.AZTEC,"AZTEC"],[ne.CODABAR,"CODABAR"],[ne.CODE_39,"CODE_39"],[ne.CODE_93,"CODE_93"],[ne.CODE_128,"CODE_128"],[ne.DATA_MATRIX,"DATA_MATRIX"],[ne.MAXICODE,"MAXICODE"],[ne.ITF,"ITF"],[ne.EAN_13,"EAN_13"],[ne.EAN_8,"EAN_8"],[ne.PDF_417,"PDF_417"],[ne.RSS_14,"RSS_14"],[ne.RSS_EXPANDED,"RSS_EXPANDED"],[ne.UPC_A,"UPC_A"],[ne.UPC_E,"UPC_E"],[ne.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function Lb(e){return Object.values(ne).includes(e)}var jr=(()=>{return(e=jr||(jr={}))[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",jr;var e})(),tr=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[jr.SCAN_TYPE_CAMERA,jr.SCAN_TYPE_FILE],e}(),Dm=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Em.has(t))throw t+" not in html5QrcodeSupportedFormatsTextMap";return new e(t,Em.get(t))},e}(),Am=function(){function e(){}return e.createFromText=function(t){return{decodedText:t,result:{text:t}}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),ml=(()=>{return(e=ml||(ml={}))[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",ml;var e})(),Im=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:ml.UNKWOWN_ERROR}},e}(),_m=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||!0===n)&&console.error(t)},e.prototype.logErrors=function(t){if(0===t.length)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function wr(e){return typeof e>"u"||null===e}var e,Ns=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = "+t},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = "+t},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e}(),at=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: "+t},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e}(),bm=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Sm=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if("object"!=typeof t)return n.logError("videoConstraints should be of type object, the object passed is of type "+typeof t+".",!0),!1;for(var l=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),g=0,w=Object.keys(t);g<w.length;g++){var m=w[g];if(l.has(m))return n.logError(m+" is not supported videoConstaints.",!0),!1}return!0},e}(),gt=G(140),Tm=function(){function e(t,n,r){if(this.formatMap=new Map([[ne.QR_CODE,gt.BarcodeFormat.QR_CODE],[ne.AZTEC,gt.BarcodeFormat.AZTEC],[ne.CODABAR,gt.BarcodeFormat.CODABAR],[ne.CODE_39,gt.BarcodeFormat.CODE_39],[ne.CODE_93,gt.BarcodeFormat.CODE_93],[ne.CODE_128,gt.BarcodeFormat.CODE_128],[ne.DATA_MATRIX,gt.BarcodeFormat.DATA_MATRIX],[ne.MAXICODE,gt.BarcodeFormat.MAXICODE],[ne.ITF,gt.BarcodeFormat.ITF],[ne.EAN_13,gt.BarcodeFormat.EAN_13],[ne.EAN_8,gt.BarcodeFormat.EAN_8],[ne.PDF_417,gt.BarcodeFormat.PDF_417],[ne.RSS_14,gt.BarcodeFormat.RSS_14],[ne.RSS_EXPANDED,gt.BarcodeFormat.RSS_EXPANDED],[ne.UPC_A,gt.BarcodeFormat.UPC_A],[ne.UPC_E,gt.BarcodeFormat.UPC_E],[ne.UPC_EAN_EXTENSION,gt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!gt)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var s=this.createZXingFormats(t),l=new Map;l.set(gt.DecodeHintType.POSSIBLE_FORMATS,s),l.set(gt.DecodeHintType.TRY_HARDER,!1),this.hints=l}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,s){try{r(n.decode(t))}catch(l){s(l)}})},e.prototype.decode=function(t){var n=new gt.MultiFormatReader(this.verbose,this.hints),r=new gt.HTMLCanvasElementLuminanceSource(t),s=new gt.BinaryBitmap(new gt.HybridBinarizer(r)),l=n.decode(s);return{text:l.text,format:Dm.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,s){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have "+t;return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,s=t;r<s.length;r++){var l=s[r];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError(l+" is not supported byZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),vm=function(){function e(t,n,r){if(this.formatMap=new Map([[ne.QR_CODE,"qr_code"],[ne.AZTEC,"aztec"],[ne.CODABAR,"codabar"],[ne.CODE_39,"code_39"],[ne.CODE_93,"code_93"],[ne.CODE_128,"code_128"],[ne.DATA_MATRIX,"data_matrix"],[ne.ITF,"itf"],[ne.EAN_13,"ean_13"],[ne.EAN_8,"ean_8"],[ne.PDF_417,"pdf417"],[ne.UPC_A,"upc_a"],[ne.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var s=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&typeof new BarcodeDetector({formats:["qr_code"]})<"u"},e.prototype.decodeAsync=function(t){return function(e,t,n,r){return new(n||(n=Promise))(function(l,f){function g(E){try{m(r.next(E))}catch(A){f(A)}}function w(E){try{m(r.throw(E))}catch(A){f(A)}}function m(E){E.done?l(E.value):function s(l){return l instanceof n?l:new n(function(f){f(l)})}(E.value).then(g,w)}m((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var n,r;return function(e,t){var r,s,l,f,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return f={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(E){return function w(m){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(l=2&m[0]?s.return:m[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,m[1])).done)return l;switch(s=0,l&&(m=[2&m[0],l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(l=(l=n.trys).length>0&&l[l.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(6===m[0]&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],s=0}finally{r=l=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}}(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(t)];case 1:if(!(n=s.sent())||0===n.length)throw"No barcode or QR code detected.";return[2,{text:(r=this.selectLargestBarcode(n)).rawValue,format:Dm.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,s=0,l=t;s<l.length;s++){var f=l[s],g=f.boundingBox.width*f.boundingBox.height;g>r&&(r=g,n=f)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,s=t;r<s.length;r++){var l=s[r];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn(l+" is not supported byBarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have "+t;return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,s){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Mm=function(e,t,n,r){return new(n||(n=Promise))(function(l,f){function g(E){try{m(r.next(E))}catch(A){f(A)}}function w(E){try{m(r.throw(E))}catch(A){f(A)}}function m(E){E.done?l(E.value):function s(l){return l instanceof n?l:new n(function(f){f(l)})}(E.value).then(g,w)}m((r=r.apply(e,t||[])).next())})},Nm=function(e,t){var r,s,l,f,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return f={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(E){return function w(m){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(l=2&m[0]?s.return:m[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,m[1])).done)return l;switch(s=0,l&&(m=[2&m[0],l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(l=(l=n.trys).length>0&&l[l.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(6===m[0]&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],s=0}finally{r=l=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}},kb=function(){function e(t,n,r,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&vm.isSupported()?(this.primaryDecoder=new vm(t,r,s),this.secondaryDecoder=new Tm(t,r,s)):this.primaryDecoder=new Tm(t,r,s)}return e.prototype.decodeAsync=function(t){return Mm(this,void 0,void 0,function(){var n;return Nm(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Mm(this,void 0,void 0,function(){var n,r;return Nm(this,function(s){switch(s.label){case 0:n=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,s.sent()];case 3:if(r=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++)t+=r[n];console.log(t/this.executionResults.length+" ms for "+this.executionResults.length+" last runs."),this.executions=0,this.executionResults=[]}},e}(),Ld=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(r[l]=s[l])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),wl=function(e,t,n,r){return new(n||(n=Promise))(function(l,f){function g(E){try{m(r.next(E))}catch(A){f(A)}}function w(E){try{m(r.throw(E))}catch(A){f(A)}}function m(E){E.done?l(E.value):function s(l){return l instanceof n?l:new n(function(f){f(l)})}(E.value).then(g,w)}m((r=r.apply(e,t||[])).next())})},yl=function(e,t){var r,s,l,f,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return f={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(E){return function w(m){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(l=2&m[0]?s.return:m[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,m[1])).done)return l;switch(s=0,l&&(m=[2&m[0],l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(l=(l=n.trys).length>0&&l[l.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(6===m[0]&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],s=0}finally{r=l=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}},Om=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(t){var n={};return n[this.name]=t,this.track.applyConstraints({advanced:[n]})},e.prototype.value=function(){var t=this.track.getSettings();return this.name in t?t[this.name]:null},e}(),Vb=function(e){function t(n,r){return e.call(this,n,r)||this}return Ld(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};return r[this.name]=n,this.track.applyConstraints({advanced:[r]})},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities()[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error(this.name+" capability not supported")},t}(Om),Ub=function(e){function t(n){return e.call(this,"zoom",n)||this}return Ld(t,e),t}(Vb),jb=function(e){function t(n){return e.call(this,"torch",n)||this}return Ld(t,e),t}(Om),Hb=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new Ub(this.track)},e.prototype.torchFeature=function(){return new jb(this.track)},e}(),zb=function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width=t+"px",n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){t.callbacks.onRenderSurfaceReady(t.surface.clientWidth,t.surface.clientHeight),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,s){return wl(this,void 0,void 0,function(){var l,f;return yl(this,function(g){switch(g.label){case 0:return l=new e(t,n,s),r.aspectRatio?(f={aspectRatio:r.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:g.sent(),g.label=2;case 2:return l.setupSurface(),[2,l]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return wl(this,void 0,void 0,function(){return yl(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var l=t.mediaStream.getVideoTracks().length,f=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++f>=l&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new Hb(this.getFirstTrackOrFail())},e}(),Gb=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return wl(this,void 0,void 0,function(){return yl(this,function(s){return[2,zb.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return wl(this,void 0,void 0,function(){return yl(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[4,navigator.mediaDevices.getUserMedia({audio:!1,video:t})];case 1:return[2,new e(s.sent())]}})})},e}(),Rm=function(e,t,n,r){return new(n||(n=Promise))(function(l,f){function g(E){try{m(r.next(E))}catch(A){f(A)}}function w(E){try{m(r.throw(E))}catch(A){f(A)}}function m(E){E.done?l(E.value):function s(l){return l instanceof n?l:new n(function(f){f(l)})}(E.value).then(g,w)}m((r=r.apply(e,t||[])).next())})},Lm=function(e,t){var r,s,l,f,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return f={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(E){return function w(m){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(l=2&m[0]?s.return:m[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,m[1])).done)return l;switch(s=0,l&&(m=[2&m[0],l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(l=(l=n.trys).length>0&&l[l.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(6===m[0]&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],s=0}finally{r=l=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}},Wb=function(){function e(){}return e.failIfNotSupported=function(){return Rm(this,void 0,void 0,function(){return Lm(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return Rm(this,void 0,void 0,function(){return Lm(this,function(n){return[2,Gb.create(t)]})})},e}(),Zb=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Ns.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Ns.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var t=location.host.split(":")[0];return"127.0.0.1"===t||"localhost"===t},e.getCamerasFromMediaDevices=function(){return function(e,t,n,r){return new(n||(n=Promise))(function(l,f){function g(E){try{m(r.next(E))}catch(A){f(A)}}function w(E){try{m(r.throw(E))}catch(A){f(A)}}function m(E){E.done?l(E.value):function s(l){return l instanceof n?l:new n(function(f){f(l)})}(E.value).then(g,w)}m((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var t,n,r,s,l,f,g;return function(e,t){var r,s,l,f,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return f={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(E){return function w(m){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(l=2&m[0]?s.return:m[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,m[1])).done)return l;switch(s=0,l&&(m=[2&m[0],l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(l=(l=n.trys).length>0&&l[l.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(6===m[0]&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],s=0}finally{r=l=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}}(this,function(w){switch(w.label){case 0:return t=function(m){for(var A=0,S=m.getVideoTracks();A<S.length;A++){var v=S[A];v.enabled=!1,v.stop(),m.removeTrack(v)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=w.sent(),s=[],l=0,f=r;l<f.length;l++)"videoinput"===(g=f[l]).kind&&s.push({id:g.deviceId,label:g.label});return t(n),[2,s]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){MediaStreamTrack.getSources(function(l){for(var f=[],g=0,w=l;g<w.length;g++){var m=w[g];"video"===m.kind&&f.push({id:m.id,label:m.label})}t(f)})})},e}(),Ct=(()=>(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(Ct||(Ct={})),Ct))(),$b=function(){function e(){this.state=Ct.NOT_STARTED,this.onGoingTransactionNewState=Ct.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Ct.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ct.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ct.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ct.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ct.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Ct.UNKNOWN:throw"Transition from unknown is not allowed";case Ct.NOT_STARTED:this.failIfNewStateIs(t,[Ct.PAUSED])}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,s=n;r<s.length;r++)if(t===s[r])throw"Cannot transition from "+this.state+" to "+t},e}(),qb=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Ct.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Ct.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ct.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Ct.PAUSED},e}(),Qb=function(){function e(){}return e.create=function(){return new qb(new $b)},e}(),Kb=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(r[l]=s[l])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ln=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kb(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(tr),Jb=function(){function e(t,n){this.logger=n,this.fps=Ln.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=!0===t.disableFlip,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Ln.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Sm.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!wr(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),Pm=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id="+t+" not found";var s;this.elementId=t,this.verbose=!1,"boolean"==typeof n?this.verbose=!0===n:n&&(this.verbose=!0===(s=n).verbose),this.logger=new _m(this.verbose),this.qrcode=new kb(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.shouldScan=!0,this.stateManagerProxy=Qb.create()}return e.prototype.start=function(t,n,r,s){var f,l=this;if(!t)throw"cameraIdOrConfig is required";if(!r||"function"!=typeof r)throw"qrCodeSuccessCallback is required and should be a function.";f=s||(this.verbose?this.logger.log:function(){});var g=Jb.create(n,this.logger);this.clearElement();var w=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=w,E=document.getElementById(this.elementId);E.style.position="relative",this.shouldScan=!0,this.element=E;var S=this,v=this.stateManagerProxy.startTransition(Ct.SCANNING);return new Promise(function(O,F){var k=m?g.videoConstraints:S.createVideoConstraints(t);if(!k)return v.cancel(),void F("videoConstraints should be defined");var z={};(!m||g.aspectRatio)&&(z.aspectRatio=g.aspectRatio);var q={onRenderSurfaceReady:function(U,ie){S.setupUi(U,ie,g),S.isScanning=!0,S.foreverScan(g,r,f)}};Wb.failIfNotSupported().then(function(U){U.create(k).then(function(ie){return ie.render(l.element,z,q).then(function(_e){S.renderedCamera=_e,v.execute(),O(null)}).catch(function(_e){v.cancel(),F(_e)})}).catch(function(ie){v.cancel(),F(Ns.errorGettingUserMedia(ie))})}).catch(function(U){v.cancel(),F(Ns.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ct.PAUSED),this.showPausedState(),(wr(t)||!0!==t)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(Ct.SCANNING),t.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){n()}):n()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Ct.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),function(){if(t.element){var l=document.getElementById(Ln.SHADED_REGION_ELEMENT_ID);l&&t.element.removeChild(l)}}(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),n.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!(t&&t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(wr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,l){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var f=new Image;f.onload=function(){var g=f.width,w=f.height,m=document.getElementById(r.elementId),E=m.clientWidth?m.clientWidth:Ln.DEFAULT_WIDTH,A=Math.max(m.clientHeight?m.clientHeight:w,Ln.FILE_SCAN_MIN_HEIGHT),S=r.computeCanvasDrawConfig(g,w,E,A);if(n){var v=r.createCanvasElement(E,A,"qr-canvas-visible");v.style.display="inline-block",m.appendChild(v);var O=v.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=E,O.canvas.height=A,O.drawImage(f,0,0,g,w,S.x,S.y,S.width,S.height)}var F=Ln.FILE_SCAN_HIDDEN_CANVAS_PADDING,k=Math.max(f.width,S.width),z=Math.max(f.height,S.height),q=k+2*F,U=z+2*F,ie=r.createCanvasElement(q,U);m.appendChild(ie);var _e=ie.getContext("2d");if(!_e)throw"Unable to get 2d context from canvas";_e.canvas.width=q,_e.canvas.height=U,_e.drawImage(f,0,0,g,w,F,F,k,z);try{r.qrcode.decodeRobustlyAsync(ie).then(function(st){s(Am.createFromQrcodeResult(st))}).catch(l)}catch(st){l("QR code parse error, error = "+st)}},f.onerror=l,f.onabort=l,f.onstalled=l,f.onsuspend=l,f.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Zb.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(!t)throw"videoConstaints is required argument.";if(!Sm.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){if(!t||"boolean"==typeof t||!t.formatsToSupport)return[ne.QR_CODE,ne.AZTEC,ne.CODABAR,ne.CODE_39,ne.CODE_93,ne.CODE_128,ne.DATA_MATRIX,ne.MAXICODE,ne.ITF,ne.EAN_13,ne.EAN_8,ne.PDF_417,ne.RSS_14,ne.RSS_EXPANDED,ne.UPC_A,ne.UPC_E,ne.UPC_EAN_EXTENSION];if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===t.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],s=0,l=t.formatsToSupport;s<l.length;s++){var f=l[s];Lb(f)?r.push(f):this.logger.warn("Invalid format: "+f+" passed in config, ignoring.")}if(0===r.length)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(wr(t))return!0;if(!wr(t.useBarCodeDetectorIfSupported))return!1!==t.useBarCodeDetectorIfSupported;if(wr(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return!!wr(n.useBarCodeDetectorIfSupported)||!1!==n.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(t,n,r){var l=r.qrbox;this.validateQrboxConfig(l);var m,f=this.toQrdimensions(t,n,l),g=function(m){if(m<Ln.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is "+Ln.MIN_QR_BOX_SIZE+"px."};g(f.width),g(f.height),f.width=((m=f.width)>t&&(this.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=t),m)},e.prototype.validateQrboxConfig=function(t){if("number"!=typeof t&&"function"!=typeof t&&(void 0===t.width||void 0===t.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if("number"==typeof r)return{width:r,height:r};if("function"==typeof r)try{return r(t,n)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var s=wr(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(s);var l=this.toQrdimensions(t,n,s);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=r.isShadedBoxEnabled()&&l.height<=n,g={x:0,y:0,width:t,height:n},w=f?this.getShadedRegionBounds(t,n,l):g,m=this.createCanvasElement(w.width,w.height),A=m.getContext("2d",{willReadFrequently:!0});A.canvas.width=w.width,A.canvas.height=w.height,this.element.append(m),f&&this.possiblyInsertShadingElement(this.element,t,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=A,this.canvasElement=m},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText="Scanner paused",n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="yellow",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return t(s.text,Am.createFromQrcodeResult(s)),r.possiblyUpdateShaders(!0),!0}).catch(function(s){r.possiblyUpdateShaders(!1);var l=Ns.codeParseError(s);return n(l,Im.createFrom(l)),!1})},e.prototype.foreverScan=function(t,n,r){var s=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),f=l.videoWidth/l.clientWidth,g=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";this.context.drawImage(l,this.qrRegion.x*f,this.qrRegion.y*g,this.qrRegion.width*f,this.qrRegion.height*g,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(t,n,r)},s.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(v){v||!0===t.disableFlip?S():(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(n,r).finally(function(){S()}))}).catch(function(v){s.logger.logError("Error happend while scanning context",v),S()})}},e.prototype.createVideoConstraints=function(t){if("string"==typeof t)return{deviceId:{exact:t}};if("object"==typeof t){var n="facingMode",r="deviceId",s={user:!0,environment:!0},l="exact",f=function(O){if(O in s)return!0;throw"config has invalid 'facingMode' value = '"+O+"'"},g=Object.keys(t);if(1!==g.length)throw"'cameraIdOrConfig' object should have exactly 1 key, if passed as an object, found "+g.length+" keys";var w=Object.keys(t)[0];if(w!==n&&w!==r)throw"Only '"+n+"' and '"+r+"'  are supported for 'cameraIdOrConfig'";if(w!==n){var A=t.deviceId;if("string"==typeof A)return{deviceId:A};if("object"==typeof A){if(l in A)return{deviceId:{exact:A.exact}};throw"'deviceId' should be string or object with exact as key."}throw"Invalid type of 'deviceId' = "+typeof A}var m=t.facingMode;if("string"==typeof m){if(f(m))return{facingMode:m}}else{if("object"!=typeof m)throw"Invalid type of 'facingMode' = "+typeof m;if(!(l in m))throw"'facingMode' should be string or object with exact as key.";if(f(m.exact))return{facingMode:{exact:m.exact}}}}throw"Invalid type of 'cameraIdOrConfig' = "+typeof t},e.prototype.computeCanvasDrawConfig=function(t,n,r,s){if(t<=r&&n<=s)return{x:(r-t)/2,y:(s-n)/2,width:t,height:n};var g=t,w=n;return t>r&&(n*=r/t,t=r),n>s&&(t*=s/n,n=s),this.logger.log("Image downsampled from "+g+"X"+w+" to "+t+"X"+n+"."),this.computeCanvasDrawConfig(t,n,r,s)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Ln.BORDER_SHADER_MATCH_COLOR:Ln.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var s=t,l=n,f=document.createElement("canvas");return f.style.width=s+"px",f.style.height=l+"px",f.style.display="none",f.id=wr(r)?"qr-canvas":r,f},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,s){if(!(n-s.width<1||r-s.height<1)){var l=document.createElement("div");l.style.position="absolute";var f=(n-s.width)/2,g=(r-s.height)/2;if(l.style.borderLeft=f+"px solid rgba(0, 0, 0, 0.48)",l.style.borderRight=f+"px solid rgba(0, 0, 0, 0.48)",l.style.borderTop=g+"px solid rgba(0, 0, 0, 0.48)",l.style.borderBottom=g+"px solid rgba(0, 0, 0, 0.48)",l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id=""+Ln.SHADED_REGION_ELEMENT_ID,n-s.width<11||r-s.height<11)this.hasBorderShaders=!1;else{this.insertShaderBorders(l,40,5,-5,null,0,!0),this.insertShaderBorders(l,40,5,-5,null,0,!1),this.insertShaderBorders(l,40,5,null,-5,0,!0),this.insertShaderBorders(l,40,5,null,-5,0,!1),this.insertShaderBorders(l,5,45,-5,null,-5,!0),this.insertShaderBorders(l,5,45,null,-5,-5,!0),this.insertShaderBorders(l,5,45,-5,null,-5,!1),this.insertShaderBorders(l,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}t.append(l)}},e.prototype.insertShaderBorders=function(t,n,r,s,l,f,g){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=Ln.BORDER_SHADER_DEFAULT_COLOR,w.style.width=n+"px",w.style.height=r+"px",null!==s&&(w.style.top=s+"px"),null!==l&&(w.style.bottom=l+"px"),g?w.style.left=f+"px":w.style.right=f+"px",this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),t.appendChild(w)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),Fm="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Bm=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),rS=function(){function e(){this.data=Bm.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Bm.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),iS=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=bm.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),s=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(s);var l=document.createElement("a");l.innerText=bm.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),oS=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Fm,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Fm,this.infoIcon.style.opacity="0.6")},e}(),sS=function(){function e(){var t=this;this.infoDiv=new iS,this.infoIcon=new oS(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),km=function(){function e(){}return e.hasPermissions=function(){return function(e,t,n,r){return new(n||(n=Promise))(function(l,f){function g(E){try{m(r.next(E))}catch(A){f(A)}}function w(E){try{m(r.throw(E))}catch(A){f(A)}}function m(E){E.done?l(E.value):function s(l){return l instanceof n?l:new n(function(f){f(l)})}(E.value).then(g,w)}m((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var t,n,r,s;return function(e,t){var r,s,l,f,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return f={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(E){return function w(m){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(l=2&m[0]?s.return:m[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,m[1])).done)return l;switch(s=0,l&&(m=[2&m[0],l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(l=(l=n.trys).length>0&&l[l.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(6===m[0]&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],s=0}finally{r=l=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}}(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=l.sent(),n=0,r=t;n<r.length;n++)if("videoinput"===(s=r[n]).kind&&s.label)return[2,!0];return[2,!1]}})})},e}(),ai=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++)if(e.isCameraScanType(n[t]))return!0;return!1},e.isCameraScanType=function(t){return t===jr.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===jr.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||0===t.length)return tr.DEFAULT_SUPPORTED_SCAN_TYPE;var n=tr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max "+n+" values expected for supportedScanTypes";for(var r=0,s=t;r<s.length;r++){var l=s[r];if(!tr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type "+l}return t},e}(),Pn=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),Hr=function(){function e(){}return e.createElement=function(t,n){var r=document.createElement(t);return r.id=n,r.classList.add(Pn.ALL_ELEMENT_CLASS),"button"===t&&r.setAttribute("type","button"),r},e}(),Vm=function(e,t,n,r){return new(n||(n=Promise))(function(l,f){function g(E){try{m(r.next(E))}catch(A){f(A)}}function w(E){try{m(r.throw(E))}catch(A){f(A)}}function m(E){E.done?l(E.value):function s(l){return l instanceof n?l:new n(function(f){f(l)})}(E.value).then(g,w)}m((r=r.apply(e,t||[])).next())})},Um=function(e,t){var r,s,l,f,n={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return f={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function g(m){return function(E){return function w(m){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(l=2&m[0]?s.return:m[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,m[1])).done)return l;switch(s=0,l&&(m=[2&m[0],l.value]),m[0]){case 0:case 1:l=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(!(l=(l=n.trys).length>0&&l[l.length-1])&&(6===m[0]||2===m[0])){n=0;continue}if(3===m[0]&&(!l||m[1]>l[0]&&m[1]<l[3])){n.label=m[1];break}if(6===m[0]&&n.label<l[1]){n.label=l[1],l=m;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(m);break}l[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(E){m=[6,E],s=0}finally{r=l=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,E])}}},jm=function(){function e(t,n,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return Vm(this,void 0,void 0,function(){var t,n;return Um(this,function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=r.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?at.torchOffButton():at.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var r=t?at.torchOnFailedMessage():at.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),cS=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=Hr.createElement("button",Pn.TORCH_BUTTON_ID),this.torchController=new jm(t,this,n)}return e.prototype.render=function(t,n){var r=this;this.torchButton.innerText=at.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var s=this;this.torchButton.addEventListener("click",function(l){return Vm(r,void 0,void 0,function(){return Um(this,function(f){switch(f.label){case 0:return[4,s.torchController.flipState()];case 1:return f.sent(),s.torchController.isTorchEnabled()?(s.torchButton.classList.remove(Pn.TORCH_BUTTON_CLASS_TORCH_OFF),s.torchButton.classList.add(Pn.TORCH_BUTTON_CLASS_TORCH_ON)):(s.torchButton.classList.remove(Pn.TORCH_BUTTON_CLASS_TORCH_ON),s.torchButton.classList.add(Pn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new jm(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=at.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,s){var l=new e(n,s);return l.render(t,r),l},e}(),uS=function(){function e(t,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var s=document.createElement("label");s.setAttribute("for",this.getFileScanInputId()),s.style.display="inline-block",this.fileBasedScanRegion.appendChild(s),this.fileSelectionButton=Hr.createElement("button",Pn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(g){s.click()}),s.append(this.fileSelectionButton),this.fileScanInput=Hr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",s.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(g){if(null!=g&&null!=g.target){var w=g.target;if(!w.files||0!==w.files.length){var E=w.files[0];l.setImageNameToButton(E.name),r(E)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(g){g.stopPropagation(),g.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var w=g.dataTransfer;if(w){var m=w.files;if(!m||0===m.length)return;for(var E=!1,A=0;A<m.length;++A){var S=m.item(A);if(S&&S.type.match(/image.*/)){E=!0,l.setImageNameToButton(S.name),r(S),f.innerText=at.dragAndDropMessage();break}}E||(f.innerText=at.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=at.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){if(t.length>20){var r=t.substring(0,8),s=t.length,l=t.substring(s-8,s);t=r+"...."+l}var f=at.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=f},e.prototype.setInitialValueToButton=function(){var t=at.fileSelectionChooseImage()+" - "+at.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),dS=function(){function e(t){this.selectElement=Hr.createElement("select",Pn.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(0===r)throw new Error("No cameras found");if(1===r)n.style.display="none";else{var s=at.selectCamera();n.innerText=s+" ("+this.cameras.length+")  "}for(var l=1,f=0,g=this.cameras;f<g.length;f++){var w=g[f],m=w.id,E=w.label??m;(!E||""===E)&&(E=[at.anonymousCameraPrefix(),l++].join(" "));var A=document.createElement("option");A.value=m,A.innerText=E,this.options.push(A),this.selectElement.appendChild(A)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,r=this.options;n<r.length;n++)if(r[n].value===t)return!0;return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error(t+" is not present in the camera list.");this.selectElement.value=t},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),fS=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Hr.createElement("input",Pn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=at.zoom();this.rangeText.innerText=this.rangeInput.value+"x "+r,this.rangeText.style.marginRight="10px";var s=this;this.rangeInput.addEventListener("input",function(){return s.onValueChange()}),this.rangeInput.addEventListener("change",function(){return s.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=at.zoom();this.rangeText.innerText=this.rangeInput.value+"x "+t,this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,r,s){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=s.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}(),In=(()=>(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(In||(In={})),In))(),pS=function(){function e(t,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=!0===r,!document.getElementById(t))throw"HTML Element with id="+t+" not found";this.scanTypeSelector=new ai(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new _m(this.verbose),this.persistedDataManager=new rS,!0!==n.rememberLastUsedCamera&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(l,f){if(t)t(l,f);else{if(r.lastMatchFound===l)return;r.lastMatchFound=l,r.setHeaderMessage(at.lastMatch(l),In.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(l,f){n&&n(l,f)};var s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id="+this.elementId+" not found";s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new Pm(this.getScanRegionId(),function gS(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}(this.config,this.verbose))},e.prototype.pause=function(t){(wr(t)||!0!==t)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var r=document.getElementById(t.elementId);r&&(r.innerHTML="",t.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,s){t.html5Qrcode?t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(l){t.html5Qrcode?(t.html5Qrcode.clear(),n(),r()):r()}).catch(function(l){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",l),s(l)}):(t.html5Qrcode.clear(),n()):r()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=tr.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!tr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=tr.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=tr.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:tr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:tr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:tr.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),ai.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var s=document.createElement("div"),l=this.getDashboardId();s.id=l,s.style.width="100%",t.appendChild(s),this.setupInitialDashboard(s)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n),(new sS).renderInto(n);var s=document.createElement("div");s.id=this.getHeaderMessageContainerId(),s.style.display="none",s.style.textAlign="center",s.style.fontSize="14px",s.style.padding="2px 10px",s.style.margin="4px",s.style.borderTop="1px solid #f6f6f6",n.appendChild(s)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,r){var s=this;s.showHideScanTypeSwapLink(!1),s.setHeaderMessage(at.cameraPermissionRequesting());var l=function(){r||s.createPermissionButton(t,n)};Pm.getCameras().then(function(f){s.persistedDataManager.setHasPermission(!0),s.showHideScanTypeSwapLink(!0),s.resetHeaderMessage(),f&&f.length>0?(t.removeChild(n),s.renderCameraSelection(f)):(s.setHeaderMessage(at.noCameraFound(),In.STATUS_WARNING),l())}).catch(function(f){s.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:l(),s.setHeaderMessage(f,In.STATUS_WARNING),s.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var r=this,s=Hr.createElement("button",this.getCameraPermissionButtonId());s.innerText=at.cameraPermissionTitle(),s.addEventListener("click",function(){s.disabled=!0,r.createCameraListUi(t,n,s)}),n.appendChild(s)},e.prototype.createPermissionsUi=function(t,n){var r=this;ai.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?km.hasPermissions().then(function(s){s?r.createCameraListUi(t,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n))}).catch(function(s){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n)}):this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var n=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");n.appendChild(r);var s=document.createElement("div");s.id=this.getDashboardSectionCameraScanRegionId(),s.style.display=ai.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(s);var l=document.createElement("div");l.style.textAlign="center",s.appendChild(l),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(s,l),this.renderFileScanUi(r)},e.prototype.renderFileScanUi=function(t){var n=ai.isFileScanType(this.currentScanType),r=this;this.fileSelectionUi=uS.create(t,n,function(l){if(!r.html5Qrcode)throw"html5Qrcode not defined";!ai.isFileScanType(r.currentScanType)||(r.setHeaderMessage(at.loadingImage()),r.html5Qrcode.scanFileV2(l,!0).then(function(f){r.resetHeaderMessage(),r.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){r.setHeaderMessage(f,In.STATUS_WARNING),r.qrCodeErrorCallback(f,Im.createFrom(f))}))})},e.prototype.renderCameraSelection=function(t){var n=this,r=this,s=document.getElementById(this.getDashboardSectionCameraScanRegionId());s.style.textAlign="center";var l=fS.create(s,!1),g=dS.create(s,t),w=document.createElement("span"),m=Hr.createElement("button",Pn.CAMERA_START_BUTTON_ID);m.innerText=at.scanButtonStartScanningText(),w.appendChild(m);var A,E=Hr.createElement("button",Pn.CAMERA_STOP_BUTTON_ID);E.innerText=at.scanButtonStopScanningText(),E.style.display="none",E.disabled=!0,w.appendChild(E),s.appendChild(w);var v=function(F){F||(m.style.display="none"),m.innerText=at.scanButtonStartScanningText(),m.style.opacity="1",m.disabled=!1,F&&(m.style.display="inline-block")};if(m.addEventListener("click",function(F){m.innerText=at.scanButtonScanningStarting(),g.disable(),m.disabled=!0,m.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var k=g.getValue();r.persistedDataManager.setLastUsedCameraId(k),r.html5Qrcode.start(k,function hS(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(z){E.disabled=!1,E.style.display="inline-block",v(!1);var q=r.html5Qrcode.getRunningTrackCameraCapabilities();!0===n.config.showTorchButtonIfSupported&&function(F){F.torchFeature().isSupported()?(A?A.updateTorchCapability(F.torchFeature()):A=cS.create(w,F.torchFeature(),{display:"none",marginLeft:"5px"},function(k){r.setHeaderMessage(k,In.STATUS_WARNING)}),A.show()):A&&A.hide()}(q),!0===n.config.showZoomSliderIfSupported&&function(F){var k=F.zoomFeature();if(k.isSupported()){l.setOnCameraZoomValueChangeCallback(function(q){k.apply(q)});var z=1;n.config.defaultZoomValueIfSupported&&(z=n.config.defaultZoomValueIfSupported),z=function Pb(e,t,n){return e>n?n:e<t?t:e}(z,k.min(),k.max()),l.setValues(k.min(),k.max(),z,k.step()),l.show()}}(q)}).catch(function(z){r.showHideScanTypeSwapLink(!0),g.enable(),v(!0),r.setHeaderMessage(z,In.STATUS_WARNING)})}),g.hasSingleItem()&&m.click(),E.addEventListener("click",function(F){if(!r.html5Qrcode)throw"html5Qrcode not defined";E.disabled=!0,r.html5Qrcode.stop().then(function(k){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),g.enable(),m.disabled=!1,E.style.display="none",m.style.display="inline-block",A&&(A.reset(),A.hide()),l.removeOnCameraZoomValueChangeCallback(),l.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(k){E.disabled=!1,r.setHeaderMessage(k,In.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var O=r.persistedDataManager.getLastUsedCameraId();g.hasValue(O)?(g.setValue(O),m.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=at.textIfCameraScanSelected(),r=at.textIfFileScanSelected(),s=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");l.style.textAlign="center";var f=Hr.createElement("a",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.innerText=ai.isCameraScanType(this.currentScanType)?n:r,f.addEventListener("click",function(){t.sectionSwapAllowed?(t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,ai.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),f.innerText=r,t.currentScanType=jr.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),f.innerText=n,t.currentScanType=jr.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0):t.verbose&&t.logger.logError("Section swap called when not allowed")}),l.appendChild(f),s.appendChild(l)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;this.persistedDataManager.hasCameraPermissions()&&km.hasPermissions().then(function(r){if(r){var s=document.getElementById(n.getCameraPermissionButtonId());if(!s)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";s.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=In.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",n){case In.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case In.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(t){!0!==t&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none"},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return n.innerHTML="<br>",void n.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg=="},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return n.innerHTML="<br>",void n.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4="},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return this.elementId+"__dashboard_section"},e.prototype.getDashboardSectionCameraScanRegionId=function(){return this.elementId+"__dashboard_section_csr"},e.prototype.getDashboardSectionSwapLinkId=function(){return Pn.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return this.elementId+"__scan_region"},e.prototype.getDashboardId=function(){return this.elementId+"__dashboard"},e.prototype.getHeaderMessageContainerId=function(){return this.elementId+"__header_message"},e.prototype.getCameraPermissionButtonId=function(){return Pn.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();let mS=(()=>{class e{constructor(){this.fps=100}ngOnInit(){let n="";new pS("reader",{fps:this.fps},!0).render((f,g)=>{alert(f),n!==f&&(n=f)},()=>{})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Je({type:e,selectors:[["app-root"]],decls:1,vars:0,consts:[["id","reader"]],template:function(n,r){1&n&&_u(0,"div",0)}}),e})(),wS=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=mi({type:e,bootstrap:[mS]}),e.\u0275inj=Ir({imports:[Ib]}),e})();(function ZA(){Sp=!1})(),Ab().bootstrapModule(wS).catch(e=>console.error(e))},140:function(Os,Rs){!function(G){"use strict";function nt(x){return null==x}var Ls=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,i){x.__proto__=i}||function(x,i){for(var o in i)i.hasOwnProperty(o)&&(x[o]=i[o])};var Ps=function(x){function i(o){var a=this.constructor,c=x.call(this,o)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),function bo(x,i){var o=Object.setPrototypeOf;o?o(x,i):x.__proto__=i}(c,a.prototype),function Fn(x,i){void 0===i&&(i=x.constructor);var o=Error.captureStackTrace;o&&o(x,i)}(c),c}return function _o(x,i){function o(){this.constructor=x}Ls(x,i),x.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}(i,x),i}(Error);let zt=(()=>{class x extends Ps{constructor(o){super(o),this.message=o}getKind(){return this.constructor.kind}}return x.kind="Exception",x})(),ln=(()=>{class x extends zt{}return x.kind="ArgumentException",x})(),te=(()=>{class x extends zt{}return x.kind="IllegalArgumentException",x})();class Hn{constructor(i){if(this.binarizer=i,null===i)throw new te("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,o){return this.binarizer.getBlackRow(i,o)}getBlackMatrix(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,o,a,c){const u=this.binarizer.getLuminanceSource().crop(i,o,a,c);return new Hn(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new Hn(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new Hn(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let It=(()=>{class x extends zt{static getChecksumInstance(){return new x}}return x.kind="ChecksumException",x})();class So{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class qe{static arraycopy(i,o,a,c,u){for(;u--;)a[c++]=i[o++]}static currentTimeMillis(){return Date.now()}}let To=(()=>{class x extends zt{}return x.kind="IndexOutOfBoundsException",x})(),Fs=(()=>{class x extends To{constructor(o,a){super(a),this.index=o,this.message=a}}return x.kind="ArrayIndexOutOfBoundsException",x})();class Et{static fill(i,o){for(let a=0,c=i.length;a<c;a++)i[a]=o}static fillWithin(i,o,a,c){Et.rangeCheck(i.length,o,a);for(let u=o;u<a;u++)i[u]=c}static rangeCheck(i,o,a){if(o>a)throw new te("fromIndex("+o+") > toIndex("+a+")");if(o<0)throw new Fs(o);if(a>i)throw new Fs(a)}static asList(...i){return i}static create(i,o,a){return Array.from({length:i}).map(u=>Array.from({length:o}).fill(a))}static createInt32Array(i,o,a){return Array.from({length:i}).map(u=>Int32Array.from({length:o}).fill(a))}static equals(i,o){if(!(i&&o&&i.length&&o.length&&i.length===o.length))return!1;for(let a=0,c=i.length;a<c;a++)if(i[a]!==o[a])return!1;return!0}static hashCode(i){if(null===i)return 0;let o=1;for(const a of i)o=31*o+a;return o}static fillUint8Array(i,o){for(let a=0;a!==i.length;a++)i[a]=o}static copyOf(i,o){return i.slice(0,o)}static copyOfUint8Array(i,o){if(i.length<=o){const a=new Uint8Array(o);return a.set(i),a}return i.slice(0,o)}static copyOfRange(i,o,a){const c=a-o,u=new Int32Array(c);return qe.arraycopy(i,o,u,0,c),u}static binarySearch(i,o,a){void 0===a&&(a=Et.numberComparator);let c=0,u=i.length-1;for(;c<=u;){const d=u+c>>1,h=a(o,i[d]);if(h>0)c=d+1;else{if(!(h<0))return d;u=d-1}}return-c-1}static numberComparator(i,o){return i-o}}class Ce{static numberOfTrailingZeros(i){let o;if(0===i)return 32;let a=31;return o=i<<16,0!==o&&(a-=16,i=o),o=i<<8,0!==o&&(a-=8,i=o),o=i<<4,0!==o&&(a-=4,i=o),o=i<<2,0!==o&&(a-=2,i=o),a-(i<<1>>>31)}static numberOfLeadingZeros(i){if(0===i)return 32;let o=1;return i>>>16==0&&(o+=16,i<<=16),i>>>24==0&&(o+=8,i<<=8),i>>>28==0&&(o+=4,i<<=4),i>>>30==0&&(o+=2,i<<=2),o-=i>>>31,o}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=(i=(858993459&(i-=i>>>1&1431655765))+(i>>>2&858993459))+(i>>>4)&252645135,63&(i+=i>>>8)+(i>>>16)}static truncDivision(i,o){return Math.trunc(i/o)}static parseInt(i,o){return parseInt(i,o)}}Ce.MIN_VALUE_32_BITS=-2147483648,Ce.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Qe{constructor(i,o){void 0===i?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,this.bits=o??Qe.makeArray(i))}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>32*this.bits.length){const o=Qe.makeArray(i);qe.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(i){return 0!=(this.bits[Math.floor(i/32)]&1<<(31&i))}set(i){this.bits[Math.floor(i/32)]|=1<<(31&i)}flip(i){this.bits[Math.floor(i/32)]^=1<<(31&i)}getNextSet(i){const o=this.size;if(i>=o)return o;const a=this.bits;let c=Math.floor(i/32),u=a[c];u&=~((1<<(31&i))-1);const d=a.length;for(;0===u;){if(++c===d)return o;u=a[c]}const h=32*c+Ce.numberOfTrailingZeros(u);return h>o?o:h}getNextUnset(i){const o=this.size;if(i>=o)return o;const a=this.bits;let c=Math.floor(i/32),u=~a[c];u&=~((1<<(31&i))-1);const d=a.length;for(;0===u;){if(++c===d)return o;u=~a[c]}const h=32*c+Ce.numberOfTrailingZeros(u);return h>o?o:h}setBulk(i,o){this.bits[Math.floor(i/32)]=o}setRange(i,o){if(o<i||i<0||o>this.size)throw new te;if(o===i)return;o--;const a=Math.floor(i/32),c=Math.floor(o/32),u=this.bits;for(let d=a;d<=c;d++)u[d]|=(2<<(d<c?31:31&o))-(1<<(d>a?0:31&i))}clear(){const i=this.bits.length,o=this.bits;for(let a=0;a<i;a++)o[a]=0}isRange(i,o,a){if(o<i||i<0||o>this.size)throw new te;if(o===i)return!0;o--;const c=Math.floor(i/32),u=Math.floor(o/32),d=this.bits;for(let h=c;h<=u;h++){const C=(2<<(h<u?31:31&o))-(1<<(h>c?0:31&i))&4294967295;if((d[h]&C)!==(a?C:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(i,o){if(o<0||o>32)throw new te("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let a=o;a>0;a--)this.appendBit(1==(i>>a-1&1))}appendBitArray(i){const o=i.size;this.ensureCapacity(this.size+o);for(let a=0;a<o;a++)this.appendBit(i.get(a))}xor(i){if(this.size!==i.size)throw new te("Sizes don't match");const o=this.bits;for(let a=0,c=o.length;a<c;a++)o[a]^=i.bits[a]}toBytes(i,o,a,c){for(let u=0;u<c;u++){let d=0;for(let h=0;h<8;h++)this.get(i)&&(d|=1<<7-h),i++;o[a+u]=d}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),a=o+1,c=this.bits;for(let u=0;u<a;u++){let d=c[u];d=d>>1&1431655765|(1431655765&d)<<1,d=d>>2&858993459|(858993459&d)<<2,d=d>>4&252645135|(252645135&d)<<4,d=d>>8&16711935|(16711935&d)<<8,d=d>>16&65535|(65535&d)<<16,i[o-u]=d}if(this.size!==32*a){const u=32*a-this.size;let d=i[0]>>>u;for(let h=1;h<a;h++){const p=i[h];d|=p<<32-u,i[h-1]=d,d=p>>>u}i[a-1]=d}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){return i instanceof Qe&&this.size===i.size&&Et.equals(this.bits,i.bits)}hashCode(){return 31*this.size+Et.hashCode(this.bits)}toString(){let i="";for(let o=0,a=this.size;o<a;o++)0==(7&o)&&(i+=" "),i+=this.get(o)?"X":".";return i}clone(){return new Qe(this.size,this.bits.slice())}}var Mi=(()=>{return(x=Mi||(Mi={}))[x.OTHER=0]="OTHER",x[x.PURE_BARCODE=1]="PURE_BARCODE",x[x.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",x[x.TRY_HARDER=3]="TRY_HARDER",x[x.CHARACTER_SET=4]="CHARACTER_SET",x[x.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",x[x.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",x[x.ASSUME_GS1=7]="ASSUME_GS1",x[x.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",x[x.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",x[x.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",Mi;var x})(),rt=Mi;let $=(()=>{class x extends zt{static getFormatInstance(){return new x}}return x.kind="FormatException",x})();var Be=(()=>{return(x=Be||(Be={}))[x.Cp437=0]="Cp437",x[x.ISO8859_1=1]="ISO8859_1",x[x.ISO8859_2=2]="ISO8859_2",x[x.ISO8859_3=3]="ISO8859_3",x[x.ISO8859_4=4]="ISO8859_4",x[x.ISO8859_5=5]="ISO8859_5",x[x.ISO8859_6=6]="ISO8859_6",x[x.ISO8859_7=7]="ISO8859_7",x[x.ISO8859_8=8]="ISO8859_8",x[x.ISO8859_9=9]="ISO8859_9",x[x.ISO8859_10=10]="ISO8859_10",x[x.ISO8859_11=11]="ISO8859_11",x[x.ISO8859_13=12]="ISO8859_13",x[x.ISO8859_14=13]="ISO8859_14",x[x.ISO8859_15=14]="ISO8859_15",x[x.ISO8859_16=15]="ISO8859_16",x[x.SJIS=16]="SJIS",x[x.Cp1250=17]="Cp1250",x[x.Cp1251=18]="Cp1251",x[x.Cp1252=19]="Cp1252",x[x.Cp1256=20]="Cp1256",x[x.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",x[x.UTF8=22]="UTF8",x[x.ASCII=23]="ASCII",x[x.Big5=24]="Big5",x[x.GB18030=25]="GB18030",x[x.EUC_KR=26]="EUC_KR",Be;var x})();class Y{constructor(i,o,a,...c){this.valueIdentifier=i,this.name=a,this.values="number"==typeof o?Int32Array.from([o]):o,this.otherEncodingNames=c,Y.VALUE_IDENTIFIER_TO_ECI.set(i,this),Y.NAME_TO_ECI.set(a,this);const u=this.values;for(let d=0,h=u.length;d!==h;d++)Y.VALUES_TO_ECI.set(u[d],this);for(const d of c)Y.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new $("incorect value");const o=Y.VALUES_TO_ECI.get(i);if(void 0===o)throw new $("incorect value");return o}static getCharacterSetECIByName(i){const o=Y.NAME_TO_ECI.get(i);if(void 0===o)throw new $("incorect value");return o}equals(i){if(!(i instanceof Y))return!1;const o=i;return this.getName()===o.getName()}}Y.VALUE_IDENTIFIER_TO_ECI=new Map,Y.VALUES_TO_ECI=new Map,Y.NAME_TO_ECI=new Map,Y.Cp437=new Y(Be.Cp437,Int32Array.from([0,2]),"Cp437"),Y.ISO8859_1=new Y(Be.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Y.ISO8859_2=new Y(Be.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Y.ISO8859_3=new Y(Be.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Y.ISO8859_4=new Y(Be.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Y.ISO8859_5=new Y(Be.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Y.ISO8859_6=new Y(Be.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Y.ISO8859_7=new Y(Be.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Y.ISO8859_8=new Y(Be.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Y.ISO8859_9=new Y(Be.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Y.ISO8859_10=new Y(Be.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Y.ISO8859_11=new Y(Be.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Y.ISO8859_13=new Y(Be.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Y.ISO8859_14=new Y(Be.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Y.ISO8859_15=new Y(Be.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Y.ISO8859_16=new Y(Be.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Y.SJIS=new Y(Be.SJIS,20,"SJIS","Shift_JIS"),Y.Cp1250=new Y(Be.Cp1250,21,"Cp1250","windows-1250"),Y.Cp1251=new Y(Be.Cp1251,22,"Cp1251","windows-1251"),Y.Cp1252=new Y(Be.Cp1252,23,"Cp1252","windows-1252"),Y.Cp1256=new Y(Be.Cp1256,24,"Cp1256","windows-1256"),Y.UnicodeBigUnmarked=new Y(Be.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Y.UTF8=new Y(Be.UTF8,26,"UTF8","UTF-8"),Y.ASCII=new Y(Be.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Y.Big5=new Y(Be.Big5,28,"Big5"),Y.GB18030=new Y(Be.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Y.EUC_KR=new Y(Be.EUC_KR,30,"EUC_KR","EUC-KR");let zn=(()=>{class x extends zt{}return x.kind="UnsupportedOperationException",x})();class Ft{static decode(i,o){const a=this.encodingName(o);return this.customDecoder?this.customDecoder(i,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(i,a):new TextDecoder(a).decode(i)}static shouldDecodeOnFallback(i){return!Ft.isBrowser()&&"ISO-8859-1"===i}static encode(i,o){const a=this.encodingName(o);return this.customEncoder?this.customEncoder(i,a):typeof TextEncoder>"u"?this.encodeFallback(i):(new TextEncoder).encode(i)}static isBrowser(){return typeof window<"u"&&"[object Window]"==={}.toString.call(window)}static encodingName(i){return"string"==typeof i?i:i.getName()}static encodingCharacterSet(i){return i instanceof Y?i:Y.getCharacterSetECIByName(i)}static decodeFallback(i,o){const a=this.encodingCharacterSet(o);if(Ft.isDecodeFallbackSupported(a)){let c="";for(let u=0,d=i.length;u<d;u++){let h=i[u].toString(16);h.length<2&&(h="0"+h),c+="%"+h}return decodeURIComponent(c)}if(a.equals(Y.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new zn(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(Y.UTF8)||i.equals(Y.ISO8859_1)||i.equals(Y.ASCII)}static encodeFallback(i){const a=btoa(unescape(encodeURIComponent(i))).split(""),c=[];for(let u=0;u<a.length;u++)c.push(a[u].charCodeAt(0));return new Uint8Array(c)}}class ye{static castAsNonUtf8Char(i,o=null){const a=o?o.getName():this.ISO88591;return Ft.decode(new Uint8Array([i]),a)}static guessEncoding(i,o){if(null!=o&&void 0!==o.get(rt.CHARACTER_SET))return o.get(rt.CHARACTER_SET).toString();const a=i.length;let c=!0,u=!0,d=!0,h=0,p=0,y=0,C=0,D=0,I=0,b=0,T=0,M=0,N=0,L=0;const W=i.length>3&&239===i[0]&&187===i[1]&&191===i[2];for(let Z=0;Z<a&&(c||u||d);Z++){const B=255&i[Z];d&&(h>0?0==(128&B)?d=!1:h--:0!=(128&B)&&(0==(64&B)?d=!1:(h++,0==(32&B)?p++:(h++,0==(16&B)?y++:(h++,0==(8&B)?C++:d=!1))))),c&&(B>127&&B<160?c=!1:B>159&&(B<192||215===B||247===B)&&L++),u&&(D>0?B<64||127===B||B>252?u=!1:D--:128===B||160===B||B>239?u=!1:B>160&&B<224?(I++,T=0,b++,b>M&&(M=b)):B>127?(D++,b=0,T++,T>N&&(N=T)):(b=0,T=0))}return d&&h>0&&(d=!1),u&&D>0&&(u=!1),d&&(W||p+y+C>0)?ye.UTF8:u&&(ye.ASSUME_SHIFT_JIS||M>=3||N>=3)?ye.SHIFT_JIS:c&&u?2===M&&2===I||10*L>=a?ye.SHIFT_JIS:ye.ISO88591:c?ye.ISO88591:u?ye.SHIFT_JIS:d?ye.UTF8:ye.PLATFORM_DEFAULT_ENCODING}static format(i,...o){let a=-1;return i.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function c(d,h,p,y,C,D){if("%%"===d)return"%";if(void 0===o[++a])return;d=y?parseInt(y.substr(1)):void 0;let b,I=C?parseInt(C.substr(1)):void 0;switch(D){case"s":b=o[a];break;case"c":b=o[a][0];break;case"f":b=parseFloat(o[a]).toFixed(d);break;case"p":b=parseFloat(o[a]).toPrecision(d);break;case"e":b=parseFloat(o[a]).toExponential(d);break;case"x":b=parseInt(o[a]).toString(I||16);break;case"d":b=parseFloat(parseInt(o[a],I||10).toPrecision(d)).toFixed(0)}b="object"==typeof b?JSON.stringify(b):(+b).toString(I);let T=parseInt(p),M=p&&p[0]+""=="0"?"0":" ";for(;b.length<T;)b=void 0!==h?b+M:M+b;return b})}static getBytes(i,o){return Ft.encode(i,o)}static getCharCode(i,o=0){return i.charCodeAt(o)}static getCharAt(i){return String.fromCharCode(i)}}ye.SHIFT_JIS=Y.SJIS.getName(),ye.GB2312="GB2312",ye.ISO88591=Y.ISO8859_1.getName(),ye.EUC_JP="EUC_JP",ye.UTF8=Y.UTF8.getName(),ye.PLATFORM_DEFAULT_ENCODING=ye.UTF8,ye.ASSUME_SHIFT_JIS=!1;class Ge{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return this.value+="string"==typeof i?i.toString():this.encoding?ye.castAsNonUtf8Char(i,this.encoding):String.fromCharCode(i),this}appendChars(i,o,a){for(let c=o;o<o+a;c++)this.append(i[c]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+1)}substring(i,o){return this.value.substring(i,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+o.length)}}class vt{constructor(i,o,a,c){if(this.width=i,this.height=o,this.rowSize=a,this.bits=c,null==o&&(o=i),this.height=o,i<1||o<1)throw new te("Both dimensions must be greater than 0");null==a&&(a=Math.floor((i+31)/32)),this.rowSize=a,null==c&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const o=i.length,a=i[0].length,c=new vt(a,o);for(let u=0;u<o;u++){const d=i[u];for(let h=0;h<a;h++)d[h]&&c.set(h,u)}return c}static parseFromString(i,o,a){if(null===i)throw new te("stringRepresentation cannot be null");const c=new Array(i.length);let u=0,d=0,h=-1,p=0,y=0;for(;y<i.length;)if("\n"===i.charAt(y)||"\r"===i.charAt(y)){if(u>d){if(-1===h)h=u-d;else if(u-d!==h)throw new te("row lengths do not match");d=u,p++}y++}else if(i.substring(y,y+o.length)===o)y+=o.length,c[u]=!0,u++;else{if(i.substring(y,y+a.length)!==a)throw new te("illegal character encountered: "+i.substring(y));y+=a.length,c[u]=!1,u++}if(u>d){if(-1===h)h=u-d;else if(u-d!==h)throw new te("row lengths do not match");p++}const C=new vt(h,p);for(let D=0;D<u;D++)c[D]&&C.set(Math.floor(D%h),Math.floor(D/h));return C}get(i,o){const a=o*this.rowSize+Math.floor(i/32);return 0!=(this.bits[a]>>>(31&i)&1)}set(i,o){const a=o*this.rowSize+Math.floor(i/32);this.bits[a]|=1<<(31&i)&4294967295}unset(i,o){const a=o*this.rowSize+Math.floor(i/32);this.bits[a]&=~(1<<(31&i)&4294967295)}flip(i,o){const a=o*this.rowSize+Math.floor(i/32);this.bits[a]^=1<<(31&i)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new te("input matrix dimensions do not match");const o=new Qe(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let u=0,d=this.height;u<d;u++){const h=u*a,p=i.getRow(u,o).getBitArray();for(let y=0;y<a;y++)c[h+y]^=p[y]}}clear(){const i=this.bits,o=i.length;for(let a=0;a<o;a++)i[a]=0}setRegion(i,o,a,c){if(o<0||i<0)throw new te("Left and top must be nonnegative");if(c<1||a<1)throw new te("Height and width must be at least 1");const u=i+a,d=o+c;if(d>this.height||u>this.width)throw new te("The region must fit inside the matrix");const h=this.rowSize,p=this.bits;for(let y=o;y<d;y++){const C=y*h;for(let D=i;D<u;D++)p[C+Math.floor(D/32)]|=1<<(31&D)&4294967295}}getRow(i,o){null==o||o.getSize()<this.width?o=new Qe(this.width):o.clear();const a=this.rowSize,c=this.bits,u=i*a;for(let d=0;d<a;d++)o.setBulk(32*d,c[u+d]);return o}setRow(i,o){qe.arraycopy(o.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),o=this.getHeight();let a=new Qe(i),c=new Qe(i);for(let u=0,d=Math.floor((o+1)/2);u<d;u++)a=this.getRow(u,a),c=this.getRow(o-1-u,c),a.reverse(),c.reverse(),this.setRow(u,c),this.setRow(o-1-u,a)}getEnclosingRectangle(){const o=this.height,a=this.rowSize,c=this.bits;let u=this.width,d=o,h=-1,p=-1;for(let y=0;y<o;y++)for(let C=0;C<a;C++){const D=c[y*a+C];if(0!==D){if(y<d&&(d=y),y>p&&(p=y),32*C<u){let I=0;for(;0==(D<<31-I&4294967295);)I++;32*C+I<u&&(u=32*C+I)}if(32*C+31>h){let I=31;for(;D>>>I==0;)I--;32*C+I>h&&(h=32*C+I)}}}return h<u||p<d?null:Int32Array.from([u,d,h-u+1,p-d+1])}getTopLeftOnBit(){const i=this.rowSize,o=this.bits;let a=0;for(;a<o.length&&0===o[a];)a++;if(a===o.length)return null;const c=a/i;let u=a%i*32;const d=o[a];let h=0;for(;0==(d<<31-h&4294967295);)h++;return u+=h,Int32Array.from([u,c])}getBottomRightOnBit(){const i=this.rowSize,o=this.bits;let a=o.length-1;for(;a>=0&&0===o[a];)a--;if(a<0)return null;const c=Math.floor(a/i);let u=32*Math.floor(a%i);const d=o[a];let h=31;for(;d>>>h==0;)h--;return u+=h,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){return i instanceof vt&&this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&Et.equals(this.bits,i.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+Et.hashCode(this.bits),i}toString(i="X ",o="  ",a="\n"){return this.buildToString(i,o,a)}buildToString(i,o,a){let c=new Ge;for(let u=0,d=this.height;u<d;u++){for(let h=0,p=this.width;h<p;h++)c.append(this.get(h,u)?i:o);c.append(a)}return c.toString()}clone(){return new vt(this.width,this.height,this.rowSize,this.bits.slice())}}let V=(()=>{class x extends zt{static getNotFoundInstance(){return new x}}return x.kind="NotFoundException",x})();class _t extends So{constructor(i){super(i),this.luminances=_t.EMPTY,this.buckets=new Int32Array(_t.LUMINANCE_BUCKETS)}getBlackRow(i,o){const a=this.getLuminanceSource(),c=a.getWidth();null==o||o.getSize()<c?o=new Qe(c):o.clear(),this.initArrays(c);const u=a.getRow(i,this.luminances),d=this.buckets;for(let p=0;p<c;p++)d[(255&u[p])>>_t.LUMINANCE_SHIFT]++;const h=_t.estimateBlackPoint(d);if(c<3)for(let p=0;p<c;p++)(255&u[p])<h&&o.set(p);else{let p=255&u[0],y=255&u[1];for(let C=1;C<c-1;C++){const D=255&u[C+1];(4*y-p-D)/2<h&&o.set(C),p=y,y=D}}return o}getBlackMatrix(){const i=this.getLuminanceSource(),o=i.getWidth(),a=i.getHeight(),c=new vt(o,a);this.initArrays(o);const u=this.buckets;for(let p=1;p<5;p++){const y=Math.floor(a*p/5),C=i.getRow(y,this.luminances),D=Math.floor(4*o/5);for(let I=Math.floor(o/5);I<D;I++)u[(255&C[I])>>_t.LUMINANCE_SHIFT]++}const d=_t.estimateBlackPoint(u),h=i.getMatrix();for(let p=0;p<a;p++){const y=p*o;for(let C=0;C<o;C++)(255&h[y+C])<d&&c.set(C,p)}return c}createBinarizer(i){return new _t(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const o=this.buckets;for(let a=0;a<_t.LUMINANCE_BUCKETS;a++)o[a]=0}static estimateBlackPoint(i){const o=i.length;let a=0,c=0,u=0;for(let C=0;C<o;C++)i[C]>u&&(c=C,u=i[C]),i[C]>a&&(a=i[C]);let d=0,h=0;for(let C=0;C<o;C++){const D=C-c,I=i[C]*D*D;I>h&&(d=C,h=I)}if(c>d){const C=c;c=d,d=C}if(d-c<=o/16)throw new V;let p=d-1,y=-1;for(let C=d-1;C>c;C--){const D=C-c,I=D*D*(d-C)*(a-i[C]);I>y&&(p=C,y=I)}return p<<_t.LUMINANCE_SHIFT}}_t.LUMINANCE_BITS=5,_t.LUMINANCE_SHIFT=8-_t.LUMINANCE_BITS,_t.LUMINANCE_BUCKETS=1<<_t.LUMINANCE_BITS,_t.EMPTY=Uint8ClampedArray.from([0]);class be extends _t{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const i=this.getLuminanceSource(),o=i.getWidth(),a=i.getHeight();if(o>=be.MINIMUM_DIMENSION&&a>=be.MINIMUM_DIMENSION){const c=i.getMatrix();let u=o>>be.BLOCK_SIZE_POWER;0!=(o&be.BLOCK_SIZE_MASK)&&u++;let d=a>>be.BLOCK_SIZE_POWER;0!=(a&be.BLOCK_SIZE_MASK)&&d++;const h=be.calculateBlackPoints(c,u,d,o,a),p=new vt(o,a);be.calculateThresholdForBlock(c,u,d,o,a,h,p),this.matrix=p}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new be(i)}static calculateThresholdForBlock(i,o,a,c,u,d,h){const p=u-be.BLOCK_SIZE,y=c-be.BLOCK_SIZE;for(let C=0;C<a;C++){let D=C<<be.BLOCK_SIZE_POWER;D>p&&(D=p);const I=be.cap(C,2,a-3);for(let b=0;b<o;b++){let T=b<<be.BLOCK_SIZE_POWER;T>y&&(T=y);const M=be.cap(b,2,o-3);let N=0;for(let W=-2;W<=2;W++){const Z=d[I+W];N+=Z[M-2]+Z[M-1]+Z[M]+Z[M+1]+Z[M+2]}be.thresholdBlock(i,T,D,N/25,c,h)}}}static cap(i,o,a){return i<o?o:i>a?a:i}static thresholdBlock(i,o,a,c,u,d){for(let h=0,p=a*u+o;h<be.BLOCK_SIZE;h++,p+=u)for(let y=0;y<be.BLOCK_SIZE;y++)(255&i[p+y])<=c&&d.set(o+y,a+h)}static calculateBlackPoints(i,o,a,c,u){const d=u-be.BLOCK_SIZE,h=c-be.BLOCK_SIZE,p=new Array(a);for(let y=0;y<a;y++){p[y]=new Int32Array(o);let C=y<<be.BLOCK_SIZE_POWER;C>d&&(C=d);for(let D=0;D<o;D++){let I=D<<be.BLOCK_SIZE_POWER;I>h&&(I=h);let b=0,T=255,M=0;for(let L=0,W=C*c+I;L<be.BLOCK_SIZE;L++,W+=c){for(let Z=0;Z<be.BLOCK_SIZE;Z++){const B=255&i[W+Z];b+=B,B<T&&(T=B),B>M&&(M=B)}if(M-T>be.MIN_DYNAMIC_RANGE)for(L++,W+=c;L<be.BLOCK_SIZE;L++,W+=c)for(let Z=0;Z<be.BLOCK_SIZE;Z++)b+=255&i[W+Z]}let N=b>>2*be.BLOCK_SIZE_POWER;if(M-T<=be.MIN_DYNAMIC_RANGE&&(N=T/2,y>0&&D>0)){const L=(p[y-1][D]+2*p[y][D-1]+p[y-1][D-1])/4;T<L&&(N=L)}p[y][D]=N}}return p}}be.BLOCK_SIZE_POWER=3,be.BLOCK_SIZE=1<<be.BLOCK_SIZE_POWER,be.BLOCK_SIZE_MASK=be.BLOCK_SIZE-1,be.MINIMUM_DIMENSION=5*be.BLOCK_SIZE,be.MIN_DYNAMIC_RANGE=24;class zr{constructor(i,o){this.width=i,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,o,a,c){throw new zn("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new zn("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new zn("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let o=new Ge;for(let a=0;a<this.height;a++){const c=this.getRow(a,i);for(let u=0;u<this.width;u++){const d=255&c[u];let h;h=d<64?"#":d<128?"+":d<192?".":" ",o.append(h)}o.append("\n")}return o.toString()}}class pt extends zr{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,o){const a=this.delegate.getRow(i,o),c=this.getWidth();for(let u=0;u<c;u++)a[u]=255-(255&a[u]);return a}getMatrix(){const i=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(o);for(let c=0;c<o;c++)a[c]=255-(255&i[c]);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(i,o,a,c){return new pt(this.delegate.crop(i,o,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new pt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new pt(this.delegate.rotateCounterClockwise45())}}class Gn extends zr{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=Gn.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const o=i.getContext("2d").getImageData(0,0,i.width,i.height);return Gn.toGrayscaleBuffer(o.data,i.width,i.height)}static toGrayscaleBuffer(i,o,a){const c=new Uint8ClampedArray(o*a);for(let u=0,d=0,h=i.length;u<h;u+=4,d++){let p;p=0===i[u+3]?255:306*i[u]+601*i[u+1]+117*i[u+2]+512>>10,c[d]=p}return c}getRow(i,o){if(i<0||i>=this.getHeight())throw new te("Requested row is outside the image: "+i);const a=this.getWidth(),c=i*a;return null===o?o=this.buffer.slice(c,c+a):(o.length<a&&(o=new Uint8ClampedArray(a)),o.set(this.buffer.slice(c,c+a))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,o,a,c){return super.crop(i,o,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const o=this.getTempCanvasElement(),a=o.getContext("2d"),c=i*Gn.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*d),p=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*d);return o.width=h,o.height=p,a.translate(h/2,p/2),a.rotate(c),a.drawImage(this.canvas,u/-2,d/-2),this.buffer=Gn.makeBufferFromCanvasImageData(o),this}invert(){return new pt(this)}}Gn.DEGREE_TO_RADIANS=Math.PI/180;class Bs{constructor(i,o,a){this.deviceId=i,this.label=o,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Zt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__awaiter:void 0)||function(x,i,o,a){return new(o||(o=Promise))(function(u,d){function h(C){try{y(a.next(C))}catch(D){d(D)}}function p(C){try{y(a.throw(C))}catch(D){d(D)}}function y(C){C.done?u(C.value):function c(u){return u instanceof o?u:new o(function(d){d(u)})}(C.value).then(h,p)}y((a=a.apply(x,i||[])).next())})};class yr{constructor(i,o=500,a){this.reader=i,this.timeBetweenScansMillis=o,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return Zt(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const a of i){const c="video"===a.kind?"videoinput":a.kind;"videoinput"===c&&o.push({deviceId:a.deviceId||a.id,label:a.label||`Video device ${o.length+1}`,kind:c,groupId:a.groupId})}return o})}getVideoInputDevices(){return Zt(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new Bs(o.deviceId,o.label))})}findDeviceById(i){return Zt(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(a=>a.deviceId===i):null})}decodeFromInputVideoDevice(i,o){return Zt(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,o)})}decodeOnceFromVideoDevice(i,o){return Zt(this,void 0,void 0,function*(){let a;this.reset(),a=i?{deviceId:{exact:i}}:{facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,o)})}decodeOnceFromConstraints(i,o){return Zt(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(a,o)})}decodeOnceFromStream(i,o){return Zt(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(i,o);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(i,o,a){return Zt(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,o,a)})}decodeFromVideoDevice(i,o,a){return Zt(this,void 0,void 0,function*(){let c;c=i?{deviceId:{exact:i}}:{facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,o,a)})}decodeFromConstraints(i,o,a){return Zt(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(c,o,a)})}decodeFromStream(i,o,a){return Zt(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(i,o);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,o){return Zt(this,void 0,void 0,function*(){const a=this.prepareVideoElement(o);return this.addVideoSource(a,i),this.videoElement=a,this.stream=i,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(i){return new Promise((o,a)=>this.playVideoOnLoad(i,()=>o()))}playVideoOnLoad(i,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",o),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return Zt(this,void 0,void 0,function*(){if(this.isVideoPlaying(i))console.warn("Trying to play video that is already playing.");else try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,o){const a=document.getElementById(i);if(!a)throw new ln(`element with id '${i}' not found`);if(a.nodeName.toLowerCase()!==o.toLowerCase())throw new ln(`element with id '${i}' must be an ${o} element`);return a}decodeFromImage(i,o){if(!i&&!o)throw new ln("either imageElement with a src set or an url must be provided");return o&&!i?this.decodeFromImageUrl(o):this.decodeFromImageElement(i)}decodeFromVideo(i,o){if(!i&&!o)throw new ln("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,o,a){if(void 0===i&&void 0===o)throw new ln("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrlContinuously(o,a):this.decodeFromVideoElementContinuously(i,a)}decodeFromImageElement(i){if(!i)throw new ln("An image element must be provided.");this.reset();const o=this.prepareImageElement(i);let a;return this.imageElement=o,a=this.isImageLoaded(o)?this.decodeOnce(o,!1,!0):this._decodeOnLoadImage(o),a}decodeFromVideoElement(i){const o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(i,o){const a=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(a,o)}_decodeFromVideoElementSetup(i){if(!i)throw new ln("A video element must be provided.");this.reset();const o=this.prepareVideoElement(i);return this.videoElement=o,o}decodeFromImageUrl(i){if(!i)throw new ln("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const a=this._decodeOnLoadImage(o);return o.src=i,a}decodeFromVideoUrl(i){if(!i)throw new ln("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),a=this.decodeFromVideoElement(o);return o.src=i,a}decodeFromVideoUrlContinuously(i,o){if(!i)throw new ln("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,o);return a.src=i,c}_decodeOnLoadImage(i){return new Promise((o,a)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(o,a),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return Zt(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,o){return Zt(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,o)})}isImageLoaded(i){return!(!i.complete||0===i.naturalWidth)}prepareImageElement(i){let o;return typeof i>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),"string"==typeof i&&(o=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(o=i),o}prepareVideoElement(i){let o;return!i&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),"string"==typeof i&&(o=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(o=i),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(i,o=!0,a=!0){this._stopAsyncDecode=!1;const c=(u,d)=>{if(this._stopAsyncDecode)return d(new V("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{u(this.decode(i))}catch(h){const C=(h instanceof It||h instanceof $)&&a;if(o&&h instanceof V||C)return setTimeout(c,this._timeBetweenDecodingAttempts,u,d);d(h)}};return new Promise((u,d)=>c(u,d))}decodeContinuously(i,o){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const c=this.decode(i);o(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){o(null,c);const d=c instanceof V;(c instanceof It||c instanceof $||d)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(i){const o=this.createBinaryBitmap(i);return this.decodeBitmap(o)}_isHTMLVideoElement(i){return 0!==i.videoWidth}drawFrameOnCanvas(i,o,a){o||(o={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(i,o,a=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const a=this.getCaptureCanvas(i),c=new Gn(a),u=new be(c);return new Hn(u)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const o=this.createCaptureCanvas(i);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let a,c;return typeof i<"u"&&(i instanceof HTMLVideoElement?(a=i.videoWidth,c=i.videoHeight):i instanceof HTMLImageElement&&(a=i.naturalWidth||i.width,c=i.naturalHeight||i.height)),o.style.width=a+"px",o.style.height=c+"px",o.width=a,o.height=c,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){!this.videoElement||(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){!this.imageElement||(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,o){try{i.srcObject=o}catch{i.src=URL.createObjectURL(o)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Bt{constructor(i,o,a=(null==o?0:8*o.length),c,u,d=qe.currentTimeMillis()){this.text=i,this.rawBytes=o,this.numBits=a,this.resultPoints=c,this.format=u,this.timestamp=d,this.text=i,this.rawBytes=o,this.numBits=a??(null==o?0:8*o.length),this.resultPoints=c,this.format=u,this.resultMetadata=null,this.timestamp=d??qe.currentTimeMillis()}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,o){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(i,o)}putAllMetadata(i){null!==i&&(this.resultMetadata=null===this.resultMetadata?i:new Map(i))}addResultPoints(i){const o=this.resultPoints;if(null===o)this.resultPoints=i;else if(null!==i&&i.length>0){const a=new Array(o.length+i.length);qe.arraycopy(o,0,a,0,o.length),qe.arraycopy(i,0,a,o.length,i.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var li=(()=>{return(x=li||(li={}))[x.AZTEC=0]="AZTEC",x[x.CODABAR=1]="CODABAR",x[x.CODE_39=2]="CODE_39",x[x.CODE_93=3]="CODE_93",x[x.CODE_128=4]="CODE_128",x[x.DATA_MATRIX=5]="DATA_MATRIX",x[x.EAN_8=6]="EAN_8",x[x.EAN_13=7]="EAN_13",x[x.ITF=8]="ITF",x[x.MAXICODE=9]="MAXICODE",x[x.PDF_417=10]="PDF_417",x[x.QR_CODE=11]="QR_CODE",x[x.RSS_14=12]="RSS_14",x[x.RSS_EXPANDED=13]="RSS_EXPANDED",x[x.UPC_A=14]="UPC_A",x[x.UPC_E=15]="UPC_E",x[x.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",li;var x})(),ce=li,nr=(()=>{return(x=nr||(nr={}))[x.OTHER=0]="OTHER",x[x.ORIENTATION=1]="ORIENTATION",x[x.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",x[x.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",x[x.ISSUE_NUMBER=4]="ISSUE_NUMBER",x[x.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",x[x.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",x[x.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",x[x.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",x[x.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",x[x.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",nr;var x})(),mt=nr;class ci{constructor(i,o,a,c,u=-1,d=-1){this.rawBytes=i,this.text=o,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=null==i?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ui{exp(i){return this.expTable[i]}log(i){if(0===i)throw new te;return this.logTable[i]}static addOrSubtract(i,o){return i^o}}class Gt{constructor(i,o){if(0===o.length)throw new te;this.field=i;const a=o.length;if(a>1&&0===o[0]){let c=1;for(;c<a&&0===o[c];)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),qe.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(0===i)return this.getCoefficient(0);const o=this.coefficients;let a;if(1===i){a=0;for(let d=0,h=o.length;d!==h;d++)a=ui.addOrSubtract(a,o[d]);return a}a=o[0];const c=o.length,u=this.field;for(let d=1;d<c;d++)a=ui.addOrSubtract(u.multiply(i,a),o[d]);return a}addOrSubtract(i){if(!this.field.equals(i.field))throw new te("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,a=i.coefficients;if(o.length>a.length){const d=o;o=a,a=d}let c=new Int32Array(a.length);const u=a.length-o.length;qe.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=ui.addOrSubtract(o[d-u],a[d]);return new Gt(this.field,c)}multiply(i){if(!this.field.equals(i.field))throw new te("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const o=this.coefficients,a=o.length,c=i.coefficients,u=c.length,d=new Int32Array(a+u-1),h=this.field;for(let p=0;p<a;p++){const y=o[p];for(let C=0;C<u;C++)d[p+C]=ui.addOrSubtract(d[p+C],h.multiply(y,c[C]))}return new Gt(h,d)}multiplyScalar(i){if(0===i)return this.field.getZero();if(1===i)return this;const o=this.coefficients.length,a=this.field,c=new Int32Array(o),u=this.coefficients;for(let d=0;d<o;d++)c[d]=a.multiply(u[d],i);return new Gt(a,c)}multiplyByMonomial(i,o){if(i<0)throw new te;if(0===o)return this.field.getZero();const a=this.coefficients,c=a.length,u=new Int32Array(c+i),d=this.field;for(let h=0;h<c;h++)u[h]=d.multiply(a[h],o);return new Gt(d,u)}divide(i){if(!this.field.equals(i.field))throw new te("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new te("Divide by 0");const o=this.field;let a=o.getZero(),c=this;const u=i.getCoefficient(i.getDegree()),d=o.inverse(u);for(;c.getDegree()>=i.getDegree()&&!c.isZero();){const h=c.getDegree()-i.getDegree(),p=o.multiply(c.getCoefficient(c.getDegree()),d),y=i.multiplyByMonomial(h,p),C=o.buildMonomial(h,p);a=a.addOrSubtract(C),c=c.addOrSubtract(y)}return[a,c]}toString(){let i="";for(let o=this.getDegree();o>=0;o--){let a=this.getCoefficient(o);if(0!==a){if(a<0?(i+=" - ",a=-a):i.length>0&&(i+=" + "),0===o||1!==a){const c=this.field.log(a);0===c?i+="1":1===c?i+="a":(i+="a^",i+=c)}0!==o&&(1===o?i+="x":(i+="x^",i+=o))}}return i}}let ks=(()=>{class x extends zt{}return x.kind="ArithmeticException",x})();class ke extends ui{constructor(i,o,a){super(),this.primitive=i,this.size=o,this.generatorBase=a;const c=new Int32Array(o);let u=1;for(let h=0;h<o;h++)c[h]=u,u*=2,u>=o&&(u^=i,u&=o-1);this.expTable=c;const d=new Int32Array(o);for(let h=0;h<o-1;h++)d[c[h]]=h;this.logTable=d,this.zero=new Gt(this,Int32Array.from([0])),this.one=new Gt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new te;if(0===o)return this.zero;const a=new Int32Array(i+1);return a[0]=o,new Gt(this,a)}inverse(i){if(0===i)throw new ks;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,o){return 0===i||0===o?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Ce.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}ke.AZTEC_DATA_12=new ke(4201,4096,1),ke.AZTEC_DATA_10=new ke(1033,1024,1),ke.AZTEC_DATA_6=new ke(67,64,1),ke.AZTEC_PARAM=new ke(19,16,1),ke.QR_CODE_FIELD_256=new ke(285,256,0),ke.DATA_MATRIX_FIELD_256=new ke(301,256,1),ke.AZTEC_DATA_8=ke.DATA_MATRIX_FIELD_256,ke.MAXICODE_FIELD_64=ke.AZTEC_DATA_6;let Ni=(()=>{class x extends zt{}return x.kind="ReedSolomonException",x})(),rr=(()=>{class x extends zt{}return x.kind="IllegalStateException",x})();class Oi{constructor(i){this.field=i}decode(i,o){const a=this.field,c=new Gt(a,i),u=new Int32Array(o);let d=!0;for(let b=0;b<o;b++){const T=c.evaluateAt(a.exp(b+a.getGeneratorBase()));u[u.length-1-b]=T,0!==T&&(d=!1)}if(d)return;const h=new Gt(a,u),p=this.runEuclideanAlgorithm(a.buildMonomial(o,1),h,o),C=p[1],D=this.findErrorLocations(p[0]),I=this.findErrorMagnitudes(C,D);for(let b=0;b<D.length;b++){const T=i.length-1-a.log(D[b]);if(T<0)throw new Ni("Bad error location");i[T]=ke.addOrSubtract(i[T],I[b])}}runEuclideanAlgorithm(i,o,a){if(i.getDegree()<o.getDegree()){const b=i;i=o,o=b}const c=this.field;let u=i,d=o,h=c.getZero(),p=c.getOne();for(;d.getDegree()>=(a/2|0);){let b=u,T=h;if(u=d,h=p,u.isZero())throw new Ni("r_{i-1} was zero");d=b;let M=c.getZero();const N=u.getCoefficient(u.getDegree()),L=c.inverse(N);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const W=d.getDegree()-u.getDegree(),Z=c.multiply(d.getCoefficient(d.getDegree()),L);M=M.addOrSubtract(c.buildMonomial(W,Z)),d=d.addOrSubtract(u.multiplyByMonomial(W,Z))}if(p=M.multiply(h).addOrSubtract(T),d.getDegree()>=u.getDegree())throw new rr("Division algorithm failed to reduce polynomial?")}const y=p.getCoefficient(0);if(0===y)throw new Ni("sigmaTilde(0) was zero");const C=c.inverse(y);return[p.multiplyScalar(C),d.multiplyScalar(C)]}findErrorLocations(i){const o=i.getDegree();if(1===o)return Int32Array.from([i.getCoefficient(1)]);const a=new Int32Array(o);let c=0;const u=this.field;for(let d=1;d<u.getSize()&&c<o;d++)0===i.evaluateAt(d)&&(a[c]=u.inverse(d),c++);if(c!==o)throw new Ni("Error locator degree does not match number of roots");return a}findErrorMagnitudes(i,o){const a=o.length,c=new Int32Array(a),u=this.field;for(let d=0;d<a;d++){const h=u.inverse(o[d]);let p=1;for(let y=0;y<a;y++)if(d!==y){const C=u.multiply(o[y],h);p=u.multiply(p,0==(1&C)?1|C:-2&C)}c[d]=u.multiply(i.evaluateAt(h),u.inverse(p)),0!==u.getGeneratorBase()&&(c[d]=u.multiply(c[d],h))}return c}}var kt=(()=>{return(x=kt||(kt={}))[x.UPPER=0]="UPPER",x[x.LOWER=1]="LOWER",x[x.MIXED=2]="MIXED",x[x.DIGIT=3]="DIGIT",x[x.PUNCT=4]="PUNCT",x[x.BINARY=5]="BINARY",kt;var x})();let Vs=(()=>{class x{decode(o){this.ddata=o;let a=o.getBits(),c=this.extractBits(a),u=this.correctBits(c),d=x.convertBoolArrayToByteArray(u),h=x.getEncodedData(u),p=new ci(d,h,null,null);return p.setNumBits(u.length),p}static highLevelDecode(o){return this.getEncodedData(o)}static getEncodedData(o){let a=o.length,c=kt.UPPER,u=kt.UPPER,d="",h=0;for(;h<a;)if(u===kt.BINARY){if(a-h<5)break;let p=x.readCode(o,h,5);if(h+=5,0===p){if(a-h<11)break;p=x.readCode(o,h,11)+31,h+=11}for(let y=0;y<p;y++){if(a-h<8){h=a;break}const C=x.readCode(o,h,8);d+=ye.castAsNonUtf8Char(C),h+=8}u=c}else{let p=u===kt.DIGIT?4:5;if(a-h<p)break;let y=x.readCode(o,h,p);h+=p;let C=x.getCharacter(u,y);C.startsWith("CTRL_")?(c=u,u=x.getTable(C.charAt(5)),"L"===C.charAt(6)&&(c=u)):(d+=C,u=c)}return d}static getTable(o){switch(o){case"L":return kt.LOWER;case"P":return kt.PUNCT;case"M":return kt.MIXED;case"D":return kt.DIGIT;case"B":return kt.BINARY;default:return kt.UPPER}}static getCharacter(o,a){switch(o){case kt.UPPER:return x.UPPER_TABLE[a];case kt.LOWER:return x.LOWER_TABLE[a];case kt.MIXED:return x.MIXED_TABLE[a];case kt.PUNCT:return x.PUNCT_TABLE[a];case kt.DIGIT:return x.DIGIT_TABLE[a];default:throw new rr("Bad table")}}correctBits(o){let a,c;this.ddata.getNbLayers()<=2?(c=6,a=ke.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,a=ke.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,a=ke.AZTEC_DATA_10):(c=12,a=ke.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),d=o.length/c;if(d<u)throw new $;let h=o.length%c,p=new Int32Array(d);for(let b=0;b<d;b++,h+=c)p[b]=x.readCode(o,h,c);try{new Oi(a).decode(p,d-u)}catch(b){throw new $(b)}let y=(1<<c)-1,C=0;for(let b=0;b<u;b++){let T=p[b];if(0===T||T===y)throw new $;(1===T||T===y-1)&&C++}let D=new Array(u*c-C),I=0;for(let b=0;b<u;b++){let T=p[b];if(1===T||T===y-1)D.fill(T>1,I,I+c-1),I+=c-1;else for(let M=c-1;M>=0;--M)D[I++]=0!=(T&1<<M)}return D}extractBits(o){let a=this.ddata.isCompact(),c=this.ddata.getNbLayers(),u=(a?11:14)+4*c,d=new Int32Array(u),h=new Array(this.totalBitsInLayer(c,a));if(a)for(let p=0;p<d.length;p++)d[p]=p;else{let p=u+1+2*Ce.truncDivision(Ce.truncDivision(u,2)-1,15),y=u/2,C=Ce.truncDivision(p,2);for(let D=0;D<y;D++){let I=D+Ce.truncDivision(D,15);d[y-D-1]=C-I-1,d[y+D]=C+I+1}}for(let p=0,y=0;p<c;p++){let C=4*(c-p)+(a?9:12),D=2*p,I=u-1-D;for(let b=0;b<C;b++){let T=2*b;for(let M=0;M<2;M++)h[y+T+M]=o.get(d[D+M],d[D+b]),h[y+2*C+T+M]=o.get(d[D+b],d[I-M]),h[y+4*C+T+M]=o.get(d[I-M],d[I-b]),h[y+6*C+T+M]=o.get(d[I-b],d[D+M])}y+=8*C}return h}static readCode(o,a,c){let u=0;for(let d=a;d<a+c;d++)u<<=1,o[d]&&(u|=1);return u}static readByte(o,a){let c=o.length-a;return c>=8?x.readCode(o,a,8):x.readCode(o,a,c)<<8-c}static convertBoolArrayToByteArray(o){let a=new Uint8Array((o.length+7)/8);for(let c=0;c<a.length;c++)a[c]=x.readByte(o,8*c);return a}totalBitsInLayer(o,a){return((a?88:112)+16*o)*o}}return x.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],x.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],x.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],x.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],x.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],x})();class Ve{constructor(){}static round(i){return NaN===i?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,o,a,c){const u=i-a,d=o-c;return Math.sqrt(u*u+d*d)}static sum(i){let o=0;for(let a=0,c=i.length;a!==c;a++)o+=i[a];return o}}class vo{static floatToIntBits(i){return i}}vo.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(i,o){this.x=i,this.y=o}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof oe){const o=i;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*vo.floatToIntBits(this.x)+vo.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const o=this.distance(i[0],i[1]),a=this.distance(i[1],i[2]),c=this.distance(i[0],i[2]);let u,d,h;if(a>=o&&a>=c?(d=i[0],u=i[1],h=i[2]):c>=a&&c>=o?(d=i[1],u=i[0],h=i[2]):(d=i[2],u=i[0],h=i[1]),this.crossProductZ(u,d,h)<0){const p=u;u=h,h=p}i[0]=u,i[1]=d,i[2]=h}static distance(i,o){return Ve.distance(i.x,i.y,o.x,o.y)}static crossProductZ(i,o,a){const c=o.x,u=o.y;return(a.x-c)*(i.y-u)-(a.y-u)*(i.x-c)}}class Ri{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class xl extends Ri{constructor(i,o,a,c,u){super(i,o),this.compact=a,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let di=(()=>{class x{constructor(o,a,c,u){this.image=o,this.height=o.getHeight(),this.width=o.getWidth(),null==a&&(a=x.INIT_SIZE),null==c&&(c=o.getWidth()/2|0),null==u&&(u=o.getHeight()/2|0);const d=a/2|0;if(this.leftInit=c-d,this.rightInit=c+d,this.upInit=u-d,this.downInit=u+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let o=this.leftInit,a=this.rightInit,c=this.upInit,u=this.downInit,d=!1,h=!0,p=!1,y=!1,C=!1,D=!1,I=!1;const b=this.width,T=this.height;for(;h;){h=!1;let M=!0;for(;(M||!y)&&a<b;)M=this.containsBlackPoint(c,u,a,!1),M?(a++,h=!0,y=!0):y||a++;if(a>=b){d=!0;break}let N=!0;for(;(N||!C)&&u<T;)N=this.containsBlackPoint(o,a,u,!0),N?(u++,h=!0,C=!0):C||u++;if(u>=T){d=!0;break}let L=!0;for(;(L||!D)&&o>=0;)L=this.containsBlackPoint(c,u,o,!1),L?(o--,h=!0,D=!0):D||o--;if(o<0){d=!0;break}let W=!0;for(;(W||!I)&&c>=0;)W=this.containsBlackPoint(o,a,c,!0),W?(c--,h=!0,I=!0):I||c--;if(c<0){d=!0;break}h&&(p=!0)}if(!d&&p){const M=a-o;let N=null;for(let B=1;null===N&&B<M;B++)N=this.getBlackPointOnSegment(o,u-B,o+B,u);if(null==N)throw new V;let L=null;for(let B=1;null===L&&B<M;B++)L=this.getBlackPointOnSegment(o,c+B,o+B,c);if(null==L)throw new V;let W=null;for(let B=1;null===W&&B<M;B++)W=this.getBlackPointOnSegment(a,c+B,a-B,c);if(null==W)throw new V;let Z=null;for(let B=1;null===Z&&B<M;B++)Z=this.getBlackPointOnSegment(a,u-B,a-B,u);if(null==Z)throw new V;return this.centerEdges(Z,N,W,L)}throw new V}getBlackPointOnSegment(o,a,c,u){const d=Ve.round(Ve.distance(o,a,c,u)),h=(c-o)/d,p=(u-a)/d,y=this.image;for(let C=0;C<d;C++){const D=Ve.round(o+C*h),I=Ve.round(a+C*p);if(y.get(D,I))return new oe(D,I)}return null}centerEdges(o,a,c,u){const d=o.getX(),h=o.getY(),p=a.getX(),y=a.getY(),C=c.getX(),D=c.getY(),I=u.getX(),b=u.getY(),T=x.CORR;return d<this.width/2?[new oe(I-T,b+T),new oe(p+T,y+T),new oe(C-T,D-T),new oe(d+T,h-T)]:[new oe(I+T,b+T),new oe(p+T,y-T),new oe(C-T,D+T),new oe(d-T,h-T)]}containsBlackPoint(o,a,c,u){const d=this.image;if(u){for(let h=o;h<=a;h++)if(d.get(h,c))return!0}else for(let h=o;h<=a;h++)if(d.get(c,h))return!0;return!1}}return x.INIT_SIZE=10,x.CORR=1,x})();class Us{static checkAndNudgePoints(i,o){const a=i.getWidth(),c=i.getHeight();let u=!0;for(let d=0;d<o.length&&u;d+=2){const h=Math.floor(o[d]),p=Math.floor(o[d+1]);if(h<-1||h>a||p<-1||p>c)throw new V;u=!1,-1===h?(o[d]=0,u=!0):h===a&&(o[d]=a-1,u=!0),-1===p?(o[d+1]=0,u=!0):p===c&&(o[d+1]=c-1,u=!0)}u=!0;for(let d=o.length-2;d>=0&&u;d-=2){const h=Math.floor(o[d]),p=Math.floor(o[d+1]);if(h<-1||h>a||p<-1||p>c)throw new V;u=!1,-1===h?(o[d]=0,u=!0):h===a&&(o[d]=a-1,u=!0),-1===p?(o[d+1]=0,u=!0):p===c&&(o[d+1]=c-1,u=!0)}}}class yn{constructor(i,o,a,c,u,d,h,p,y){this.a11=i,this.a21=o,this.a31=a,this.a12=c,this.a22=u,this.a32=d,this.a13=h,this.a23=p,this.a33=y}static quadrilateralToQuadrilateral(i,o,a,c,u,d,h,p,y,C,D,I,b,T,M,N){const L=yn.quadrilateralToSquare(i,o,a,c,u,d,h,p);return yn.squareToQuadrilateral(y,C,D,I,b,T,M,N).times(L)}transformPoints(i){const o=i.length,a=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,p=this.a23,y=this.a31,C=this.a32,D=this.a33;for(let I=0;I<o;I+=2){const b=i[I],T=i[I+1],M=u*b+p*T+D;i[I]=(a*b+d*T+y)/M,i[I+1]=(c*b+h*T+C)/M}}transformPointsWithValues(i,o){const a=this.a11,c=this.a12,u=this.a13,d=this.a21,h=this.a22,p=this.a23,y=this.a31,C=this.a32,D=this.a33,I=i.length;for(let b=0;b<I;b++){const T=i[b],M=o[b],N=u*T+p*M+D;i[b]=(a*T+d*M+y)/N,o[b]=(c*T+h*M+C)/N}}static squareToQuadrilateral(i,o,a,c,u,d,h,p){const y=i-a+u-h,C=o-c+d-p;if(0===y&&0===C)return new yn(a-i,u-a,i,c-o,d-c,o,0,0,1);{const D=a-u,I=h-u,b=c-d,T=p-d,M=D*T-I*b,N=(y*T-I*C)/M,L=(D*C-y*b)/M;return new yn(a-i+N*a,h-i+L*h,i,c-o+N*c,p-o+L*p,o,N,L,1)}}static quadrilateralToSquare(i,o,a,c,u,d,h,p){return yn.squareToQuadrilateral(i,o,a,c,u,d,h,p).buildAdjoint()}buildAdjoint(){return new yn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new yn(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class js extends Us{sampleGrid(i,o,a,c,u,d,h,p,y,C,D,I,b,T,M,N,L,W,Z){const B=yn.quadrilateralToQuadrilateral(c,u,d,h,p,y,C,D,I,b,T,M,N,L,W,Z);return this.sampleGridWithTransform(i,o,a,B)}sampleGridWithTransform(i,o,a,c){if(o<=0||a<=0)throw new V;const u=new vt(o,a),d=new Float32Array(2*o);for(let h=0;h<a;h++){const p=d.length,y=h+.5;for(let C=0;C<p;C+=2)d[C]=C/2+.5,d[C+1]=y;c.transformPoints(d),Us.checkAndNudgePoints(i,d);try{for(let C=0;C<p;C+=2)i.get(Math.floor(d[C]),Math.floor(d[C+1]))&&u.set(C/2,h)}catch{throw new V}}return u}}class xr{static setGridSampler(i){xr.gridSampler=i}static getInstance(){return xr.gridSampler}}xr.gridSampler=new js;class Kt{constructor(i,o){this.x=i,this.y=o}toResultPoint(){return new oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Cl{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let o=this.getMatrixCenter(),a=this.getBullsEyeCorners(o);if(i){let d=a[0];a[0]=a[2],a[2]=d}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new xl(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!(this.isValidPoint(i[0])&&this.isValidPoint(i[1])&&this.isValidPoint(i[2])&&this.isValidPoint(i[3])))throw new V;let o=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(i[0],i[1],o),this.sampleLine(i[1],i[2],o),this.sampleLine(i[2],i[3],o),this.sampleLine(i[3],i[0],o)]);this.shift=this.getRotation(a,o);let c=0;for(let d=0;d<4;d++){let h=a[(this.shift+d)%4];this.compact?(c<<=7,c+=h>>1&127):(c<<=10,c+=(h>>2&992)+(h>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=1+(u>>6),this.nbDataBlocks=1+(63&u)):(this.nbLayers=1+(u>>11),this.nbDataBlocks=1+(2047&u))}getRotation(i,o){let a=0;i.forEach((c,u,d)=>{a=(c>>o-2<<1)+(1&c)+(a<<3)}),a=((1&a)<<11)+(a>>1);for(let c=0;c<4;c++)if(Ce.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new V}getCorrectedParameterData(i,o){let a,c;o?(a=7,c=2):(a=10,c=4);let u=a-c,d=new Int32Array(a);for(let p=a-1;p>=0;--p)d[p]=15&i,i>>=4;try{new Oi(ke.AZTEC_PARAM).decode(d,u)}catch{throw new V}let h=0;for(let p=0;p<c;p++)h=(h<<4)+d[p];return h}getBullsEyeCorners(i){let o=i,a=i,c=i,u=i,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let D=this.getFirstDifferent(o,d,1,-1),I=this.getFirstDifferent(a,d,1,1),b=this.getFirstDifferent(c,d,-1,1),T=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let M=this.distancePoint(T,D)*this.nbCenterLayers/(this.distancePoint(u,o)*(this.nbCenterLayers+2));if(M<.75||M>1.25||!this.isWhiteOrBlackRectangle(D,I,b,T))break}o=D,a=I,c=b,u=T,d=!d}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new V;this.compact=5===this.nbCenterLayers;let h=new oe(o.getX()+.5,o.getY()-.5),p=new oe(a.getX()+.5,a.getY()+.5),y=new oe(c.getX()-.5,c.getY()+.5),C=new oe(u.getX()-.5,u.getY()-.5);return this.expandSquare([h,p,y,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,o,a,c;try{let h=new di(this.image).detect();i=h[0],o=h[1],a=h[2],c=h[3]}catch{let p=this.image.getWidth()/2,y=this.image.getHeight()/2;i=this.getFirstDifferent(new Kt(p+7,y-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Kt(p+7,y+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Kt(p-7,y+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Kt(p-7,y-7),!1,-1,-1).toResultPoint()}let u=Ve.round((i.getX()+c.getX()+o.getX()+a.getX())/4),d=Ve.round((i.getY()+c.getY()+o.getY()+a.getY())/4);try{let h=new di(this.image,15,u,d).detect();i=h[0],o=h[1],a=h[2],c=h[3]}catch{i=this.getFirstDifferent(new Kt(u+7,d-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Kt(u+7,d+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Kt(u-7,d+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Kt(u-7,d-7),!1,-1,-1).toResultPoint()}return u=Ve.round((i.getX()+c.getX()+o.getX()+a.getX())/4),d=Ve.round((i.getY()+c.getY()+o.getY()+a.getY())/4),new Kt(u,d)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,o,a,c,u){let d=xr.getInstance(),h=this.getDimension(),p=h/2-this.nbCenterLayers,y=h/2+this.nbCenterLayers;return d.sampleGrid(i,h,h,p,p,y,p,y,y,p,y,o.getX(),o.getY(),a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(i,o,a){let c=0,u=this.distanceResultPoint(i,o),d=u/a,h=i.getX(),p=i.getY(),y=d*(o.getX()-i.getX())/u,C=d*(o.getY()-i.getY())/u;for(let D=0;D<a;D++)this.image.get(Ve.round(h+D*y),Ve.round(p+D*C))&&(c|=1<<a-D-1);return c}isWhiteOrBlackRectangle(i,o,a,c){i=new Kt(i.getX()-3,i.getY()+3),o=new Kt(o.getX()-3,o.getY()-3),a=new Kt(a.getX()+3,a.getY()-3),c=new Kt(c.getX()+3,c.getY()+3);let d=this.getColor(c,i);if(0===d)return!1;let h=this.getColor(i,o);return h===d&&(h=this.getColor(o,a),h===d)&&(h=this.getColor(a,c),h===d)}getColor(i,o){let a=this.distancePoint(i,o),c=(o.getX()-i.getX())/a,u=(o.getY()-i.getY())/a,d=0,h=i.getX(),p=i.getY(),y=this.image.get(i.getX(),i.getY()),C=Math.ceil(a);for(let I=0;I<C;I++)h+=c,p+=u,this.image.get(Ve.round(h),Ve.round(p))!==y&&d++;let D=d/a;return D>.1&&D<.9?0:D<=.1===y?1:-1}getFirstDifferent(i,o,a,c){let u=i.getX()+a,d=i.getY()+c;for(;this.isValid(u,d)&&this.image.get(u,d)===o;)u+=a,d+=c;for(u-=a,d-=c;this.isValid(u,d)&&this.image.get(u,d)===o;)u+=a;for(u-=a;this.isValid(u,d)&&this.image.get(u,d)===o;)d+=c;return d-=c,new Kt(u,d)}expandSquare(i,o,a){let c=a/(2*o),u=i[0].getX()-i[2].getX(),d=i[0].getY()-i[2].getY(),h=(i[0].getX()+i[2].getX())/2,p=(i[0].getY()+i[2].getY())/2,y=new oe(h+c*u,p+c*d),C=new oe(h-c*u,p-c*d);return u=i[1].getX()-i[3].getX(),d=i[1].getY()-i[3].getY(),h=(i[1].getX()+i[3].getX())/2,p=(i[1].getY()+i[3].getY())/2,[y,new oe(h+c*u,p+c*d),C,new oe(h-c*u,p-c*d)]}isValid(i,o){return i>=0&&i<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(i){let o=Ve.round(i.getX()),a=Ve.round(i.getY());return this.isValid(o,a)}distancePoint(i,o){return Ve.distance(i.getX(),i.getY(),o.getX(),o.getY())}distanceResultPoint(i,o){return Ve.distance(i.getX(),i.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ce.truncDivision(this.nbLayers-4,8)+1)+15}}class Bn{decode(i,o=null){let a=null,c=new Cl(i.getBlackMatrix()),u=null,d=null;try{let C=c.detectMirror(!1);u=C.getPoints(),this.reportFoundResultPoints(o,u),d=(new Vs).decode(C)}catch(C){a=C}if(null==d)try{let C=c.detectMirror(!0);u=C.getPoints(),this.reportFoundResultPoints(o,u),d=(new Vs).decode(C)}catch(C){throw a??C}let h=new Bt(d.getText(),d.getRawBytes(),d.getNumBits(),u,ce.AZTEC,qe.currentTimeMillis()),p=d.getByteSegments();null!=p&&h.putMetadata(mt.BYTE_SEGMENTS,p);let y=d.getECLevel();return null!=y&&h.putMetadata(mt.ERROR_CORRECTION_LEVEL,y),h}reportFoundResultPoints(i,o){if(null!=i){let a=i.get(rt.NEED_RESULT_POINT_CALLBACK);null!=a&&o.forEach((c,u,d)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class bt{decode(i,o){try{return this.doDecode(i,o)}catch{if(o&&!0===o.get(rt.TRY_HARDER)&&i.isRotateSupported()){const u=i.rotateCounterClockwise(),d=this.doDecode(u,o),h=d.getResultMetadata();let p=270;null!==h&&!0===h.get(mt.ORIENTATION)&&(p+=h.get(mt.ORIENTATION)%360),d.putMetadata(mt.ORIENTATION,p);const y=d.getResultPoints();if(null!==y){const C=u.getHeight();for(let D=0;D<y.length;D++)y[D]=new oe(C-y[D].getY()-1,y[D].getX())}return d}throw new V}}reset(){}doDecode(i,o){const a=i.getWidth(),c=i.getHeight();let u=new Qe(a);const d=o&&!0===o.get(rt.TRY_HARDER),h=Math.max(1,c>>(d?8:5));let p;p=d?c:15;const y=Math.trunc(c/2);for(let C=0;C<p;C++){const D=Math.trunc((C+1)/2),b=y+h*(0==(1&C)?D:-D);if(b<0||b>=c)break;try{u=i.getBlackRow(b,u)}catch{continue}for(let T=0;T<2;T++){if(1===T&&(u.reverse(),o&&!0===o.get(rt.NEED_RESULT_POINT_CALLBACK))){const M=new Map;o.forEach((N,L)=>M.set(L,N)),M.delete(rt.NEED_RESULT_POINT_CALLBACK),o=M}try{const M=this.decodeRow(b,u,o);if(1===T){M.putMetadata(mt.ORIENTATION,180);const N=M.getResultPoints();null!==N&&(N[0]=new oe(a-N[0].getX()-1,N[0].getY()),N[1]=new oe(a-N[1].getX()-1,N[1].getY()))}return M}catch{}}}throw new V}static recordPattern(i,o,a){const c=a.length;for(let y=0;y<c;y++)a[y]=0;const u=i.getSize();if(o>=u)throw new V;let d=!i.get(o),h=0,p=o;for(;p<u;){if(i.get(p)!==d)a[h]++;else{if(++h===c)break;a[h]=1,d=!d}p++}if(h!==c&&(h!==c-1||p!==u))throw new V}static recordPatternInReverse(i,o,a){let c=a.length,u=i.get(o);for(;o>0&&c>=0;)i.get(--o)!==u&&(c--,u=!u);if(c>=0)throw new V;bt.recordPattern(i,o+1,a)}static patternMatchVariance(i,o,a){const c=i.length;let u=0,d=0;for(let y=0;y<c;y++)u+=i[y],d+=o[y];if(u<d)return Number.POSITIVE_INFINITY;const h=u/d;a*=h;let p=0;for(let y=0;y<c;y++){const C=i[y],D=o[y]*h,I=C>D?C-D:D-C;if(I>a)return Number.POSITIVE_INFINITY;p+=I}return p/u}}class X extends bt{static findStartPattern(i){const o=i.getSize(),a=i.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),d=a,h=!1;for(let y=a;y<o;y++)if(i.get(y)!==h)u[c]++;else{if(5===c){let C=X.MAX_AVG_VARIANCE,D=-1;for(let I=X.CODE_START_A;I<=X.CODE_START_C;I++){const b=bt.patternMatchVariance(u,X.CODE_PATTERNS[I],X.MAX_INDIVIDUAL_VARIANCE);b<C&&(C=b,D=I)}if(D>=0&&i.isRange(Math.max(0,d-(y-d)/2),d,!1))return Int32Array.from([d,y,D]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,h=!h}throw new V}static decodeCode(i,o,a){bt.recordPattern(i,a,o);let c=X.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<X.CODE_PATTERNS.length;d++){const p=this.patternMatchVariance(o,X.CODE_PATTERNS[d],X.MAX_INDIVIDUAL_VARIANCE);p<c&&(c=p,u=d)}if(u>=0)return u;throw new V}decodeRow(i,o,a){const c=a&&!0===a.get(rt.ASSUME_GS1),u=X.findStartPattern(o),d=u[2];let h=0;const p=new Uint8Array(20);let y;switch(p[h++]=d,d){case X.CODE_START_A:y=X.CODE_CODE_A;break;case X.CODE_START_B:y=X.CODE_CODE_B;break;case X.CODE_START_C:y=X.CODE_CODE_C;break;default:throw new $}let C=!1,D=!1,I="",b=u[0],T=u[1];const M=Int32Array.from([0,0,0,0,0,0]);let N=0,L=0,W=d,Z=0,B=!0,Me=!1,Ie=!1;for(;!C;){const xi=D;switch(D=!1,N=L,L=X.decodeCode(o,M,T),p[h++]=L,L!==X.CODE_STOP&&(B=!0),L!==X.CODE_STOP&&(Z++,W+=Z*L),b=T,T+=M.reduce((Qd,Kd)=>Qd+Kd,0),L){case X.CODE_START_A:case X.CODE_START_B:case X.CODE_START_C:throw new $}switch(y){case X.CODE_CODE_A:if(L<64)I+=String.fromCharCode(Ie===Me?" ".charCodeAt(0)+L:" ".charCodeAt(0)+L+128),Ie=!1;else if(L<96)I+=String.fromCharCode(Ie===Me?L-64:L+64),Ie=!1;else switch(L!==X.CODE_STOP&&(B=!1),L){case X.CODE_FNC_1:c&&(I+=0===I.length?"]C1":String.fromCharCode(29));break;case X.CODE_FNC_2:case X.CODE_FNC_3:break;case X.CODE_FNC_4_A:!Me&&Ie?(Me=!0,Ie=!1):Me&&Ie?(Me=!1,Ie=!1):Ie=!0;break;case X.CODE_SHIFT:D=!0,y=X.CODE_CODE_B;break;case X.CODE_CODE_B:y=X.CODE_CODE_B;break;case X.CODE_CODE_C:y=X.CODE_CODE_C;break;case X.CODE_STOP:C=!0}break;case X.CODE_CODE_B:if(L<96)I+=String.fromCharCode(Ie===Me?" ".charCodeAt(0)+L:" ".charCodeAt(0)+L+128),Ie=!1;else switch(L!==X.CODE_STOP&&(B=!1),L){case X.CODE_FNC_1:c&&(I+=0===I.length?"]C1":String.fromCharCode(29));break;case X.CODE_FNC_2:case X.CODE_FNC_3:break;case X.CODE_FNC_4_B:!Me&&Ie?(Me=!0,Ie=!1):Me&&Ie?(Me=!1,Ie=!1):Ie=!0;break;case X.CODE_SHIFT:D=!0,y=X.CODE_CODE_A;break;case X.CODE_CODE_A:y=X.CODE_CODE_A;break;case X.CODE_CODE_C:y=X.CODE_CODE_C;break;case X.CODE_STOP:C=!0}break;case X.CODE_CODE_C:if(L<100)L<10&&(I+="0"),I+=L;else switch(L!==X.CODE_STOP&&(B=!1),L){case X.CODE_FNC_1:c&&(I+=0===I.length?"]C1":String.fromCharCode(29));break;case X.CODE_CODE_A:y=X.CODE_CODE_A;break;case X.CODE_CODE_B:y=X.CODE_CODE_B;break;case X.CODE_STOP:C=!0}}xi&&(y=y===X.CODE_CODE_A?X.CODE_CODE_B:X.CODE_CODE_A)}const nn=T-b;if(T=o.getNextUnset(T),!o.isRange(T,Math.min(o.getSize(),T+(T-b)/2),!1))throw new V;if(W-=Z*N,W%103!==N)throw new It;const Tn=I.length;if(0===Tn)throw new V;Tn>0&&B&&(I=I.substring(0,y===X.CODE_CODE_C?Tn-2:Tn-1));const fn=(u[1]+u[0])/2,ot=b+nn/2,Xt=p.length,En=new Uint8Array(Xt);for(let xi=0;xi<Xt;xi++)En[xi]=p[xi];const yi=[new oe(fn,i),new oe(ot,i)];return new Bt(I,En,0,yi,ce.CODE_128,(new Date).getTime())}}X.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],X.MAX_AVG_VARIANCE=.25,X.MAX_INDIVIDUAL_VARIANCE=.7,X.CODE_SHIFT=98,X.CODE_CODE_C=99,X.CODE_CODE_B=100,X.CODE_CODE_A=101,X.CODE_FNC_1=102,X.CODE_FNC_2=97,X.CODE_FNC_3=96,X.CODE_FNC_4_A=101,X.CODE_FNC_4_B=100,X.CODE_START_A=103,X.CODE_START_B=104,X.CODE_START_C=105,X.CODE_STOP=106;let Hs=(()=>{class x extends bt{constructor(o=!1,a=!1){super(),this.usingCheckDigit=o,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(o,a,c){let u=this.counters;u.fill(0),this.decodeRowResult="";let y,C,d=x.findAsteriskPattern(a,u),h=a.getNextSet(d[1]),p=a.getSize();do{x.recordPattern(a,h,u);let N=x.toNarrowWidePattern(u);if(N<0)throw new V;y=x.patternToChar(N),this.decodeRowResult+=y,C=h;for(let L of u)h+=L;h=a.getNextSet(h)}while("*"!==y);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let b,D=0;for(let N of u)D+=N;if(h!==p&&2*(h-C-D)<D)throw new V;if(this.usingCheckDigit){let N=this.decodeRowResult.length-1,L=0;for(let W=0;W<N;W++)L+=x.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(W));if(this.decodeRowResult.charAt(N)!==x.ALPHABET_STRING.charAt(L%43))throw new It;this.decodeRowResult=this.decodeRowResult.substring(0,N)}if(0===this.decodeRowResult.length)throw new V;b=this.extendedMode?x.decodeExtended(this.decodeRowResult):this.decodeRowResult;let M=C+D/2;return new Bt(b,null,0,[new oe((d[1]+d[0])/2,o),new oe(M,o)],ce.CODE_39,(new Date).getTime())}static findAsteriskPattern(o,a){let c=o.getSize(),u=o.getNextSet(0),d=0,h=u,p=!1,y=a.length;for(let C=u;C<c;C++)if(o.get(C)!==p)a[d]++;else{if(d===y-1){if(this.toNarrowWidePattern(a)===x.ASTERISK_ENCODING&&o.isRange(Math.max(0,h-Math.floor((C-h)/2)),h,!1))return[h,C];h+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,p=!p}throw new V}static toNarrowWidePattern(o){let u,a=o.length,c=0;do{let d=2147483647;for(let y of o)y<d&&y>c&&(d=y);c=d,u=0;let h=0,p=0;for(let y=0;y<a;y++){let C=o[y];C>c&&(p|=1<<a-1-y,u++,h+=C)}if(3===u){for(let y=0;y<a&&u>0;y++){let C=o[y];if(C>c&&(u--,2*C>=h))return-1}return p}}while(u>3);return-1}static patternToChar(o){for(let a=0;a<x.CHARACTER_ENCODINGS.length;a++)if(x.CHARACTER_ENCODINGS[a]===o)return x.ALPHABET_STRING.charAt(a);if(o===x.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(o){let a=o.length,c="";for(let u=0;u<a;u++){let d=o.charAt(u);if("+"===d||"$"===d||"%"===d||"/"===d){let h=o.charAt(u+1),p="\0";switch(d){case"+":if(!(h>="A"&&h<="Z"))throw new $;p=String.fromCharCode(h.charCodeAt(0)+32);break;case"$":if(!(h>="A"&&h<="Z"))throw new $;p=String.fromCharCode(h.charCodeAt(0)-64);break;case"%":if(h>="A"&&h<="E")p=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")p=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")p=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")p=String.fromCharCode(h.charCodeAt(0)+43);else if("U"===h)p="\0";else if("V"===h)p="@";else if("W"===h)p="`";else{if("X"!==h&&"Y"!==h&&"Z"!==h)throw new $;p="\x7f"}break;case"/":if(h>="A"&&h<="O")p=String.fromCharCode(h.charCodeAt(0)-32);else{if("Z"!==h)throw new $;p=":"}}c+=p,u++}else c+=d}return c}}return x.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",x.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],x.ASTERISK_ENCODING=148,x})();class Ke extends bt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,o,a){let c=this.decodeStart(o),u=this.decodeEnd(o),d=new Ge;Ke.decodeMiddle(o,c[1],u[0],d);let h=d.toString(),p=null;null!=a&&(p=a.get(rt.ALLOWED_LENGTHS)),null==p&&(p=Ke.DEFAULT_ALLOWED_LENGTHS);let y=h.length,C=!1,D=0;for(let T of p){if(y===T){C=!0;break}T>D&&(D=T)}if(!C&&y>D&&(C=!0),!C)throw new $;const I=[new oe(c[1],i),new oe(u[0],i)];return new Bt(h,null,0,I,ce.ITF,(new Date).getTime())}static decodeMiddle(i,o,a,c){let u=new Int32Array(10),d=new Int32Array(5),h=new Int32Array(5);for(u.fill(0),d.fill(0),h.fill(0);o<a;){bt.recordPattern(i,o,u);for(let y=0;y<5;y++){let C=2*y;d[y]=u[C],h[y]=u[C+1]}let p=Ke.decodeDigit(d);c.append(p.toString()),p=this.decodeDigit(h),c.append(p.toString()),u.forEach(function(y){o+=y})}}decodeStart(i){let o=Ke.skipWhiteSpace(i),a=Ke.findGuardPattern(i,o,Ke.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(i,a[0]),a}validateQuietZone(i,o){let a=10*this.narrowLineWidth;a=a<o?a:o;for(let c=o-1;a>0&&c>=0&&!i.get(c);c--)a--;if(0!==a)throw new V}static skipWhiteSpace(i){const o=i.getSize(),a=i.getNextSet(0);if(a===o)throw new V;return a}decodeEnd(i){i.reverse();try{let a,o=Ke.skipWhiteSpace(i);try{a=Ke.findGuardPattern(i,o,Ke.END_PATTERN_REVERSED[0])}catch(u){u instanceof V&&(a=Ke.findGuardPattern(i,o,Ke.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,a[0]);let c=a[0];return a[0]=i.getSize()-a[1],a[1]=i.getSize()-c,a}finally{i.reverse()}}static findGuardPattern(i,o,a){let c=a.length,u=new Int32Array(c),d=i.getSize(),h=!1,p=0,y=o;u.fill(0);for(let C=o;C<d;C++)if(i.get(C)!==h)u[p]++;else{if(p===c-1){if(bt.patternMatchVariance(u,a,Ke.MAX_INDIVIDUAL_VARIANCE)<Ke.MAX_AVG_VARIANCE)return[y,C];y+=u[0]+u[1],qe.arraycopy(u,2,u,0,p-1),u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,h=!h}throw new V}static decodeDigit(i){let o=Ke.MAX_AVG_VARIANCE,a=-1,c=Ke.PATTERNS.length;for(let u=0;u<c;u++){let h=bt.patternMatchVariance(i,Ke.PATTERNS[u],Ke.MAX_INDIVIDUAL_VARIANCE);h<o?(o=h,a=u):h===o&&(a=-1)}if(a>=0)return a%10;throw new V}}Ke.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ke.MAX_AVG_VARIANCE=.38,Ke.MAX_INDIVIDUAL_VARIANCE=.5,Ke.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ke.START_PATTERN=Int32Array.from([1,1,1,1]),Ke.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class wt extends bt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let a,o=!1,c=0,u=Int32Array.from([0,0,0]);for(;!o;){u=Int32Array.from([0,0,0]),a=wt.findGuardPattern(i,c,!1,this.START_END_PATTERN,u);let d=a[0];c=a[1];let h=d-(c-d);h>=0&&(o=i.isRange(h,d,!1))}return a}static checkChecksum(i){return wt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(0===o)return!1;let a=parseInt(i.charAt(o-1),10);return wt.getStandardUPCEANChecksum(i.substring(0,o-1))===a}static getStandardUPCEANChecksum(i){let o=i.length,a=0;for(let c=o-1;c>=0;c-=2){let u=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new $;a+=u}a*=3;for(let c=o-2;c>=0;c-=2){let u=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new $;a+=u}return(1e3-a)%10}static decodeEnd(i,o){return wt.findGuardPattern(i,o,!1,wt.START_END_PATTERN,new Int32Array(wt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,o,a,c){return this.findGuardPattern(i,o,a,c,new Int32Array(c.length))}static findGuardPattern(i,o,a,c,u){let d=i.getSize(),h=0,p=o=a?i.getNextUnset(o):i.getNextSet(o),y=c.length,C=a;for(let D=o;D<d;D++)if(i.get(D)!==C)u[h]++;else{if(h===y-1){if(bt.patternMatchVariance(u,c,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return Int32Array.from([p,D]);p+=u[0]+u[1];let I=u.slice(2,u.length-1);for(let b=0;b<h-1;b++)u[b]=I[b];u[h-1]=0,u[h]=0,h--}else h++;u[h]=1,C=!C}throw new V}static decodeDigit(i,o,a,c){this.recordPattern(i,a,o);let u=this.MAX_AVG_VARIANCE,d=-1,h=c.length;for(let p=0;p<h;p++){let C=bt.patternMatchVariance(o,c[p],wt.MAX_INDIVIDUAL_VARIANCE);C<u&&(u=C,d=p)}if(d>=0)return d;throw new V}}wt.MAX_AVG_VARIANCE=.48,wt.MAX_INDIVIDUAL_VARIANCE=.7,wt.START_END_PATTERN=Int32Array.from([1,1,1]),wt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),wt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),wt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Li{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(o,a,c),d=c.toString(),h=Li.parseExtensionString(d),p=[new oe((a[0]+a[1])/2,i),new oe(u,i)],y=new Bt(d,null,0,p,ce.UPC_EAN_EXTENSION,(new Date).getTime());return null!=h&&y.putAllMetadata(h),y}decodeMiddle(i,o,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d=o[1],h=0;for(let y=0;y<5&&d<u;y++){let C=wt.decodeDigit(i,c,d,wt.L_AND_G_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+C%10);for(let D of c)d+=D;C>=10&&(h|=1<<4-y),4!==y&&(d=i.getNextSet(d),d=i.getNextUnset(d))}if(5!==a.length)throw new V;let p=this.determineCheckDigit(h);if(Li.extensionChecksum(a.toString())!==p)throw new V;return d}static extensionChecksum(i){let o=i.length,a=0;for(let c=o-2;c>=0;c-=2)a+=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);a*=3;for(let c=o-1;c>=0;c-=2)a+=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);return a*=3,a%10}determineCheckDigit(i){for(let o=0;o<10;o++)if(i===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new V}static parseExtensionString(i){if(5!==i.length)return null;let o=Li.parseExtension5String(i);return null==o?null:new Map([[mt.SUGGESTED_PRICE,o]])}static parseExtension5String(i){let o;switch(i.charAt(0)){case"0":o="\xa3";break;case"5":o="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o=""}let a=parseInt(i.substring(1)),u=a%100;return o+(a/100).toString()+"."+(u<10?"0"+u:u.toString())}}class zs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(o,a,c),d=c.toString(),h=zs.parseExtensionString(d),p=[new oe((a[0]+a[1])/2,i),new oe(u,i)],y=new Bt(d,null,0,p,ce.UPC_EAN_EXTENSION,(new Date).getTime());return null!=h&&y.putAllMetadata(h),y}decodeMiddle(i,o,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d=o[1],h=0;for(let p=0;p<2&&d<u;p++){let y=wt.decodeDigit(i,c,d,wt.L_AND_G_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+y%10);for(let C of c)d+=C;y>=10&&(h|=1<<1-p),1!==p&&(d=i.getNextSet(d),d=i.getNextUnset(d))}if(2!==a.length)throw new V;if(parseInt(a.toString())%4!==h)throw new V;return d}static parseExtensionString(i){return 2!==i.length?null:new Map([[mt.ISSUE_NUMBER,parseInt(i)]])}}class Dl{static decodeRow(i,o,a){let c=wt.findGuardPattern(o,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Li).decodeRow(i,o,c)}catch{return(new zs).decodeRow(i,o,c)}}}Dl.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class We extends wt{constructor(){super(),this.decodeRowStringBuffer="",We.L_AND_G_PATTERNS=We.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let o=We.L_PATTERNS[i-10],a=new Int32Array(o.length);for(let c=0;c<o.length;c++)a[c]=o[o.length-c-1];We.L_AND_G_PATTERNS[i]=a}}decodeRow(i,o,a){let c=We.findStartGuardPattern(o),u=null==a?null:a.get(rt.NEED_RESULT_POINT_CALLBACK);if(null!=u){const B=new oe((c[0]+c[1])/2,i);u.foundPossibleResultPoint(B)}let d=this.decodeMiddle(o,c,this.decodeRowStringBuffer),h=d.rowOffset,p=d.resultString;if(null!=u){const B=new oe(h,i);u.foundPossibleResultPoint(B)}let y=this.decodeEnd(o,h);if(null!=u){const B=new oe((y[0]+y[1])/2,i);u.foundPossibleResultPoint(B)}let C=y[1],D=C+(C-y[0]);if(D>=o.getSize()||!o.isRange(C,D,!1))throw new V;let I=p.toString();if(I.length<8)throw new $;if(!We.checkChecksum(I))throw new It;let b=(c[1]+c[0])/2,T=(y[1]+y[0])/2,M=this.getBarcodeFormat(),N=[new oe(b,i),new oe(T,i)],L=new Bt(I,null,0,N,M,(new Date).getTime()),W=0;try{let B=Dl.decodeRow(i,o,y[1]);L.putMetadata(mt.UPC_EAN_EXTENSION,B.getText()),L.putAllMetadata(B.getResultMetadata()),L.addResultPoints(B.getResultPoints()),W=B.getText().length}catch{}let Z=null==a?null:a.get(rt.ALLOWED_EAN_EXTENSIONS);if(null!=Z){let B=!1;for(let Me in Z)if(W.toString()===Me){B=!0;break}if(!B)throw new V}return L}decodeEnd(i,o){return We.findGuardPattern(i,o,!1,We.START_END_PATTERN,new Int32Array(We.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return We.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(0===o)return!1;let a=parseInt(i.charAt(o-1),10);return We.getStandardUPCEANChecksum(i.substring(0,o-1))===a}static getStandardUPCEANChecksum(i){let o=i.length,a=0;for(let c=o-1;c>=0;c-=2){let u=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new $;a+=u}a*=3;for(let c=o-2;c>=0;c-=2){let u=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new $;a+=u}return(1e3-a)%10}}let fi=(()=>{class x extends We{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(o,a,c){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=o.getSize(),h=a[1],p=0;for(let C=0;C<6&&h<d;C++){let D=We.decodeDigit(o,u,h,We.L_AND_G_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+D%10);for(let I of u)h+=I;D>=10&&(p|=1<<5-C)}c=x.determineFirstDigit(c,p),h=We.findGuardPattern(o,h,!0,We.MIDDLE_PATTERN,new Int32Array(We.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&h<d;C++){let D=We.decodeDigit(o,u,h,We.L_PATTERNS);c+=String.fromCharCode("0".charCodeAt(0)+D);for(let I of u)h+=I}return{rowOffset:h,resultString:c}}getBarcodeFormat(){return ce.EAN_13}static determineFirstDigit(o,a){for(let c=0;c<10;c++)if(a===this.FIRST_DIGIT_ENCODINGS[c])return String.fromCharCode("0".charCodeAt(0)+c)+o;throw new V}}return x.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],x})();class Mo extends We{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=i.getSize(),d=o[1];for(let p=0;p<4&&d<u;p++){let y=We.decodeDigit(i,c,d,We.L_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+y);for(let C of c)d+=C}d=We.findGuardPattern(i,d,!0,We.MIDDLE_PATTERN,new Int32Array(We.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<4&&d<u;p++){let y=We.decodeDigit(i,c,d,We.L_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+y);for(let C of c)d+=C}return{rowOffset:d,resultString:a}}getBarcodeFormat(){return ce.EAN_8}}class No extends We{constructor(){super(...arguments),this.ean13Reader=new fi}getBarcodeFormat(){return ce.UPC_A}decode(i,o){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,o,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,o,a))}decodeMiddle(i,o,a){return this.ean13Reader.decodeMiddle(i,o,a)}maybeReturnResult(i){let o=i.getText();if("0"===o.charAt(0)){let a=new Bt(o.substring(1),null,null,i.getResultPoints(),ce.UPC_A);return null!=i.getResultMetadata()&&a.putAllMetadata(i.getResultMetadata()),a}throw new V}reset(){this.ean13Reader.reset()}}class xn extends We{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,o,a){const c=this.decodeMiddleCounters.map(y=>y);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=i.getSize();let d=o[1],h=0;for(let y=0;y<6&&d<u;y++){const C=xn.decodeDigit(i,c,d,xn.L_AND_G_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+C%10);for(let D of c)d+=D;C>=10&&(h|=1<<5-y)}return{rowOffset:d,resultString:xn.determineNumSysAndCheckDigit(a,h)}}decodeEnd(i,o){return xn.findGuardPatternWithoutCounters(i,o,!0,xn.MIDDLE_END_PATTERN)}checkChecksum(i){return We.checkChecksum(xn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,o){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c])return String.fromCharCode("0".charCodeAt(0)+a)+i+String.fromCharCode("0".charCodeAt(0)+c);throw V.getNotFoundInstance()}getBarcodeFormat(){return ce.UPC_E}static convertUPCEtoUPCA(i){const o=i.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new Ge;a.append(i.charAt(0));let c=o[5];switch(c){case 0:case 1:case 2:a.appendChars(o,0,2),a.append(c),a.append("0000"),a.appendChars(o,2,3);break;case 3:a.appendChars(o,0,3),a.append("00000"),a.appendChars(o,3,2);break;case 4:a.appendChars(o,0,4),a.append("00000"),a.append(o[4]);break;default:a.appendChars(o,0,5),a.append("0000"),a.append(c)}return i.length>=8&&a.append(i.charAt(7)),a.toString()}}xn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),xn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Pi extends bt{constructor(i){super();let o=null==i?null:i.get(rt.POSSIBLE_FORMATS),a=[];nt(o)?(a.push(new fi),a.push(new No),a.push(new Mo),a.push(new xn)):(o.indexOf(ce.EAN_13)>-1&&a.push(new fi),o.indexOf(ce.UPC_A)>-1&&a.push(new No),o.indexOf(ce.EAN_8)>-1&&a.push(new Mo),o.indexOf(ce.UPC_E)>-1&&a.push(new xn)),this.readers=a}decodeRow(i,o,a){for(let c of this.readers)try{const u=c.decodeRow(i,o,a),d=u.getBarcodeFormat()===ce.EAN_13&&"0"===u.getText().charAt(0),h=null==a?null:a.get(rt.POSSIBLE_FORMATS),p=null==h||h.includes(ce.UPC_A);if(d&&p){const y=u.getRawBytes(),C=new Bt(u.getText().substring(1),y,y?y.length:null,u.getResultPoints(),ce.UPC_A);return C.putAllMetadata(u.getResultMetadata()),C}return u}catch{}throw new V}reset(){for(let i of this.readers)i.reset()}}let Cr=(()=>{class x extends bt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(o,a){for(let c=0;c<a.length;c++)if(bt.patternMatchVariance(o,a[c],x.MAX_INDIVIDUAL_VARIANCE)<x.MAX_AVG_VARIANCE)return c;throw new V}static count(o){return Ve.sum(new Int32Array(o))}static increment(o,a){let c=0,u=a[0];for(let d=1;d<o.length;d++)a[d]>u&&(u=a[d],c=d);o[c]++}static decrement(o,a){let c=0,u=a[0];for(let d=1;d<o.length;d++)a[d]<u&&(u=a[d],c=d);o[c]--}static isFinderPattern(o){let a=o[0]+o[1],u=a/(a+o[2]+o[3]);if(u>=x.MIN_FINDER_PATTERN_RATIO&&u<=x.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let p of o)p>h&&(h=p),p<d&&(d=p);return h<10*d}return!1}}return x.MAX_AVG_VARIANCE=.2,x.MAX_INDIVIDUAL_VARIANCE=.45,x.MIN_FINDER_PATTERN_RATIO=9.5/12,x.MAX_FINDER_PATTERN_RATIO=12.5/14,x})();class Er{constructor(i,o){this.value=i,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){return i instanceof Er&&this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class hi{constructor(i,o,a,c,u){this.value=i,this.startEnd=o,this.value=i,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new oe(a,u)),this.resultPoints.push(new oe(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){return i instanceof hi&&this.value===i.value}hashCode(){return this.value}}class _n{constructor(){}static getRSSvalue(i,o,a){let c=0;for(let p of i)c+=p;let u=0,d=0,h=i.length;for(let p=0;p<h-1;p++){let y;for(y=1,d|=1<<p;y<i[p];y++,d&=~(1<<p)){let C=_n.combins(c-y-1,h-p-2);if(a&&0===d&&c-y-(h-p-1)>=h-p-1&&(C-=_n.combins(c-y-(h-p),h-p-2)),h-p-1>1){let D=0;for(let I=c-y-(h-p-2);I>o;I--)D+=_n.combins(c-y-I-1,h-p-3);C-=D*(h-1-p)}else c-y>o&&C--;u+=C}c-=y}return u}static combins(i,o){let a,c;i-o>o?(c=o,a=i-o):(c=i-o,a=o);let u=1,d=1;for(let h=i;h>a;h--)u*=h,d<=c&&(u/=d,d++);for(;d<=c;)u/=d,d++;return u}}class cn{constructor(i,o){o?this.decodedInformation=null:(this.finished=i,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Oo{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}let bn=(()=>{class x extends Oo{constructor(o,a){super(o),this.value=a}getValue(){return this.value}isFNC1(){return this.value===x.FNC1}}return x.FNC1="$",x})();class Dr extends Oo{constructor(i,o,a){super(i),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let Gr=(()=>{class x extends Oo{constructor(o,a,c){if(super(o),a<0||a>10||c<0||c>10)throw new $;this.firstDigit=a,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===x.FNC1}isSecondDigitFNC1(){return this.secondDigit===x.FNC1}isAnyFNC1(){return this.firstDigit===x.FNC1||this.secondDigit===x.FNC1}}return x.FNC1=10,x})();class ee{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new V;let o=i.substring(0,2);for(let u of ee.TWO_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(2,u[2],i):ee.processFixedAI(2,u[1],i);if(i.length<3)throw new V;let a=i.substring(0,3);for(let u of ee.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(3,u[2],i):ee.processFixedAI(3,u[1],i);for(let u of ee.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(4,u[2],i):ee.processFixedAI(4,u[1],i);if(i.length<4)throw new V;let c=i.substring(0,4);for(let u of ee.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===ee.VARIABLE_LENGTH?ee.processVariableAI(4,u[2],i):ee.processFixedAI(4,u[1],i);throw new V}static processFixedAI(i,o,a){if(a.length<i)throw new V;let c=a.substring(0,i);if(a.length<i+o)throw new V;let u=a.substring(i,i+o),d=a.substring(i+o),h="("+c+")"+u,p=ee.parseFieldsInGeneralPurpose(d);return null==p?h:h+p}static processVariableAI(i,o,a){let u,c=a.substring(0,i);u=a.length<i+o?a.length:i+o;let d=a.substring(i,u),h=a.substring(u),p="("+c+")"+d,y=ee.parseFieldsInGeneralPurpose(h);return null==y?p:p+y}}ee.VARIABLE_LENGTH=[],ee.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ee.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ee.VARIABLE_LENGTH,20],["22",ee.VARIABLE_LENGTH,29],["30",ee.VARIABLE_LENGTH,8],["37",ee.VARIABLE_LENGTH,8],["90",ee.VARIABLE_LENGTH,30],["91",ee.VARIABLE_LENGTH,30],["92",ee.VARIABLE_LENGTH,30],["93",ee.VARIABLE_LENGTH,30],["94",ee.VARIABLE_LENGTH,30],["95",ee.VARIABLE_LENGTH,30],["96",ee.VARIABLE_LENGTH,30],["97",ee.VARIABLE_LENGTH,3],["98",ee.VARIABLE_LENGTH,30],["99",ee.VARIABLE_LENGTH,30]],ee.THREE_DIGIT_DATA_LENGTH=[["240",ee.VARIABLE_LENGTH,30],["241",ee.VARIABLE_LENGTH,30],["242",ee.VARIABLE_LENGTH,6],["250",ee.VARIABLE_LENGTH,30],["251",ee.VARIABLE_LENGTH,30],["253",ee.VARIABLE_LENGTH,17],["254",ee.VARIABLE_LENGTH,20],["400",ee.VARIABLE_LENGTH,30],["401",ee.VARIABLE_LENGTH,30],["402",17],["403",ee.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ee.VARIABLE_LENGTH,20],["421",ee.VARIABLE_LENGTH,15],["422",3],["423",ee.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ee.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ee.VARIABLE_LENGTH,15],["391",ee.VARIABLE_LENGTH,18],["392",ee.VARIABLE_LENGTH,15],["393",ee.VARIABLE_LENGTH,18],["703",ee.VARIABLE_LENGTH,30]],ee.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ee.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ee.VARIABLE_LENGTH,20],["8003",ee.VARIABLE_LENGTH,30],["8004",ee.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ee.VARIABLE_LENGTH,30],["8008",ee.VARIABLE_LENGTH,12],["8018",18],["8020",ee.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ee.VARIABLE_LENGTH,70],["8200",ee.VARIABLE_LENGTH,70]];class Wr{constructor(i){this.buffer=new Ge,this.information=i}decodeAllCodes(i,o){let a=o,c=null;for(;;){let u=this.decodeGeneralPurposeField(a,c),d=ee.parseFieldsInGeneralPurpose(u.getNewString());if(null!=d&&i.append(d),c=u.isRemaining()?""+u.getRemainingValue():null,a===u.getNewPosition())break;a=u.getNewPosition()}return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let o=i;o<i+3;++o)if(this.information.get(o))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(i,4);return new Gr(this.information.getSize(),0===u?Gr.FNC1:u-1,Gr.FNC1)}let o=this.extractNumericValueFromBitArray(i,7);return new Gr(i+7,(o-8)/11,(o-8)%11)}extractNumericValueFromBitArray(i,o){return Wr.extractNumericValueFromBitArray(this.information,i,o)}static extractNumericValueFromBitArray(i,o,a){let c=0;for(let u=0;u<a;++u)i.get(o+u)&&(c|=1<<a-u-1);return c}decodeGeneralPurposeField(i,o){this.buffer.setLengthToZero(),null!=o&&this.buffer.append(o),this.current.setPosition(i);let a=this.parseBlocks();return null!=a&&a.isRemaining()?new Dr(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Dr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,o;do{let a=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),i=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),i=o.isFinished()):(o=this.parseNumericBlock(),i=o.isFinished()),a===this.current.getPosition()&&!i)break}while(!i);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let o;return o=i.isSecondDigitFNC1()?new Dr(this.current.getPosition(),this.buffer.toString()):new Dr(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new cn(!0,o)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let o=new Dr(this.current.getPosition(),this.buffer.toString());return new cn(!0,o)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new cn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new Dr(this.current.getPosition(),this.buffer.toString());return new cn(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new cn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new Dr(this.current.getPosition(),this.buffer.toString());return new cn(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new cn(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,7);if(a>=64&&a<116)return!0;if(i+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,8);return c>=232&&c<253}decodeIsoIec646(i){let o=this.extractNumericValueFromBitArray(i,5);if(15===o)return new bn(i+5,bn.FNC1);if(o>=5&&o<15)return new bn(i+5,"0"+(o-5));let u,a=this.extractNumericValueFromBitArray(i,7);if(a>=64&&a<90)return new bn(i+7,""+(a+1));if(a>=90&&a<116)return new bn(i+7,""+(a+7));switch(this.extractNumericValueFromBitArray(i,8)){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new $}return new bn(i+8,u)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,6);return a>=16&&a<63}decodeAlphanumeric(i){let o=this.extractNumericValueFromBitArray(i,5);if(15===o)return new bn(i+5,bn.FNC1);if(o>=5&&o<15)return new bn(i+5,"0"+(o-5));let c,a=this.extractNumericValueFromBitArray(i,6);if(a>=32&&a<58)return new bn(i+6,""+(a+33));switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new rr("Decoding invalid alphanumeric value: "+a)}return new bn(i+6,c)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<5&&o+i<this.information.getSize();++o)if(2===o){if(!this.information.get(i+2))return!1}else if(this.information.get(i+o))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let o=i;o<i+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<4&&o+i<this.information.getSize();++o)if(this.information.get(i+o))return!1;return!0}}class Ro{constructor(i){this.information=i,this.generalDecoder=new Wr(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let Mt=(()=>{class x extends Ro{constructor(o){super(o)}encodeCompressedGtin(o,a){o.append("(01)");let c=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,a,c)}encodeCompressedGtinWithoutAI(o,a,c){for(let u=0;u<4;++u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*u,10);d/100==0&&o.append("0"),d/10==0&&o.append("0"),o.append(d)}x.appendCheckDigit(o,c)}static appendCheckDigit(o,a){let c=0;for(let u=0;u<13;u++){let d=o.charAt(u+a).charCodeAt(0)-"0".charCodeAt(0);c+=0==(1&u)?3*d:d}c=10-c%10,10===c&&(c=0),o.append(c)}}return x.GTIN_SIZE=40,x})(),Al=(()=>{class x extends Mt{constructor(o){super(o)}parseInformation(){let o=new Ge;o.append("(01)");let a=o.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(x.HEADER_SIZE,4);return o.append(c),this.encodeCompressedGtinWithoutAI(o,x.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(o,x.HEADER_SIZE+44)}}return x.HEADER_SIZE=4,x})(),Ws=(()=>{class x extends Ro{constructor(o){super(o)}parseInformation(){let o=new Ge;return this.getGeneralDecoder().decodeAllCodes(o,x.HEADER_SIZE)}}return x.HEADER_SIZE=5,x})();class Fi extends Mt{constructor(i){super(i)}encodeCompressedWeight(i,o,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(o,a);this.addWeightCode(i,c);let u=this.checkWeight(c),d=1e5;for(let h=0;h<5;++h)u/d==0&&i.append("0"),d/=10;i.append(u)}}let Lo=(()=>{class x extends Fi{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()!=x.HEADER_SIZE+Fi.GTIN_SIZE+x.WEIGHT_SIZE)throw new V;let o=new Ge;return this.encodeCompressedGtin(o,x.HEADER_SIZE),this.encodeCompressedWeight(o,x.HEADER_SIZE+Fi.GTIN_SIZE,x.WEIGHT_SIZE),o.toString()}}return x.HEADER_SIZE=5,x.WEIGHT_SIZE=15,x})();class Wd extends Lo{constructor(i){super(i)}addWeightCode(i,o){i.append("(3103)")}checkWeight(i){return i}}class Il extends Lo{constructor(i){super(i)}addWeightCode(i,o){i.append(o<1e4?"(3202)":"(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}let _l=(()=>{class x extends Mt{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<x.HEADER_SIZE+Mt.GTIN_SIZE)throw new V;let o=new Ge;this.encodeCompressedGtin(o,x.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(x.HEADER_SIZE+Mt.GTIN_SIZE,x.LAST_DIGIT_SIZE);o.append("(392"),o.append(a),o.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(x.HEADER_SIZE+Mt.GTIN_SIZE+x.LAST_DIGIT_SIZE,null);return o.append(c.getNewString()),o.toString()}}return x.HEADER_SIZE=8,x.LAST_DIGIT_SIZE=2,x})(),Po=(()=>{class x extends Mt{constructor(o){super(o)}parseInformation(){if(this.getInformation().getSize()<x.HEADER_SIZE+Mt.GTIN_SIZE)throw new V;let o=new Ge;this.encodeCompressedGtin(o,x.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(x.HEADER_SIZE+Mt.GTIN_SIZE,x.LAST_DIGIT_SIZE);o.append("(393"),o.append(a),o.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(x.HEADER_SIZE+Mt.GTIN_SIZE+x.LAST_DIGIT_SIZE,x.FIRST_THREE_DIGITS_SIZE);c/100==0&&o.append("0"),c/10==0&&o.append("0"),o.append(c);let u=this.getGeneralDecoder().decodeGeneralPurposeField(x.HEADER_SIZE+Mt.GTIN_SIZE+x.LAST_DIGIT_SIZE+x.FIRST_THREE_DIGITS_SIZE,null);return o.append(u.getNewString()),o.toString()}}return x.HEADER_SIZE=8,x.LAST_DIGIT_SIZE=2,x.FIRST_THREE_DIGITS_SIZE=10,x})(),Ar=(()=>{class x extends Fi{constructor(o,a,c){super(o),this.dateCode=c,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=x.HEADER_SIZE+x.GTIN_SIZE+x.WEIGHT_SIZE+x.DATE_SIZE)throw new V;let o=new Ge;return this.encodeCompressedGtin(o,x.HEADER_SIZE),this.encodeCompressedWeight(o,x.HEADER_SIZE+x.GTIN_SIZE,x.WEIGHT_SIZE),this.encodeCompressedDate(o,x.HEADER_SIZE+x.GTIN_SIZE+x.WEIGHT_SIZE),o.toString()}encodeCompressedDate(o,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(a,x.DATE_SIZE);if(38400==c)return;o.append("("),o.append(this.dateCode),o.append(")");let u=c%32;c/=32;let d=c%12+1;c/=12;let h=c;h/10==0&&o.append("0"),o.append(h),d/10==0&&o.append("0"),o.append(d),u/10==0&&o.append("0"),o.append(u)}addWeightCode(o,a){o.append("("),o.append(this.firstAIdigits),o.append(a/1e5),o.append(")")}checkWeight(o){return o%1e5}}return x.HEADER_SIZE=8,x.WEIGHT_SIZE=20,x.DATE_SIZE=16,x})();function Ys(x){try{if(x.get(1))return new Al(x);if(!x.get(2))return new Ws(x);switch(Wr.extractNumericValueFromBitArray(x,1,4)){case 4:return new Wd(x);case 5:return new Il(x)}switch(Wr.extractNumericValueFromBitArray(x,1,5)){case 12:return new _l(x);case 13:return new Po(x)}switch(Wr.extractNumericValueFromBitArray(x,1,7)){case 56:return new Ar(x,"310","11");case 57:return new Ar(x,"320","11");case 58:return new Ar(x,"310","13");case 59:return new Ar(x,"320","13");case 60:return new Ar(x,"310","15");case 61:return new Ar(x,"320","15");case 62:return new Ar(x,"310","17");case 63:return new Ar(x,"320","17")}}catch(i){throw console.log(i),new rr("unknown decoder: "+x)}}class ir{constructor(i,o,a,c){this.leftchar=i,this.rightchar=o,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(i,o){return i instanceof ir&&ir.equalsOrNull(i.leftchar,o.leftchar)&&ir.equalsOrNull(i.rightchar,o.rightchar)&&ir.equalsOrNull(i.finderpattern,o.finderpattern)}static equalsOrNull(i,o){return null===i?null===o:ir.equals(i,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Bi{constructor(i,o,a){this.pairs=i,this.rowNumber=o,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,o){return i instanceof Bi&&this.checkEqualitity(i,o)&&i.wasReversed===o.wasReversed}checkEqualitity(i,o){if(!i||!o)return;let a;return i.forEach((c,u)=>{o.forEach(d=>{c.getLeftChar().getValue()===d.getLeftChar().getValue()&&c.getRightChar().getValue()===d.getRightChar().getValue()&&c.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(a=!0)})}),a}}class j extends Cr{constructor(i){super(...arguments),this.pairs=new Array(j.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===i}decodeRow(i,o,a){this.pairs.length=0,this.startFromEven=!1;try{return j.constructResult(this.decodeRow2pairs(i,o))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,j.constructResult(this.decodeRow2pairs(i,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,o){let c,a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,i))}catch(u){if(u instanceof V){if(!this.pairs.length)throw new V;a=!0}}if(this.checkChecksum())return this.pairs;if(c=!!this.rows.length,this.storeRow(i,!1),c){let u=this.checkRowsBoolean(!1);if(null!=u||(u=this.checkRowsBoolean(!0),null!=u))return u}throw new V}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return i&&(this.rows=this.rows.reverse()),o}checkRows(i,o){for(let a=o;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let d of i)this.pairs.push(d.getPairs());if(this.pairs.push(c.getPairs()),!j.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(i);u.push(c);try{return this.checkRows(u,a+1)}catch(d){this.verbose&&console.log(d)}}throw new V}static isValidSequence(i){for(let o of j.FINDER_PATTERN_SEQUENCES){if(i.length>o.length)continue;let a=!0;for(let c=0;c<i.length;c++)if(i[c].getFinderPattern().getValue()!=o[c]){a=!1;break}if(a)return!0}return!1}storeRow(i,o){let a=0,c=!1,u=!1;for(;a<this.rows.length;){let d=this.rows[a];if(d.getRowNumber()>i){u=d.isEquivalent(this.pairs);break}c=d.isEquivalent(this.pairs),a++}u||c||j.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new Bi(this.pairs,i,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,o){for(let a of o)if(a.getPairs().length!==i.length)for(let c of a.getPairs())for(let u of i)if(ir.equals(c,u))break}static isPartialRow(i,o){for(let a of o){let c=!0;for(let u of i){let d=!1;for(let h of a.getPairs())if(u.equals(h)){d=!0;break}if(!d){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(i){let c=Ys(class Gs{static buildBitArray(i){let o=2*i.length-1;null==i[i.length-1].getRightChar()&&(o-=1);let c=new Qe(12*o),u=0,h=i[0].getRightChar().getValue();for(let p=11;p>=0;--p)0!=(h&1<<p)&&c.set(u),u++;for(let p=1;p<i.length;++p){let y=i[p],C=y.getLeftChar().getValue();for(let D=11;D>=0;--D)0!=(C&1<<D)&&c.set(u),u++;if(null!=y.getRightChar()){let D=y.getRightChar().getValue();for(let I=11;I>=0;--I)0!=(D&1<<I)&&c.set(u),u++}}return c}}.buildBitArray(i)).parseInformation(),u=i[0].getFinderPattern().getResultPoints(),d=i[i.length-1].getFinderPattern().getResultPoints();return new Bt(c,null,null,[u[0],u[1],d[0],d[1]],ce.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),o=i.getLeftChar(),a=i.getRightChar();if(null==a)return!1;let c=a.getChecksumPortion(),u=2;for(let h=1;h<this.pairs.size();++h){let p=this.pairs.get(h);c+=p.getLeftChar().getChecksumPortion(),u++;let y=p.getRightChar();null!=y&&(c+=y.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==o.getValue()}static getNextSecondBar(i,o){let a;return i.get(o)?(a=i.getNextUnset(o),a=i.getNextSet(a)):(a=i.getNextSet(o),a=i.getNextUnset(a)),a}retrieveNextPair(i,o,a){let c=o.length%2==0;this.startFromEven&&(c=!c);let u,d=!0,h=-1;do{this.findNextPair(i,o,h),u=this.parseFoundFinderPattern(i,a,c),null==u?h=j.getNextSecondBar(i,this.startEnd[0]):d=!1}while(d);let y,p=this.decodeDataCharacter(i,u,c,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new V;try{y=this.decodeDataCharacter(i,u,c,!1)}catch(C){y=null,this.verbose&&console.log(C)}return new ir(p,y,u,!0)}isEmptyPair(i){return 0===i.length}findNextPair(i,o,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d,u=i.getSize();d=a>=0?a:this.isEmptyPair(o)?0:o[o.length-1].getFinderPattern().getStartEnd()[1];let h=o.length%2!=0;this.startFromEven&&(h=!h);let p=!1;for(;d<u&&(p=!i.get(d),p);)d++;let y=0,C=d;for(let D=d;D<u;D++)if(i.get(D)!=p)c[y]++;else{if(3==y){if(h&&j.reverseCounters(c),j.isFinderPattern(c))return this.startEnd[0]=C,void(this.startEnd[1]=D);h&&j.reverseCounters(c),C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,y--}else y++;c[y]=1,p=!p}throw new V}static reverseCounters(i){let o=i.length;for(let a=0;a<o/2;++a){let c=i[a];i[a]=i[o-a-1],i[o-a-1]=c}}parseFoundFinderPattern(i,o,a){let c,u,d;if(a){let y=this.startEnd[0]-1;for(;y>=0&&!i.get(y);)y--;y++,c=this.startEnd[0]-y,u=y,d=this.startEnd[1]}else u=this.startEnd[0],d=i.getNextUnset(this.startEnd[1]+1),c=d-this.startEnd[1];let p,h=this.getDecodeFinderCounters();qe.arraycopy(h,0,h,1,h.length-1),h[0]=c;try{p=this.parseFinderValue(h,j.FINDER_PATTERNS)}catch{return null}return new hi(p,[u,d],u,d,o)}decodeDataCharacter(i,o,a,c){let u=this.getDataCharacterCounters();for(let ot=0;ot<u.length;ot++)u[ot]=0;if(c)j.recordPatternInReverse(i,o.getStartEnd()[0],u);else{j.recordPattern(i,o.getStartEnd()[1],u);for(let ot=0,Xt=u.length-1;ot<Xt;ot++,Xt--){let En=u[ot];u[ot]=u[Xt],u[Xt]=En}}let h=Ve.sum(new Int32Array(u))/17,p=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new V;let y=this.getOddCounts(),C=this.getEvenCounts(),D=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let ot=0;ot<u.length;ot++){let Xt=1*u[ot]/h,En=Xt+.5;if(En<1){if(Xt<.3)throw new V;En=1}else if(En>8){if(Xt>8.7)throw new V;En=8}let yi=ot/2;0==(1&ot)?(y[yi]=En,D[yi]=Xt-En):(C[yi]=En,I[yi]=Xt-En)}this.adjustOddEvenCounts(17);let b=4*o.getValue()+(a?0:2)+(c?0:1)-1,T=0,M=0;for(let ot=y.length-1;ot>=0;ot--)j.isNotA1left(o,a,c)&&(M+=y[ot]*j.WEIGHTS[b][2*ot]),T+=y[ot];let N=0;for(let ot=C.length-1;ot>=0;ot--)j.isNotA1left(o,a,c)&&(N+=C[ot]*j.WEIGHTS[b][2*ot+1]);let L=M+N;if(0!=(1&T)||T>13||T<4)throw new V;let W=(13-T)/2,Z=j.SYMBOL_WIDEST[W],B=9-Z,Me=_n.getRSSvalue(y,Z,!0),Ie=_n.getRSSvalue(C,B,!1);return new Er(Me*j.EVEN_TOTAL_SUBSET[W]+Ie+j.GSUM[W],L)}static isNotA1left(i,o,a){return!(0==i.getValue()&&o&&a)}adjustOddEvenCounts(i){let o=Ve.sum(new Int32Array(this.getOddCounts())),a=Ve.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;o>13?u=!0:o<4&&(c=!0);let d=!1,h=!1;a>13?h=!0:a<4&&(d=!0);let p=o+a-i,y=1==(1&o),C=0==(1&a);if(1==p)if(y){if(C)throw new V;u=!0}else{if(!C)throw new V;h=!0}else if(-1==p)if(y){if(C)throw new V;c=!0}else{if(!C)throw new V;d=!0}else{if(0!=p)throw new V;if(y){if(!C)throw new V;o<a?(c=!0,h=!0):(u=!0,d=!0)}else if(C)throw new V}if(c){if(u)throw new V;j.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&j.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(h)throw new V;j.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&j.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}j.SYMBOL_WIDEST=[7,5,4,3,1],j.EVEN_TOTAL_SUBSET=[4,20,52,104,204],j.GSUM=[0,348,1388,2948,3988],j.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],j.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],j.FINDER_PAT_A=0,j.FINDER_PAT_B=1,j.FINDER_PAT_C=2,j.FINDER_PAT_D=3,j.FINDER_PAT_E=4,j.FINDER_PAT_F=5,j.FINDER_PATTERN_SEQUENCES=[[j.FINDER_PAT_A,j.FINDER_PAT_A],[j.FINDER_PAT_A,j.FINDER_PAT_B,j.FINDER_PAT_B],[j.FINDER_PAT_A,j.FINDER_PAT_C,j.FINDER_PAT_B,j.FINDER_PAT_D],[j.FINDER_PAT_A,j.FINDER_PAT_E,j.FINDER_PAT_B,j.FINDER_PAT_D,j.FINDER_PAT_C],[j.FINDER_PAT_A,j.FINDER_PAT_E,j.FINDER_PAT_B,j.FINDER_PAT_D,j.FINDER_PAT_D,j.FINDER_PAT_F],[j.FINDER_PAT_A,j.FINDER_PAT_E,j.FINDER_PAT_B,j.FINDER_PAT_D,j.FINDER_PAT_E,j.FINDER_PAT_F,j.FINDER_PAT_F],[j.FINDER_PAT_A,j.FINDER_PAT_A,j.FINDER_PAT_B,j.FINDER_PAT_B,j.FINDER_PAT_C,j.FINDER_PAT_C,j.FINDER_PAT_D,j.FINDER_PAT_D],[j.FINDER_PAT_A,j.FINDER_PAT_A,j.FINDER_PAT_B,j.FINDER_PAT_B,j.FINDER_PAT_C,j.FINDER_PAT_C,j.FINDER_PAT_D,j.FINDER_PAT_E,j.FINDER_PAT_E],[j.FINDER_PAT_A,j.FINDER_PAT_A,j.FINDER_PAT_B,j.FINDER_PAT_B,j.FINDER_PAT_C,j.FINDER_PAT_C,j.FINDER_PAT_D,j.FINDER_PAT_E,j.FINDER_PAT_F,j.FINDER_PAT_F],[j.FINDER_PAT_A,j.FINDER_PAT_A,j.FINDER_PAT_B,j.FINDER_PAT_B,j.FINDER_PAT_C,j.FINDER_PAT_D,j.FINDER_PAT_D,j.FINDER_PAT_E,j.FINDER_PAT_E,j.FINDER_PAT_F,j.FINDER_PAT_F]],j.MAX_PAIRS=11;class bl extends Er{constructor(i,o,a){super(i,o),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ft extends Cr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,o,a){const c=this.decodePair(o,!1,i,a);ft.addOrTally(this.possibleLeftPairs,c),o.reverse();let u=this.decodePair(o,!0,i,a);ft.addOrTally(this.possibleRightPairs,u),o.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1)for(let h of this.possibleRightPairs)if(h.getCount()>1&&ft.checkChecksum(d,h))return ft.constructResult(d,h);throw new V}static addOrTally(i,o){if(null==o)return;let a=!1;for(let c of i)if(c.getValue()===o.getValue()){c.incrementCount(),a=!0;break}a||i.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,o){let a=4537077*i.getValue()+o.getValue(),c=new String(a).toString(),u=new Ge;for(let y=13-c.length;y>0;y--)u.append("0");u.append(c);let d=0;for(let y=0;y<13;y++){let C=u.charAt(y).charCodeAt(0)-"0".charCodeAt(0);d+=0==(1&y)?3*C:C}d=10-d%10,10===d&&(d=0),u.append(d.toString());let h=i.getFinderPattern().getResultPoints(),p=o.getFinderPattern().getResultPoints();return new Bt(u.toString(),null,0,[h[0],h[1],p[0],p[1]],ce.RSS_14,(new Date).getTime())}static checkChecksum(i,o){let a=(i.getChecksumPortion()+16*o.getChecksumPortion())%79,c=9*i.getFinderPattern().getValue()+o.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(i,o,a,c){try{let u=this.findFinderPattern(i,o),d=this.parseFoundFinderPattern(i,a,o,u),h=null==c?null:c.get(rt.NEED_RESULT_POINT_CALLBACK);if(null!=h){let C=(u[0]+u[1])/2;o&&(C=i.getSize()-1-C),h.foundPossibleResultPoint(new oe(C,a))}let p=this.decodeDataCharacter(i,d,!0),y=this.decodeDataCharacter(i,d,!1);return new bl(1597*p.getValue()+y.getValue(),p.getChecksumPortion()+4*y.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(i,o,a){let c=this.getDataCharacterCounters();for(let N=0;N<c.length;N++)c[N]=0;if(a)bt.recordPatternInReverse(i,o.getStartEnd()[0],c);else{bt.recordPattern(i,o.getStartEnd()[1]+1,c);for(let N=0,L=c.length-1;N<L;N++,L--){let W=c[N];c[N]=c[L],c[L]=W}}let u=a?16:15,d=Ve.sum(new Int32Array(c))/u,h=this.getOddCounts(),p=this.getEvenCounts(),y=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let N=0;N<c.length;N++){let L=c[N]/d,W=Math.floor(L+.5);W<1?W=1:W>8&&(W=8);let Z=Math.floor(N/2);0==(1&N)?(h[Z]=W,y[Z]=L-W):(p[Z]=W,C[Z]=L-W)}this.adjustOddEvenCounts(a,u);let D=0,I=0;for(let N=h.length-1;N>=0;N--)I*=9,I+=h[N],D+=h[N];let b=0,T=0;for(let N=p.length-1;N>=0;N--)b*=9,b+=p[N],T+=p[N];let M=I+3*b;if(a){if(0!=(1&D)||D>12||D<4)throw new V;let N=(12-D)/2,L=ft.OUTSIDE_ODD_WIDEST[N],W=9-L,Z=_n.getRSSvalue(h,L,!1),B=_n.getRSSvalue(p,W,!0);return new Er(Z*ft.OUTSIDE_EVEN_TOTAL_SUBSET[N]+B+ft.OUTSIDE_GSUM[N],M)}{if(0!=(1&T)||T>10||T<4)throw new V;let N=(10-T)/2,L=ft.INSIDE_ODD_WIDEST[N],W=9-L,Z=_n.getRSSvalue(h,L,!0),B=_n.getRSSvalue(p,W,!1);return new Er(B*ft.INSIDE_ODD_TOTAL_SUBSET[N]+Z+ft.INSIDE_GSUM[N],M)}}findFinderPattern(i,o){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=i.getSize(),u=!1,d=0;for(;d<c&&(u=!i.get(d),o!==u);)d++;let h=0,p=d;for(let y=d;y<c;y++)if(i.get(y)!==u)a[h]++;else{if(3===h){if(Cr.isFinderPattern(a))return[p,y];p+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,h--}else h++;a[h]=1,u=!u}throw new V}parseFoundFinderPattern(i,o,a,c){let u=i.get(c[0]),d=c[0]-1;for(;d>=0&&u!==i.get(d);)d--;d++;const h=c[0]-d,p=this.getDecodeFinderCounters(),y=new Int32Array(p.length);qe.arraycopy(p,0,y,1,p.length-1),y[0]=h;const C=this.parseFinderValue(y,ft.FINDER_PATTERNS);let D=d,I=c[1];return a&&(D=i.getSize()-1-D,I=i.getSize()-1-I),new hi(C,[d,c[1]],D,I,o)}adjustOddEvenCounts(i,o){let a=Ve.sum(new Int32Array(this.getOddCounts())),c=Ve.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,h=!1,p=!1;i?(a>12?d=!0:a<4&&(u=!0),c>12?p=!0:c<4&&(h=!0)):(a>11?d=!0:a<5&&(u=!0),c>10?p=!0:c<4&&(h=!0));let y=a+c-o,C=(1&a)==(i?1:0),D=1==(1&c);if(1===y)if(C){if(D)throw new V;d=!0}else{if(!D)throw new V;p=!0}else if(-1===y)if(C){if(D)throw new V;u=!0}else{if(!D)throw new V;h=!0}else{if(0!==y)throw new V;if(C){if(!D)throw new V;a<c?(u=!0,p=!0):(d=!0,h=!0)}else if(D)throw new V}if(u){if(d)throw new V;Cr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Cr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(p)throw new V;Cr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Cr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ft.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ft.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ft.OUTSIDE_GSUM=[0,161,961,2015,2715],ft.INSIDE_GSUM=[0,336,1036,1516],ft.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ft.INSIDE_ODD_WIDEST=[2,4,6,8],ft.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Yr extends bt{constructor(i,o){super(),this.readers=[],this.verbose=!0===o;const a=i?i.get(rt.POSSIBLE_FORMATS):null,c=i&&void 0!==i.get(rt.ASSUME_CODE_39_CHECK_DIGIT);a?((a.includes(ce.EAN_13)||a.includes(ce.UPC_A)||a.includes(ce.EAN_8)||a.includes(ce.UPC_E))&&this.readers.push(new Pi(i)),a.includes(ce.CODE_39)&&this.readers.push(new Hs(c)),a.includes(ce.CODE_128)&&this.readers.push(new X),a.includes(ce.ITF)&&this.readers.push(new Ke),a.includes(ce.RSS_14)&&this.readers.push(new ft),a.includes(ce.RSS_EXPANDED)&&this.readers.push(new j(this.verbose))):(this.readers.push(new Pi(i)),this.readers.push(new Hs),this.readers.push(new Pi(i)),this.readers.push(new X),this.readers.push(new Ke),this.readers.push(new ft),this.readers.push(new j(this.verbose)))}decodeRow(i,o,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(i,o,a)}catch{}throw new V}reset(){this.readers.forEach(i=>i.reset())}}class je{constructor(i,o,a){this.ecCodewords=i,this.ecBlocks=[o],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class He{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Oe{constructor(i,o,a,c,u,d){this.versionNumber=i,this.symbolSizeRows=o,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=d;let h=0;const p=d.getECCodewords(),y=d.getECBlocks();for(let C of y)h+=C.getCount()*(C.getDataCodewords()+p);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,o){if(0!=(1&i)||0!=(1&o))throw new $;for(let a of Oe.VERSIONS)if(a.symbolSizeRows===i&&a.symbolSizeColumns===o)return a;throw new $}toString(){return""+this.versionNumber}static buildVersions(){return[new Oe(1,10,10,8,8,new je(5,new He(1,3))),new Oe(2,12,12,10,10,new je(7,new He(1,5))),new Oe(3,14,14,12,12,new je(10,new He(1,8))),new Oe(4,16,16,14,14,new je(12,new He(1,12))),new Oe(5,18,18,16,16,new je(14,new He(1,18))),new Oe(6,20,20,18,18,new je(18,new He(1,22))),new Oe(7,22,22,20,20,new je(20,new He(1,30))),new Oe(8,24,24,22,22,new je(24,new He(1,36))),new Oe(9,26,26,24,24,new je(28,new He(1,44))),new Oe(10,32,32,14,14,new je(36,new He(1,62))),new Oe(11,36,36,16,16,new je(42,new He(1,86))),new Oe(12,40,40,18,18,new je(48,new He(1,114))),new Oe(13,44,44,20,20,new je(56,new He(1,144))),new Oe(14,48,48,22,22,new je(68,new He(1,174))),new Oe(15,52,52,24,24,new je(42,new He(2,102))),new Oe(16,64,64,14,14,new je(56,new He(2,140))),new Oe(17,72,72,16,16,new je(36,new He(4,92))),new Oe(18,80,80,18,18,new je(48,new He(4,114))),new Oe(19,88,88,20,20,new je(56,new He(4,144))),new Oe(20,96,96,22,22,new je(68,new He(4,174))),new Oe(21,104,104,24,24,new je(56,new He(6,136))),new Oe(22,120,120,18,18,new je(68,new He(6,175))),new Oe(23,132,132,20,20,new je(62,new He(8,163))),new Oe(24,144,144,22,22,new je(62,new He(8,156),new He(2,155))),new Oe(25,8,18,6,16,new je(7,new He(1,5))),new Oe(26,8,32,6,14,new je(11,new He(1,10))),new Oe(27,12,26,10,24,new je(14,new He(1,16))),new Oe(28,12,36,10,16,new je(18,new He(1,22))),new Oe(29,16,36,14,16,new je(24,new He(1,32))),new Oe(30,16,48,14,22,new je(28,new He(1,49)))]}}Oe.VERSIONS=Oe.buildVersions();class Fo{constructor(i){const o=i.getHeight();if(o<8||o>144||0!=(1&o))throw new $;this.version=Fo.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new vt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const o=i.getHeight(),a=i.getWidth();return Oe.getVersionForDimensions(o,a)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let o=0,a=4,c=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let h=!1,p=!1,y=!1,C=!1;do{if(a!==u||0!==c||h)if(a!==u-2||0!==c||0==(3&d)||p)if(a!==u+4||2!==c||0!=(7&d)||y)if(a!==u-2||0!==c||4!=(7&d)||C){do{a<u&&c>=0&&!this.readMappingMatrix.get(c,a)&&(i[o++]=255&this.readUtah(a,c,u,d)),a-=2,c+=2}while(a>=0&&c<d);a+=1,c+=3;do{a>=0&&c<d&&!this.readMappingMatrix.get(c,a)&&(i[o++]=255&this.readUtah(a,c,u,d)),a+=2,c-=2}while(a<u&&c>=0);a+=3,c+=1}else i[o++]=255&this.readCorner4(u,d),a-=2,c+=2,C=!0;else i[o++]=255&this.readCorner3(u,d),a-=2,c+=2,y=!0;else i[o++]=255&this.readCorner2(u,d),a-=2,c+=2,p=!0;else i[o++]=255&this.readCorner1(u,d),a-=2,c+=2,h=!0}while(a<u||c<d);if(o!==this.version.getTotalCodewords())throw new $;return i}readModule(i,o,a,c){return i<0&&(i+=a,o+=4-(a+4&7)),o<0&&(o+=c,i+=4-(c+4&7)),this.readMappingMatrix.set(o,i),this.mappingBitMatrix.get(o,i)}readUtah(i,o,a,c){let u=0;return this.readModule(i-2,o-2,a,c)&&(u|=1),u<<=1,this.readModule(i-2,o-1,a,c)&&(u|=1),u<<=1,this.readModule(i-1,o-2,a,c)&&(u|=1),u<<=1,this.readModule(i-1,o-1,a,c)&&(u|=1),u<<=1,this.readModule(i-1,o,a,c)&&(u|=1),u<<=1,this.readModule(i,o-2,a,c)&&(u|=1),u<<=1,this.readModule(i,o-1,a,c)&&(u|=1),u<<=1,this.readModule(i,o,a,c)&&(u|=1),u}readCorner1(i,o){let a=0;return this.readModule(i-1,0,i,o)&&(a|=1),a<<=1,this.readModule(i-1,1,i,o)&&(a|=1),a<<=1,this.readModule(i-1,2,i,o)&&(a|=1),a<<=1,this.readModule(0,o-2,i,o)&&(a|=1),a<<=1,this.readModule(0,o-1,i,o)&&(a|=1),a<<=1,this.readModule(1,o-1,i,o)&&(a|=1),a<<=1,this.readModule(2,o-1,i,o)&&(a|=1),a<<=1,this.readModule(3,o-1,i,o)&&(a|=1),a}readCorner2(i,o){let a=0;return this.readModule(i-3,0,i,o)&&(a|=1),a<<=1,this.readModule(i-2,0,i,o)&&(a|=1),a<<=1,this.readModule(i-1,0,i,o)&&(a|=1),a<<=1,this.readModule(0,o-4,i,o)&&(a|=1),a<<=1,this.readModule(0,o-3,i,o)&&(a|=1),a<<=1,this.readModule(0,o-2,i,o)&&(a|=1),a<<=1,this.readModule(0,o-1,i,o)&&(a|=1),a<<=1,this.readModule(1,o-1,i,o)&&(a|=1),a}readCorner3(i,o){let a=0;return this.readModule(i-1,0,i,o)&&(a|=1),a<<=1,this.readModule(i-1,o-1,i,o)&&(a|=1),a<<=1,this.readModule(0,o-3,i,o)&&(a|=1),a<<=1,this.readModule(0,o-2,i,o)&&(a|=1),a<<=1,this.readModule(0,o-1,i,o)&&(a|=1),a<<=1,this.readModule(1,o-3,i,o)&&(a|=1),a<<=1,this.readModule(1,o-2,i,o)&&(a|=1),a<<=1,this.readModule(1,o-1,i,o)&&(a|=1),a}readCorner4(i,o){let a=0;return this.readModule(i-3,0,i,o)&&(a|=1),a<<=1,this.readModule(i-2,0,i,o)&&(a|=1),a<<=1,this.readModule(i-1,0,i,o)&&(a|=1),a<<=1,this.readModule(0,o-2,i,o)&&(a|=1),a<<=1,this.readModule(0,o-1,i,o)&&(a|=1),a<<=1,this.readModule(1,o-1,i,o)&&(a|=1),a<<=1,this.readModule(2,o-1,i,o)&&(a|=1),a<<=1,this.readModule(3,o-1,i,o)&&(a|=1),a}extractDataRegion(i){const o=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(i.getHeight()!==o)throw new te("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=o/c|0,h=a/u|0,C=new vt(h*u,d*c);for(let D=0;D<d;++D){const I=D*c;for(let b=0;b<h;++b){const T=b*u;for(let M=0;M<c;++M){const N=D*(c+2)+1+M,L=I+M;for(let W=0;W<u;++W)i.get(b*(u+2)+1+W,N)&&C.set(T+W,L)}}}return C}}class Bo{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o){const a=o.getECBlocks();let c=0;const u=a.getECBlocks();for(let M of u)c+=M.getCount();const d=new Array(c);let h=0;for(let M of u)for(let N=0;N<M.getCount();N++){const L=M.getDataCodewords(),W=a.getECCodewords()+L;d[h++]=new Bo(L,new Uint8Array(W))}const y=d[0].codewords.length-a.getECCodewords(),C=y-1;let D=0;for(let M=0;M<C;M++)for(let N=0;N<h;N++)d[N].codewords[M]=i[D++];const I=24===o.getVersionNumber(),b=I?8:h;for(let M=0;M<b;M++)d[M].codewords[y-1]=i[D++];const T=d[0].codewords.length;for(let M=y;M<T;M++)for(let N=0;N<h;N++){const L=I?(N+8)%h:N;d[L].codewords[I&&L>7?M-1:M]=i[D++]}if(D!==i.length)throw new te;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ko{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new te(""+i);let o=0,a=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(a>0){const d=8-a,h=i<d?i:d,p=d-h;o=(u[c]&255>>8-h<<p)>>p,i-=h,a+=h,8===a&&(a=0,c++)}if(i>0){for(;i>=8;)o=o<<8|255&u[c],c++,i-=8;if(i>0){const d=8-i;o=o<<i|(u[c]&255>>d<<d)>>d,a+=i}}return this.bitOffset=a,this.byteOffset=c,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ht=(()=>{return(x=ht||(ht={}))[x.PAD_ENCODE=0]="PAD_ENCODE",x[x.ASCII_ENCODE=1]="ASCII_ENCODE",x[x.C40_ENCODE=2]="C40_ENCODE",x[x.TEXT_ENCODE=3]="TEXT_ENCODE",x[x.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",x[x.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",x[x.BASE256_ENCODE=6]="BASE256_ENCODE",ht;var x})();class Pe{static decode(i){const o=new ko(i),a=new Ge,c=new Ge,u=new Array;let d=ht.ASCII_ENCODE;do{if(d===ht.ASCII_ENCODE)d=this.decodeAsciiSegment(o,a,c);else{switch(d){case ht.C40_ENCODE:this.decodeC40Segment(o,a);break;case ht.TEXT_ENCODE:this.decodeTextSegment(o,a);break;case ht.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,a);break;case ht.EDIFACT_ENCODE:this.decodeEdifactSegment(o,a);break;case ht.BASE256_ENCODE:this.decodeBase256Segment(o,a,u);break;default:throw new $}d=ht.ASCII_ENCODE}}while(d!==ht.PAD_ENCODE&&o.available()>0);return c.length()>0&&a.append(c.toString()),new ci(i,a.toString(),0===u.length?null:u,null)}static decodeAsciiSegment(i,o,a){let c=!1;do{let u=i.readBits(8);if(0===u)throw new $;if(u<=128)return c&&(u+=128),o.append(String.fromCharCode(u-1)),ht.ASCII_ENCODE;if(129===u)return ht.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&o.append("0"),o.append(""+d)}else switch(u){case 230:return ht.C40_ENCODE;case 231:return ht.BASE256_ENCODE;case 232:o.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:c=!0;break;case 236:o.append("[)>\x1e05\x1d"),a.insert(0,"\x1e\x04");break;case 237:o.append("[)>\x1e06\x1d"),a.insert(0,"\x1e\x04");break;case 238:return ht.ANSIX12_ENCODE;case 239:return ht.TEXT_ENCODE;case 240:return ht.EDIFACT_ENCODE;default:if(254!==u||0!==i.available())throw new $}}while(i.available()>0);return ht.ASCII_ENCODE}static decodeC40Segment(i,o){let a=!1;const c=[];let u=0;do{if(8===i.available())return;const d=i.readBits(8);if(254===d)return;this.parseTwoBytes(d,i.readBits(8),c);for(let h=0;h<3;h++){const p=c[h];switch(u){case 0:if(p<3)u=p+1;else{if(!(p<this.C40_BASIC_SET_CHARS.length))throw new $;{const y=this.C40_BASIC_SET_CHARS[p];a?(o.append(String.fromCharCode(y.charCodeAt(0)+128)),a=!1):o.append(y)}}break;case 1:a?(o.append(String.fromCharCode(p+128)),a=!1):o.append(String.fromCharCode(p)),u=0;break;case 2:if(p<this.C40_SHIFT2_SET_CHARS.length){const y=this.C40_SHIFT2_SET_CHARS[p];a?(o.append(String.fromCharCode(y.charCodeAt(0)+128)),a=!1):o.append(y)}else switch(p){case 27:o.append(String.fromCharCode(29));break;case 30:a=!0;break;default:throw new $}u=0;break;case 3:a?(o.append(String.fromCharCode(p+224)),a=!1):o.append(String.fromCharCode(p+96)),u=0;break;default:throw new $}}}while(i.available()>0)}static decodeTextSegment(i,o){let a=!1,c=[],u=0;do{if(8===i.available())return;const d=i.readBits(8);if(254===d)return;this.parseTwoBytes(d,i.readBits(8),c);for(let h=0;h<3;h++){const p=c[h];switch(u){case 0:if(p<3)u=p+1;else{if(!(p<this.TEXT_BASIC_SET_CHARS.length))throw new $;{const y=this.TEXT_BASIC_SET_CHARS[p];a?(o.append(String.fromCharCode(y.charCodeAt(0)+128)),a=!1):o.append(y)}}break;case 1:a?(o.append(String.fromCharCode(p+128)),a=!1):o.append(String.fromCharCode(p)),u=0;break;case 2:if(p<this.TEXT_SHIFT2_SET_CHARS.length){const y=this.TEXT_SHIFT2_SET_CHARS[p];a?(o.append(String.fromCharCode(y.charCodeAt(0)+128)),a=!1):o.append(y)}else switch(p){case 27:o.append(String.fromCharCode(29));break;case 30:a=!0;break;default:throw new $}u=0;break;case 3:if(!(p<this.TEXT_SHIFT3_SET_CHARS.length))throw new $;{const y=this.TEXT_SHIFT3_SET_CHARS[p];a?(o.append(String.fromCharCode(y.charCodeAt(0)+128)),a=!1):o.append(y),u=0}break;default:throw new $}}}while(i.available()>0)}static decodeAnsiX12Segment(i,o){const a=[];do{if(8===i.available())return;const c=i.readBits(8);if(254===c)return;this.parseTwoBytes(c,i.readBits(8),a);for(let u=0;u<3;u++){const d=a[u];switch(d){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(d<14)o.append(String.fromCharCode(d+44));else{if(!(d<40))throw new $;o.append(String.fromCharCode(d+51))}}}}while(i.available()>0)}static parseTwoBytes(i,o,a){let c=(i<<8)+o-1,u=Math.floor(c/1600);a[0]=u,c-=1600*u,u=Math.floor(c/40),a[1]=u,a[2]=c-40*u}static decodeEdifactSegment(i,o){do{if(i.available()<=16)return;for(let a=0;a<4;a++){let c=i.readBits(6);if(31===c){const u=8-i.getBitOffset();return void(8!==u&&i.readBits(u))}0==(32&c)&&(c|=64),o.append(String.fromCharCode(c))}}while(i.available()>0)}static decodeBase256Segment(i,o,a){let c=1+i.getByteOffset();const u=this.unrandomize255State(i.readBits(8),c++);let d;if(d=0===u?i.available()/8|0:u<250?u:250*(u-249)+this.unrandomize255State(i.readBits(8),c++),d<0)throw new $;const h=new Uint8Array(d);for(let p=0;p<d;p++){if(i.available()<8)throw new $;h[p]=this.unrandomize255State(i.readBits(8),c++)}a.push(h);try{o.append(Ft.decode(h,ye.ISO88591))}catch(p){throw new rr("Platform does not support required encoding: "+p.message)}}static unrandomize255State(i,o){const c=i-(149*o%255+1);return c>=0?c:c+256}}Pe.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Pe.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Pe.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Pe.TEXT_SHIFT2_SET_CHARS=Pe.C40_SHIFT2_SET_CHARS,Pe.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class Vo{constructor(){this.rsDecoder=new Oi(ke.DATA_MATRIX_FIELD_256)}decode(i){const o=new Fo(i),a=o.getVersion(),c=o.readCodewords(),u=Bo.getDataBlocks(c,a);let d=0;for(let y of u)d+=y.getNumDataCodewords();const h=new Uint8Array(d),p=u.length;for(let y=0;y<p;y++){const C=u[y],D=C.getCodewords(),I=C.getNumDataCodewords();this.correctErrors(D,I);for(let b=0;b<I;b++)h[b*p+y]=D[b]}return Pe.decode(h)}correctErrors(i,o){const a=new Int32Array(i);try{this.rsDecoder.decode(a,i.length-o)}catch{throw new It}for(let c=0;c<o;c++)i[c]=a[c]}}class me{constructor(i){this.image=i,this.rectangleDetector=new di(this.image)}detect(){const i=this.rectangleDetector.detect();let o=this.detectSolid1(i);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new V;o=this.shiftToModuleCenter(o);const a=o[0],c=o[1],u=o[2],d=o[3];let h=this.transitionsBetween(a,d)+1,p=this.transitionsBetween(u,d)+1;1==(1&h)&&(h+=1),1==(1&p)&&(p+=1),4*h<7*p&&4*p<7*h&&(h=p=Math.max(h,p));let y=me.sampleGrid(this.image,a,c,u,d,h,p);return new Ri(y,[a,c,u,d])}static shiftPoint(i,o,a){let c=(o.getX()-i.getX())/(a+1),u=(o.getY()-i.getY())/(a+1);return new oe(i.getX()+c,i.getY()+u)}static moveAway(i,o,a){let c=i.getX(),u=i.getY();return c<o?c-=1:c+=1,u<a?u-=1:u+=1,new oe(c,u)}detectSolid1(i){let o=i[0],a=i[1],c=i[3],u=i[2],d=this.transitionsBetween(o,a),h=this.transitionsBetween(a,c),p=this.transitionsBetween(c,u),y=this.transitionsBetween(u,o),C=d,D=[u,o,a,c];return C>h&&(C=h,D[0]=o,D[1]=a,D[2]=c,D[3]=u),C>p&&(C=p,D[0]=a,D[1]=c,D[2]=u,D[3]=o),C>y&&(D[0]=c,D[1]=u,D[2]=o,D[3]=a),D}detectSolid2(i){let o=i[0],a=i[1],c=i[2],u=i[3],d=this.transitionsBetween(o,u),h=me.shiftPoint(a,c,4*(d+1)),p=me.shiftPoint(c,a,4*(d+1));return this.transitionsBetween(h,o)<this.transitionsBetween(p,u)?(i[0]=o,i[1]=a,i[2]=c,i[3]=u):(i[0]=a,i[1]=c,i[2]=u,i[3]=o),i}correctTopRight(i){let o=i[0],a=i[1],c=i[2],u=i[3],d=this.transitionsBetween(o,u),h=this.transitionsBetween(a,u),p=me.shiftPoint(o,a,4*(h+1)),y=me.shiftPoint(c,a,4*(d+1));d=this.transitionsBetween(p,u),h=this.transitionsBetween(y,u);let C=new oe(u.getX()+(c.getX()-a.getX())/(d+1),u.getY()+(c.getY()-a.getY())/(d+1)),D=new oe(u.getX()+(o.getX()-a.getX())/(h+1),u.getY()+(o.getY()-a.getY())/(h+1));return this.isValid(C)?this.isValid(D)?this.transitionsBetween(p,C)+this.transitionsBetween(y,C)>this.transitionsBetween(p,D)+this.transitionsBetween(y,D)?C:D:C:this.isValid(D)?D:null}shiftToModuleCenter(i){let o=i[0],a=i[1],c=i[2],u=i[3],d=this.transitionsBetween(o,u)+1,h=this.transitionsBetween(c,u)+1,p=me.shiftPoint(o,a,4*h),y=me.shiftPoint(c,a,4*d);d=this.transitionsBetween(p,u)+1,h=this.transitionsBetween(y,u)+1,1==(1&d)&&(d+=1),1==(1&h)&&(h+=1);let I,b,C=(o.getX()+a.getX()+c.getX()+u.getX())/4,D=(o.getY()+a.getY()+c.getY()+u.getY())/4;return o=me.moveAway(o,C,D),a=me.moveAway(a,C,D),c=me.moveAway(c,C,D),u=me.moveAway(u,C,D),p=me.shiftPoint(o,a,4*h),p=me.shiftPoint(p,u,4*d),I=me.shiftPoint(a,o,4*h),I=me.shiftPoint(I,c,4*d),y=me.shiftPoint(c,u,4*h),y=me.shiftPoint(y,a,4*d),b=me.shiftPoint(u,c,4*h),b=me.shiftPoint(b,o,4*d),[p,I,y,b]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,o,a,c,u,d,h){return xr.getInstance().sampleGrid(i,d,h,.5,.5,d-.5,.5,d-.5,h-.5,.5,h-.5,o.getX(),o.getY(),u.getX(),u.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(i,o){let a=Math.trunc(i.getX()),c=Math.trunc(i.getY()),u=Math.trunc(o.getX()),d=Math.trunc(o.getY()),h=Math.abs(d-c)>Math.abs(u-a);if(h){let M=a;a=c,c=M,M=u,u=d,d=M}let p=Math.abs(u-a),y=Math.abs(d-c),C=-p/2,D=c<d?1:-1,I=a<u?1:-1,b=0,T=this.image.get(h?c:a,h?a:c);for(let M=a,N=c;M!==u;M+=I){let L=this.image.get(h?N:M,h?M:N);if(L!==T&&(b++,T=L),C+=y,C>0){if(N===d)break;N+=D,C-=p}}return b}}let Xr=(()=>{class x{constructor(){this.decoder=new Vo}decode(o,a=null){let c,u;if(null!=a&&a.has(rt.PURE_BARCODE)){const C=x.extractPureBits(o.getBlackMatrix());c=this.decoder.decode(C),u=x.NO_POINTS}else{const C=new me(o.getBlackMatrix()).detect();c=this.decoder.decode(C.getBits()),u=C.getPoints()}const d=c.getRawBytes(),h=new Bt(c.getText(),d,8*d.length,u,ce.DATA_MATRIX,qe.currentTimeMillis()),p=c.getByteSegments();null!=p&&h.putMetadata(mt.BYTE_SEGMENTS,p);const y=c.getECLevel();return null!=y&&h.putMetadata(mt.ERROR_CORRECTION_LEVEL,y),h}reset(){}static extractPureBits(o){const a=o.getTopLeftOnBit(),c=o.getBottomRightOnBit();if(null==a||null==c)throw new V;const u=this.moduleSize(a,o);let d=a[1],p=a[0];const C=(c[0]-p+1)/u,D=(c[1]-d+1)/u;if(C<=0||D<=0)throw new V;const I=u/2;d+=I,p+=I;const b=new vt(C,D);for(let T=0;T<D;T++){const M=d+T*u;for(let N=0;N<C;N++)o.get(p+N*u,M)&&b.set(N,T)}return b}static moduleSize(o,a){const c=a.getWidth();let u=o[0];const d=o[1];for(;u<c&&a.get(u,d);)u++;if(u===c)throw new V;const h=u-o[0];if(0===h)throw new V;return h}}return x.NO_POINTS=[],x})();var Wn=(()=>{return(x=Wn||(Wn={}))[x.L=0]="L",x[x.M=1]="M",x[x.Q=2]="Q",x[x.H=3]="H",Wn;var x})();class Q{constructor(i,o,a){this.value=i,this.stringValue=o,this.bits=a,Q.FOR_BITS.set(a,this),Q.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return Q.L;case"M":return Q.M;case"Q":return Q.Q;case"H":return Q.H;default:throw new ln(i+"not available")}}toString(){return this.stringValue}equals(i){return i instanceof Q&&this.value===i.value}static forBits(i){if(i<0||i>=Q.FOR_BITS.size)throw new te;return Q.FOR_BITS.get(i)}}Q.FOR_BITS=new Map,Q.FOR_VALUE=new Map,Q.L=new Q(Wn.L,"L",1),Q.M=new Q(Wn.M,"M",0),Q.Q=new Q(Wn.Q,"Q",3),Q.H=new Q(Wn.H,"H",2);class Nt{constructor(i){this.errorCorrectionLevel=Q.forBits(i>>3&3),this.dataMask=7&i}static numBitsDiffering(i,o){return Ce.bitCount(i^o)}static decodeFormatInformation(i,o){const a=Nt.doDecodeFormatInformation(i,o);return null!==a?a:Nt.doDecodeFormatInformation(i^Nt.FORMAT_INFO_MASK_QR,o^Nt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,o){let a=Number.MAX_SAFE_INTEGER,c=0;for(const u of Nt.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===i||d===o)return new Nt(u[1]);let h=Nt.numBitsDiffering(i,d);h<a&&(c=u[1],a=h),i!==o&&(h=Nt.numBitsDiffering(o,d),h<a&&(c=u[1],a=h))}return a<=3?new Nt(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){return i instanceof Nt&&this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}Nt.FORMAT_INFO_MASK_QR=21522,Nt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class R{constructor(i,...o){this.ecCodewordsPerBlock=i,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const o=this.ecBlocks;for(const a of o)i+=a.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class _{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class se{constructor(i,o,...a){this.versionNumber=i,this.alignmentPatternCenters=o,this.ecBlocks=a;let c=0;const u=a[0].getECCodewordsPerBlock(),d=a[0].getECBlocks();for(const h of d)c+=h.getCount()*(h.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!=1)throw new $;try{return this.getVersionForNumber((i-17)/4)}catch{throw new $}}static getVersionForNumber(i){if(i<1||i>40)throw new te;return se.VERSIONS[i-1]}static decodeVersionInformation(i){let o=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<se.VERSION_DECODE_INFO.length;c++){const u=se.VERSION_DECODE_INFO[c];if(u===i)return se.getVersionForNumber(c+7);const d=Nt.numBitsDiffering(i,u);d<o&&(a=c+7,o=d)}return o<=3?se.getVersionForNumber(a):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),o=new vt(i);o.setRegion(0,0,9,9),o.setRegion(i-8,0,8,9),o.setRegion(0,i-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const u=this.alignmentPatternCenters[c]-2;for(let d=0;d<a;d++)0===c&&(0===d||d===a-1)||c===a-1&&0===d||o.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return o.setRegion(6,9,1,i-17),o.setRegion(9,6,i-17,1),this.versionNumber>6&&(o.setRegion(i-11,0,3,6),o.setRegion(0,i-11,6,3)),o}toString(){return""+this.versionNumber}}se.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),se.VERSIONS=[new se(1,new Int32Array(0),new R(7,new _(1,19)),new R(10,new _(1,16)),new R(13,new _(1,13)),new R(17,new _(1,9))),new se(2,Int32Array.from([6,18]),new R(10,new _(1,34)),new R(16,new _(1,28)),new R(22,new _(1,22)),new R(28,new _(1,16))),new se(3,Int32Array.from([6,22]),new R(15,new _(1,55)),new R(26,new _(1,44)),new R(18,new _(2,17)),new R(22,new _(2,13))),new se(4,Int32Array.from([6,26]),new R(20,new _(1,80)),new R(18,new _(2,32)),new R(26,new _(2,24)),new R(16,new _(4,9))),new se(5,Int32Array.from([6,30]),new R(26,new _(1,108)),new R(24,new _(2,43)),new R(18,new _(2,15),new _(2,16)),new R(22,new _(2,11),new _(2,12))),new se(6,Int32Array.from([6,34]),new R(18,new _(2,68)),new R(16,new _(4,27)),new R(24,new _(4,19)),new R(28,new _(4,15))),new se(7,Int32Array.from([6,22,38]),new R(20,new _(2,78)),new R(18,new _(4,31)),new R(18,new _(2,14),new _(4,15)),new R(26,new _(4,13),new _(1,14))),new se(8,Int32Array.from([6,24,42]),new R(24,new _(2,97)),new R(22,new _(2,38),new _(2,39)),new R(22,new _(4,18),new _(2,19)),new R(26,new _(4,14),new _(2,15))),new se(9,Int32Array.from([6,26,46]),new R(30,new _(2,116)),new R(22,new _(3,36),new _(2,37)),new R(20,new _(4,16),new _(4,17)),new R(24,new _(4,12),new _(4,13))),new se(10,Int32Array.from([6,28,50]),new R(18,new _(2,68),new _(2,69)),new R(26,new _(4,43),new _(1,44)),new R(24,new _(6,19),new _(2,20)),new R(28,new _(6,15),new _(2,16))),new se(11,Int32Array.from([6,30,54]),new R(20,new _(4,81)),new R(30,new _(1,50),new _(4,51)),new R(28,new _(4,22),new _(4,23)),new R(24,new _(3,12),new _(8,13))),new se(12,Int32Array.from([6,32,58]),new R(24,new _(2,92),new _(2,93)),new R(22,new _(6,36),new _(2,37)),new R(26,new _(4,20),new _(6,21)),new R(28,new _(7,14),new _(4,15))),new se(13,Int32Array.from([6,34,62]),new R(26,new _(4,107)),new R(22,new _(8,37),new _(1,38)),new R(24,new _(8,20),new _(4,21)),new R(22,new _(12,11),new _(4,12))),new se(14,Int32Array.from([6,26,46,66]),new R(30,new _(3,115),new _(1,116)),new R(24,new _(4,40),new _(5,41)),new R(20,new _(11,16),new _(5,17)),new R(24,new _(11,12),new _(5,13))),new se(15,Int32Array.from([6,26,48,70]),new R(22,new _(5,87),new _(1,88)),new R(24,new _(5,41),new _(5,42)),new R(30,new _(5,24),new _(7,25)),new R(24,new _(11,12),new _(7,13))),new se(16,Int32Array.from([6,26,50,74]),new R(24,new _(5,98),new _(1,99)),new R(28,new _(7,45),new _(3,46)),new R(24,new _(15,19),new _(2,20)),new R(30,new _(3,15),new _(13,16))),new se(17,Int32Array.from([6,30,54,78]),new R(28,new _(1,107),new _(5,108)),new R(28,new _(10,46),new _(1,47)),new R(28,new _(1,22),new _(15,23)),new R(28,new _(2,14),new _(17,15))),new se(18,Int32Array.from([6,30,56,82]),new R(30,new _(5,120),new _(1,121)),new R(26,new _(9,43),new _(4,44)),new R(28,new _(17,22),new _(1,23)),new R(28,new _(2,14),new _(19,15))),new se(19,Int32Array.from([6,30,58,86]),new R(28,new _(3,113),new _(4,114)),new R(26,new _(3,44),new _(11,45)),new R(26,new _(17,21),new _(4,22)),new R(26,new _(9,13),new _(16,14))),new se(20,Int32Array.from([6,34,62,90]),new R(28,new _(3,107),new _(5,108)),new R(26,new _(3,41),new _(13,42)),new R(30,new _(15,24),new _(5,25)),new R(28,new _(15,15),new _(10,16))),new se(21,Int32Array.from([6,28,50,72,94]),new R(28,new _(4,116),new _(4,117)),new R(26,new _(17,42)),new R(28,new _(17,22),new _(6,23)),new R(30,new _(19,16),new _(6,17))),new se(22,Int32Array.from([6,26,50,74,98]),new R(28,new _(2,111),new _(7,112)),new R(28,new _(17,46)),new R(30,new _(7,24),new _(16,25)),new R(24,new _(34,13))),new se(23,Int32Array.from([6,30,54,78,102]),new R(30,new _(4,121),new _(5,122)),new R(28,new _(4,47),new _(14,48)),new R(30,new _(11,24),new _(14,25)),new R(30,new _(16,15),new _(14,16))),new se(24,Int32Array.from([6,28,54,80,106]),new R(30,new _(6,117),new _(4,118)),new R(28,new _(6,45),new _(14,46)),new R(30,new _(11,24),new _(16,25)),new R(30,new _(30,16),new _(2,17))),new se(25,Int32Array.from([6,32,58,84,110]),new R(26,new _(8,106),new _(4,107)),new R(28,new _(8,47),new _(13,48)),new R(30,new _(7,24),new _(22,25)),new R(30,new _(22,15),new _(13,16))),new se(26,Int32Array.from([6,30,58,86,114]),new R(28,new _(10,114),new _(2,115)),new R(28,new _(19,46),new _(4,47)),new R(28,new _(28,22),new _(6,23)),new R(30,new _(33,16),new _(4,17))),new se(27,Int32Array.from([6,34,62,90,118]),new R(30,new _(8,122),new _(4,123)),new R(28,new _(22,45),new _(3,46)),new R(30,new _(8,23),new _(26,24)),new R(30,new _(12,15),new _(28,16))),new se(28,Int32Array.from([6,26,50,74,98,122]),new R(30,new _(3,117),new _(10,118)),new R(28,new _(3,45),new _(23,46)),new R(30,new _(4,24),new _(31,25)),new R(30,new _(11,15),new _(31,16))),new se(29,Int32Array.from([6,30,54,78,102,126]),new R(30,new _(7,116),new _(7,117)),new R(28,new _(21,45),new _(7,46)),new R(30,new _(1,23),new _(37,24)),new R(30,new _(19,15),new _(26,16))),new se(30,Int32Array.from([6,26,52,78,104,130]),new R(30,new _(5,115),new _(10,116)),new R(28,new _(19,47),new _(10,48)),new R(30,new _(15,24),new _(25,25)),new R(30,new _(23,15),new _(25,16))),new se(31,Int32Array.from([6,30,56,82,108,134]),new R(30,new _(13,115),new _(3,116)),new R(28,new _(2,46),new _(29,47)),new R(30,new _(42,24),new _(1,25)),new R(30,new _(23,15),new _(28,16))),new se(32,Int32Array.from([6,34,60,86,112,138]),new R(30,new _(17,115)),new R(28,new _(10,46),new _(23,47)),new R(30,new _(10,24),new _(35,25)),new R(30,new _(19,15),new _(35,16))),new se(33,Int32Array.from([6,30,58,86,114,142]),new R(30,new _(17,115),new _(1,116)),new R(28,new _(14,46),new _(21,47)),new R(30,new _(29,24),new _(19,25)),new R(30,new _(11,15),new _(46,16))),new se(34,Int32Array.from([6,34,62,90,118,146]),new R(30,new _(13,115),new _(6,116)),new R(28,new _(14,46),new _(23,47)),new R(30,new _(44,24),new _(7,25)),new R(30,new _(59,16),new _(1,17))),new se(35,Int32Array.from([6,30,54,78,102,126,150]),new R(30,new _(12,121),new _(7,122)),new R(28,new _(12,47),new _(26,48)),new R(30,new _(39,24),new _(14,25)),new R(30,new _(22,15),new _(41,16))),new se(36,Int32Array.from([6,24,50,76,102,128,154]),new R(30,new _(6,121),new _(14,122)),new R(28,new _(6,47),new _(34,48)),new R(30,new _(46,24),new _(10,25)),new R(30,new _(2,15),new _(64,16))),new se(37,Int32Array.from([6,28,54,80,106,132,158]),new R(30,new _(17,122),new _(4,123)),new R(28,new _(29,46),new _(14,47)),new R(30,new _(49,24),new _(10,25)),new R(30,new _(24,15),new _(46,16))),new se(38,Int32Array.from([6,32,58,84,110,136,162]),new R(30,new _(4,122),new _(18,123)),new R(28,new _(13,46),new _(32,47)),new R(30,new _(48,24),new _(14,25)),new R(30,new _(42,15),new _(32,16))),new se(39,Int32Array.from([6,26,54,82,110,138,166]),new R(30,new _(20,117),new _(4,118)),new R(28,new _(40,47),new _(7,48)),new R(30,new _(43,24),new _(22,25)),new R(30,new _(10,15),new _(67,16))),new se(40,Int32Array.from([6,30,58,86,114,142,170]),new R(30,new _(19,118),new _(6,119)),new R(28,new _(18,47),new _(31,48)),new R(30,new _(34,24),new _(34,25)),new R(30,new _(20,15),new _(61,16)))];var re=(()=>{return(x=re||(re={}))[x.DATA_MASK_000=0]="DATA_MASK_000",x[x.DATA_MASK_001=1]="DATA_MASK_001",x[x.DATA_MASK_010=2]="DATA_MASK_010",x[x.DATA_MASK_011=3]="DATA_MASK_011",x[x.DATA_MASK_100=4]="DATA_MASK_100",x[x.DATA_MASK_101=5]="DATA_MASK_101",x[x.DATA_MASK_110=6]="DATA_MASK_110",x[x.DATA_MASK_111=7]="DATA_MASK_111",re;var x})();class De{constructor(i,o){this.value=i,this.isMasked=o}unmaskBitMatrix(i,o){for(let a=0;a<o;a++)for(let c=0;c<o;c++)this.isMasked(a,c)&&i.flip(c,a)}}De.values=new Map([[re.DATA_MASK_000,new De(re.DATA_MASK_000,(x,i)=>0==(x+i&1))],[re.DATA_MASK_001,new De(re.DATA_MASK_001,(x,i)=>0==(1&x))],[re.DATA_MASK_010,new De(re.DATA_MASK_010,(x,i)=>i%3==0)],[re.DATA_MASK_011,new De(re.DATA_MASK_011,(x,i)=>(x+i)%3==0)],[re.DATA_MASK_100,new De(re.DATA_MASK_100,(x,i)=>0==(Math.floor(x/2)+Math.floor(i/3)&1))],[re.DATA_MASK_101,new De(re.DATA_MASK_101,(x,i)=>x*i%6==0)],[re.DATA_MASK_110,new De(re.DATA_MASK_110,(x,i)=>x*i%6<3)],[re.DATA_MASK_111,new De(re.DATA_MASK_111,(x,i)=>0==(x+i+x*i%3&1))]]);class vl{constructor(i){const o=i.getHeight();if(o<21||1!=(3&o))throw new $;this.bitMatrix=i}readFormatInformation(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;let i=0;for(let u=0;u<6;u++)i=this.copyBit(u,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let u=5;u>=0;u--)i=this.copyBit(8,u,i);const o=this.bitMatrix.getHeight();let a=0;const c=o-7;for(let u=o-1;u>=c;u--)a=this.copyBit(8,u,a);for(let u=o-8;u<o;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=Nt.decodeFormatInformation(i,a),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new $}readVersion(){if(null!=this.parsedVersion)return this.parsedVersion;const i=this.bitMatrix.getHeight(),o=Math.floor((i-17)/4);if(o<=6)return se.getVersionForNumber(o);let a=0;const c=i-11;for(let d=5;d>=0;d--)for(let h=i-9;h>=c;h--)a=this.copyBit(h,d,a);let u=se.decodeVersionInformation(a);if(null!==u&&u.getDimensionForVersion()===i)return this.parsedVersion=u,u;a=0;for(let d=5;d>=0;d--)for(let h=i-9;h>=c;h--)a=this.copyBit(d,h,a);if(u=se.decodeVersionInformation(a),null!==u&&u.getDimensionForVersion()===i)return this.parsedVersion=u,u;throw new $}copyBit(i,o,a){return(this.isMirror?this.bitMatrix.get(o,i):this.bitMatrix.get(i,o))?a<<1|1:a<<1}readCodewords(){const i=this.readFormatInformation(),o=this.readVersion(),a=De.values.get(i.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const u=o.buildFunctionPattern();let d=!0;const h=new Uint8Array(o.getTotalCodewords());let p=0,y=0,C=0;for(let D=c-1;D>0;D-=2){6===D&&D--;for(let I=0;I<c;I++){const b=d?c-1-I:I;for(let T=0;T<2;T++)u.get(D-T,b)||(C++,y<<=1,this.bitMatrix.get(D-T,b)&&(y|=1),8===C&&(h[p++]=y,C=0,y=0))}d=!d}if(p!==o.getTotalCodewords())throw new $;return h}remask(){if(null===this.parsedFormatInfo)return;const i=De.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let o=0,a=i.getWidth();o<a;o++)for(let c=o+1,u=i.getHeight();c<u;c++)i.get(o,c)!==i.get(c,o)&&(i.flip(c,o),i.flip(o,c))}}class Xs{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o,a){if(i.length!==o.getTotalCodewords())throw new te;const c=o.getECBlocksForLevel(a);let u=0;const d=c.getECBlocks();for(const T of d)u+=T.getCount();const h=new Array(u);let p=0;for(const T of d)for(let M=0;M<T.getCount();M++){const N=T.getDataCodewords(),L=c.getECCodewordsPerBlock()+N;h[p++]=new Xs(N,new Uint8Array(L))}const y=h[0].codewords.length;let C=h.length-1;for(;C>=0&&h[C].codewords.length!==y;)C--;C++;const D=y-c.getECCodewordsPerBlock();let I=0;for(let T=0;T<D;T++)for(let M=0;M<p;M++)h[M].codewords[T]=i[I++];for(let T=C;T<p;T++)h[T].codewords[D]=i[I++];const b=h[0].codewords.length;for(let T=D;T<b;T++)for(let M=0;M<p;M++)h[M].codewords[M<C?T:T+1]=i[I++];return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var un=(()=>{return(x=un||(un={}))[x.TERMINATOR=0]="TERMINATOR",x[x.NUMERIC=1]="NUMERIC",x[x.ALPHANUMERIC=2]="ALPHANUMERIC",x[x.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",x[x.BYTE=4]="BYTE",x[x.ECI=5]="ECI",x[x.KANJI=6]="KANJI",x[x.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",x[x.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",x[x.HANZI=9]="HANZI",un;var x})();class ae{constructor(i,o,a,c){this.value=i,this.stringValue=o,this.characterCountBitsForVersions=a,this.bits=c,ae.FOR_BITS.set(c,this),ae.FOR_VALUE.set(i,this)}static forBits(i){const o=ae.FOR_BITS.get(i);if(void 0===o)throw new te;return o}getCharacterCountBits(i){const o=i.getVersionNumber();let a;return a=o<=9?0:o<=26?1:2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(i){return i instanceof ae&&this.value===i.value}toString(){return this.stringValue}}ae.FOR_BITS=new Map,ae.FOR_VALUE=new Map,ae.TERMINATOR=new ae(un.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ae.NUMERIC=new ae(un.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ae.ALPHANUMERIC=new ae(un.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ae.STRUCTURED_APPEND=new ae(un.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ae.BYTE=new ae(un.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ae.ECI=new ae(un.ECI,"ECI",Int32Array.from([0,0,0]),7),ae.KANJI=new ae(un.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ae.FNC1_FIRST_POSITION=new ae(un.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ae.FNC1_SECOND_POSITION=new ae(un.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ae.HANZI=new ae(un.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let Jt=(()=>{class x{static decode(o,a,c,u){const d=new ko(o);let h=new Ge;const p=new Array;let y=-1,C=-1;try{let b,D=null,I=!1;do{if(d.available()<4)b=ae.TERMINATOR;else{const T=d.readBits(4);b=ae.forBits(T)}switch(b){case ae.TERMINATOR:break;case ae.FNC1_FIRST_POSITION:case ae.FNC1_SECOND_POSITION:I=!0;break;case ae.STRUCTURED_APPEND:if(d.available()<16)throw new $;y=d.readBits(8),C=d.readBits(8);break;case ae.ECI:const T=x.parseECIValue(d);if(D=Y.getCharacterSetECIByValue(T),null===D)throw new $;break;case ae.HANZI:const M=d.readBits(4),N=d.readBits(b.getCharacterCountBits(a));M===x.GB2312_SUBSET&&x.decodeHanziSegment(d,h,N);break;default:const L=d.readBits(b.getCharacterCountBits(a));switch(b){case ae.NUMERIC:x.decodeNumericSegment(d,h,L);break;case ae.ALPHANUMERIC:x.decodeAlphanumericSegment(d,h,L,I);break;case ae.BYTE:x.decodeByteSegment(d,h,L,D,p,u);break;case ae.KANJI:x.decodeKanjiSegment(d,h,L);break;default:throw new $}}}while(b!==ae.TERMINATOR)}catch{throw new $}return new ci(o,h.toString(),0===p.length?null:p,null===c?null:c.toString(),y,C)}static decodeHanziSegment(o,a,c){if(13*c>o.available())throw new $;const u=new Uint8Array(2*c);let d=0;for(;c>0;){const h=o.readBits(13);let p=h/96<<8&4294967295|h%96;p+=p<959?41377:42657,u[d]=p>>8&255,u[d+1]=255&p,d+=2,c--}try{a.append(Ft.decode(u,ye.GB2312))}catch(h){throw new $(h)}}static decodeKanjiSegment(o,a,c){if(13*c>o.available())throw new $;const u=new Uint8Array(2*c);let d=0;for(;c>0;){const h=o.readBits(13);let p=h/192<<8&4294967295|h%192;p+=p<7936?33088:49472,u[d]=p>>8,u[d+1]=p,d+=2,c--}try{a.append(Ft.decode(u,ye.SHIFT_JIS))}catch(h){throw new $(h)}}static decodeByteSegment(o,a,c,u,d,h){if(8*c>o.available())throw new $;const p=new Uint8Array(c);for(let C=0;C<c;C++)p[C]=o.readBits(8);let y;y=null===u?ye.guessEncoding(p,h):u.getName();try{a.append(Ft.decode(p,y))}catch(C){throw new $(C)}d.push(p)}static toAlphaNumericChar(o){if(o>=x.ALPHANUMERIC_CHARS.length)throw new $;return x.ALPHANUMERIC_CHARS[o]}static decodeAlphanumericSegment(o,a,c,u){const d=a.length();for(;c>1;){if(o.available()<11)throw new $;const h=o.readBits(11);a.append(x.toAlphaNumericChar(Math.floor(h/45))),a.append(x.toAlphaNumericChar(h%45)),c-=2}if(1===c){if(o.available()<6)throw new $;a.append(x.toAlphaNumericChar(o.readBits(6)))}if(u)for(let h=d;h<a.length();h++)"%"===a.charAt(h)&&(h<a.length()-1&&"%"===a.charAt(h+1)?a.deleteCharAt(h+1):a.setCharAt(h,String.fromCharCode(29)))}static decodeNumericSegment(o,a,c){for(;c>=3;){if(o.available()<10)throw new $;const u=o.readBits(10);if(u>=1e3)throw new $;a.append(x.toAlphaNumericChar(Math.floor(u/100))),a.append(x.toAlphaNumericChar(Math.floor(u/10)%10)),a.append(x.toAlphaNumericChar(u%10)),c-=3}if(2===c){if(o.available()<7)throw new $;const u=o.readBits(7);if(u>=100)throw new $;a.append(x.toAlphaNumericChar(Math.floor(u/10))),a.append(x.toAlphaNumericChar(u%10))}else if(1===c){if(o.available()<4)throw new $;const u=o.readBits(4);if(u>=10)throw new $;a.append(x.toAlphaNumericChar(u))}}static parseECIValue(o){const a=o.readBits(8);if(0==(128&a))return 127&a;if(128==(192&a))return(63&a)<<8&4294967295|o.readBits(8);if(192==(224&a))return(31&a)<<16&4294967295|o.readBits(16);throw new $}}return x.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",x.GB2312_SUBSET=1,x})();class Ml{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||null===i||i.length<3)return;const o=i[0];i[0]=i[2],i[2]=o}}class Nl{constructor(){this.rsDecoder=new Oi(ke.QR_CODE_FIELD_256)}decodeBooleanArray(i,o){return this.decodeBitMatrix(vt.parseFromBooleanArray(i),o)}decodeBitMatrix(i,o){const a=new vl(i);let c=null;try{return this.decodeBitMatrixParser(a,o)}catch(u){c=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,o);return u.setOther(new Ml(!0)),u}catch(u){throw null!==c?c:u}}decodeBitMatrixParser(i,o){const a=i.readVersion(),c=i.readFormatInformation().getErrorCorrectionLevel(),u=i.readCodewords(),d=Xs.getDataBlocks(u,a,c);let h=0;for(const C of d)h+=C.getNumDataCodewords();const p=new Uint8Array(h);let y=0;for(const C of d){const D=C.getCodewords(),I=C.getNumDataCodewords();this.correctErrors(D,I);for(let b=0;b<I;b++)p[y++]=D[b]}return Jt.decode(p,a,c,o)}correctErrors(i,o){const a=new Int32Array(i);try{this.rsDecoder.decode(a,i.length-o)}catch{throw new It}for(let c=0;c<o;c++)i[c]=a[c]}}class Zs extends oe{constructor(i,o,a){super(i,o),this.estimatedModuleSize=a}aboutEquals(i,o,a){if(Math.abs(o-this.getY())<=i&&Math.abs(a-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,o,a){const c=(this.getX()+o)/2,u=(this.getY()+i)/2;return new Zs(c,u,(this.estimatedModuleSize+a)/2)}}class Cn{constructor(i,o,a,c,u,d,h){this.image=i,this.startX=o,this.startY=a,this.width=c,this.height=u,this.moduleSize=d,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,o=this.height,c=i+this.width,u=this.startY+o/2,d=new Int32Array(3),h=this.image;for(let p=0;p<o;p++){const y=u+(0==(1&p)?Math.floor((p+1)/2):-Math.floor((p+1)/2));d[0]=0,d[1]=0,d[2]=0;let C=i;for(;C<c&&!h.get(C,y);)C++;let D=0;for(;C<c;){if(h.get(C,y))if(1===D)d[1]++;else if(2===D){if(this.foundPatternCross(d)){const I=this.handlePossibleCenter(d,y,C);if(null!==I)return I}d[0]=d[2],d[1]=1,d[2]=0,D=1}else d[++D]++;else 1===D&&D++,d[D]++;C++}if(this.foundPatternCross(d)){const I=this.handlePossibleCenter(d,y,c);if(null!==I)return I}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new V}static centerFromEnd(i,o){return o-i[2]-i[1]/2}foundPatternCross(i){const o=this.moduleSize,a=o/2;for(let c=0;c<3;c++)if(Math.abs(o-i[c])>=a)return!1;return!0}crossCheckVertical(i,o,a,c){const u=this.image,d=u.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let p=i;for(;p>=0&&u.get(o,p)&&h[1]<=a;)h[1]++,p--;if(p<0||h[1]>a)return NaN;for(;p>=0&&!u.get(o,p)&&h[0]<=a;)h[0]++,p--;if(h[0]>a)return NaN;for(p=i+1;p<d&&u.get(o,p)&&h[1]<=a;)h[1]++,p++;if(p===d||h[1]>a)return NaN;for(;p<d&&!u.get(o,p)&&h[2]<=a;)h[2]++,p++;return h[2]>a||5*Math.abs(h[0]+h[1]+h[2]-c)>=2*c?NaN:this.foundPatternCross(h)?Cn.centerFromEnd(h,p):NaN}handlePossibleCenter(i,o,a){const c=i[0]+i[1]+i[2],u=Cn.centerFromEnd(i,a),d=this.crossCheckVertical(o,u,2*i[1],c);if(!isNaN(d)){const h=(i[0]+i[1]+i[2])/3;for(const y of this.possibleCenters)if(y.aboutEquals(h,d,u))return y.combineEstimate(d,u,h);const p=new Zs(u,d,h);this.possibleCenters.push(p),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(p)}return null}}class $s extends oe{constructor(i,o,a,c){super(i,o),this.estimatedModuleSize=a,this.count=c,void 0===c&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,o,a){if(Math.abs(o-this.getY())<=i&&Math.abs(a-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,o,a){const c=this.count+1,u=(this.count*this.getX()+o)/c,d=(this.count*this.getY()+i)/c;return new $s(u,d,(this.count*this.estimatedModuleSize+a)/c,c)}}class Yd{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let Xd=(()=>{class x{constructor(o,a){this.image=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(o){const a=null!=o&&void 0!==o.get(rt.TRY_HARDER),c=null!=o&&void 0!==o.get(rt.PURE_BARCODE),u=this.image,d=u.getHeight(),h=u.getWidth();let p=Math.floor(3*d/(4*x.MAX_MODULES));(p<x.MIN_SKIP||a)&&(p=x.MIN_SKIP);let y=!1;const C=new Int32Array(5);for(let I=p-1;I<d&&!y;I+=p){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let b=0;for(let T=0;T<h;T++)if(u.get(T,I))1==(1&b)&&b++,C[b]++;else if(0==(1&b))if(4===b)if(x.foundPatternCross(C)){if(!0!==this.handlePossibleCenter(C,I,T,c)){C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,b=3;continue}if(p=2,!0===this.hasSkipped)y=this.haveMultiplyConfirmedCenters();else{const N=this.findRowSkip();N>C[2]&&(I+=N-C[2]-p,T=h-1)}b=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,b=3;else C[++b]++;else C[b]++;x.foundPatternCross(C)&&!0===this.handlePossibleCenter(C,I,h,c)&&(p=C[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const D=this.selectBestPatterns();return oe.orderBestPatterns(D),new Yd(D)}static centerFromEnd(o,a){return a-o[4]-o[3]-o[2]/2}static foundPatternCross(o){let a=0;for(let d=0;d<5;d++){const h=o[d];if(0===h)return!1;a+=h}if(a<7)return!1;const c=a/7,u=c/2;return Math.abs(c-o[0])<u&&Math.abs(c-o[1])<u&&Math.abs(3*c-o[2])<3*u&&Math.abs(c-o[3])<u&&Math.abs(c-o[4])<u}getCrossCheckStateCount(){const o=this.crossCheckStateCount;return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o}crossCheckDiagonal(o,a,c,u){const d=this.getCrossCheckStateCount();let h=0;const p=this.image;for(;o>=h&&a>=h&&p.get(a-h,o-h);)d[2]++,h++;if(o<h||a<h)return!1;for(;o>=h&&a>=h&&!p.get(a-h,o-h)&&d[1]<=c;)d[1]++,h++;if(o<h||a<h||d[1]>c)return!1;for(;o>=h&&a>=h&&p.get(a-h,o-h)&&d[0]<=c;)d[0]++,h++;if(d[0]>c)return!1;const y=p.getHeight(),C=p.getWidth();for(h=1;o+h<y&&a+h<C&&p.get(a+h,o+h);)d[2]++,h++;if(o+h>=y||a+h>=C)return!1;for(;o+h<y&&a+h<C&&!p.get(a+h,o+h)&&d[3]<c;)d[3]++,h++;if(o+h>=y||a+h>=C||d[3]>=c)return!1;for(;o+h<y&&a+h<C&&p.get(a+h,o+h)&&d[4]<c;)d[4]++,h++;return!(d[4]>=c)&&Math.abs(d[0]+d[1]+d[2]+d[3]+d[4]-u)<2*u&&x.foundPatternCross(d)}crossCheckVertical(o,a,c,u){const d=this.image,h=d.getHeight(),p=this.getCrossCheckStateCount();let y=o;for(;y>=0&&d.get(a,y);)p[2]++,y--;if(y<0)return NaN;for(;y>=0&&!d.get(a,y)&&p[1]<=c;)p[1]++,y--;if(y<0||p[1]>c)return NaN;for(;y>=0&&d.get(a,y)&&p[0]<=c;)p[0]++,y--;if(p[0]>c)return NaN;for(y=o+1;y<h&&d.get(a,y);)p[2]++,y++;if(y===h)return NaN;for(;y<h&&!d.get(a,y)&&p[3]<c;)p[3]++,y++;if(y===h||p[3]>=c)return NaN;for(;y<h&&d.get(a,y)&&p[4]<c;)p[4]++,y++;return p[4]>=c||5*Math.abs(p[0]+p[1]+p[2]+p[3]+p[4]-u)>=2*u?NaN:x.foundPatternCross(p)?x.centerFromEnd(p,y):NaN}crossCheckHorizontal(o,a,c,u){const d=this.image,h=d.getWidth(),p=this.getCrossCheckStateCount();let y=o;for(;y>=0&&d.get(y,a);)p[2]++,y--;if(y<0)return NaN;for(;y>=0&&!d.get(y,a)&&p[1]<=c;)p[1]++,y--;if(y<0||p[1]>c)return NaN;for(;y>=0&&d.get(y,a)&&p[0]<=c;)p[0]++,y--;if(p[0]>c)return NaN;for(y=o+1;y<h&&d.get(y,a);)p[2]++,y++;if(y===h)return NaN;for(;y<h&&!d.get(y,a)&&p[3]<c;)p[3]++,y++;if(y===h||p[3]>=c)return NaN;for(;y<h&&d.get(y,a)&&p[4]<c;)p[4]++,y++;return p[4]>=c||5*Math.abs(p[0]+p[1]+p[2]+p[3]+p[4]-u)>=u?NaN:x.foundPatternCross(p)?x.centerFromEnd(p,y):NaN}handlePossibleCenter(o,a,c,u){const d=o[0]+o[1]+o[2]+o[3]+o[4];let h=x.centerFromEnd(o,c),p=this.crossCheckVertical(a,Math.floor(h),o[2],d);if(!isNaN(p)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(p),o[2],d),!isNaN(h)&&(!u||this.crossCheckDiagonal(Math.floor(p),Math.floor(h),o[2],d)))){const y=d/7;let C=!1;const D=this.possibleCenters;for(let I=0,b=D.length;I<b;I++){const T=D[I];if(T.aboutEquals(y,p,h)){D[I]=T.combineEstimate(p,h,y),C=!0;break}}if(!C){const I=new $s(h,p,y);D.push(I),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(I)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const c of this.possibleCenters)if(c.getCount()>=x.CENTER_QUORUM){if(null!=a)return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-c.getX())-Math.abs(a.getY()-c.getY()))/2);a=c}return 0}haveMultiplyConfirmedCenters(){let o=0,a=0;const c=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=x.CENTER_QUORUM&&(o++,a+=h.getEstimatedModuleSize());if(o<3)return!1;const u=a/c;let d=0;for(const h of this.possibleCenters)d+=Math.abs(h.getEstimatedModuleSize()-u);return d<=.05*a}selectBestPatterns(){const o=this.possibleCenters.length;if(o<3)throw new V;const a=this.possibleCenters;let c;if(o>3){let u=0,d=0;for(const y of this.possibleCenters){const C=y.getEstimatedModuleSize();u+=C,d+=C*C}c=u/o;let h=Math.sqrt(d/o-c*c);a.sort((y,C)=>{const D=Math.abs(C.getEstimatedModuleSize()-c),I=Math.abs(y.getEstimatedModuleSize()-c);return D<I?-1:D>I?1:0});const p=Math.max(.2*c,h);for(let y=0;y<a.length&&a.length>3;y++)Math.abs(a[y].getEstimatedModuleSize()-c)>p&&(a.splice(y,1),y--)}if(a.length>3){let u=0;for(const d of a)u+=d.getEstimatedModuleSize();c=u/a.length,a.sort((d,h)=>{if(h.getCount()===d.getCount()){const p=Math.abs(h.getEstimatedModuleSize()-c),y=Math.abs(d.getEstimatedModuleSize()-c);return p<y?1:p>y?-1:0}return h.getCount()-d.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}return x.CENTER_QUORUM=2,x.MIN_SKIP=3,x.MAX_MODULES=57,x})();class ki{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=null==i?null:i.get(rt.NEED_RESULT_POINT_CALLBACK);const a=new Xd(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(a)}processFinderPatternInfo(i){const o=i.getTopLeft(),a=i.getTopRight(),c=i.getBottomLeft(),u=this.calculateModuleSize(o,a,c);if(u<1)throw new V("No pattern found in proccess finder.");const d=ki.computeDimension(o,a,c,u),h=se.getProvisionalVersionForDimension(d),p=h.getDimensionForVersion()-7;let y=null;if(h.getAlignmentPatternCenters().length>0){const b=a.getX()-o.getX()+c.getX(),T=a.getY()-o.getY()+c.getY(),M=1-3/p,N=Math.floor(o.getX()+M*(b-o.getX())),L=Math.floor(o.getY()+M*(T-o.getY()));for(let W=4;W<=16;W<<=1)try{y=this.findAlignmentInRegion(u,N,L,W);break}catch(Z){if(!(Z instanceof V))throw Z}}const C=ki.createTransform(o,a,c,y,d),D=ki.sampleGrid(this.image,C,d);let I;return I=null===y?[c,o,a]:[c,o,a,y],new Ri(D,I)}static createTransform(i,o,a,c,u){const d=u-3.5;let h,p,y,C;return null!==c?(h=c.getX(),p=c.getY(),y=d-3,C=y):(h=o.getX()-i.getX()+a.getX(),p=o.getY()-i.getY()+a.getY(),y=d,C=d),yn.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,y,C,3.5,d,i.getX(),i.getY(),o.getX(),o.getY(),h,p,a.getX(),a.getY())}static sampleGrid(i,o,a){return xr.getInstance().sampleGridWithTransform(i,a,a,o)}static computeDimension(i,o,a,c){const u=Ve.round(oe.distance(i,o)/c),d=Ve.round(oe.distance(i,a)/c);let h=Math.floor((u+d)/2)+7;switch(3&h){case 0:h++;break;case 2:h--;break;case 3:throw new V("Dimensions could be not found.")}return h}calculateModuleSize(i,o,a){return(this.calculateModuleSizeOneWay(i,o)+this.calculateModuleSizeOneWay(i,a))/2}calculateModuleSizeOneWay(i,o){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(o.getX()),Math.floor(o.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(i,o,a,c){let u=this.sizeOfBlackWhiteBlackRun(i,o,a,c),d=1,h=i-(a-i);h<0?(d=i/(i-h),h=0):h>=this.image.getWidth()&&(d=(this.image.getWidth()-1-i)/(h-i),h=this.image.getWidth()-1);let p=Math.floor(o-(c-o)*d);return d=1,p<0?(d=o/(o-p),p=0):p>=this.image.getHeight()&&(d=(this.image.getHeight()-1-o)/(p-o),p=this.image.getHeight()-1),h=Math.floor(i+(h-i)*d),u+=this.sizeOfBlackWhiteBlackRun(i,o,h,p),u-1}sizeOfBlackWhiteBlackRun(i,o,a,c){const u=Math.abs(c-o)>Math.abs(a-i);if(u){let b=i;i=o,o=b,b=a,a=c,c=b}const d=Math.abs(a-i),h=Math.abs(c-o);let p=-d/2;const y=i<a?1:-1,C=o<c?1:-1;let D=0;const I=a+y;for(let b=i,T=o;b!==I;b+=y){if(1===D===this.image.get(u?T:b,u?b:T)){if(2===D)return Ve.distance(b,T,i,o);D++}if(p+=h,p>0){if(T===c)break;T+=C,p-=d}}return 2===D?Ve.distance(a+y,c,i,o):NaN}findAlignmentInRegion(i,o,a,c){const u=Math.floor(c*i),d=Math.max(0,o-u),h=Math.min(this.image.getWidth()-1,o+u);if(h-d<3*i)throw new V("Alignment top exceeds estimated module size.");const p=Math.max(0,a-u),y=Math.min(this.image.getHeight()-1,a+u);if(y-p<3*i)throw new V("Alignment bottom exceeds estimated module size.");return new Cn(this.image,d,p,h-d,y-p,i,this.resultPointCallback).find()}}class or{constructor(){this.decoder=new Nl}getDecoder(){return this.decoder}decode(i,o){let a,c;if(null!=o&&void 0!==o.get(rt.PURE_BARCODE)){const p=or.extractPureBits(i.getBlackMatrix());a=this.decoder.decodeBitMatrix(p,o),c=or.NO_POINTS}else{const p=new ki(i.getBlackMatrix()).detect(o);a=this.decoder.decodeBitMatrix(p.getBits(),o),c=p.getPoints()}a.getOther()instanceof Ml&&a.getOther().applyMirroredCorrection(c);const u=new Bt(a.getText(),a.getRawBytes(),void 0,c,ce.QR_CODE,void 0),d=a.getByteSegments();null!==d&&u.putMetadata(mt.BYTE_SEGMENTS,d);const h=a.getECLevel();return null!==h&&u.putMetadata(mt.ERROR_CORRECTION_LEVEL,h),a.hasStructuredAppend()&&(u.putMetadata(mt.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata(mt.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),a=i.getBottomRightOnBit();if(null===o||null===a)throw new V;const c=this.moduleSize(o,i);let u=o[1],d=a[1],h=o[0],p=a[0];if(h>=p||u>=d)throw new V;if(d-u!=p-h&&(p=h+(d-u),p>=i.getWidth()))throw new V;const y=Math.round((p-h+1)/c),C=Math.round((d-u+1)/c);if(y<=0||C<=0)throw new V;if(C!==y)throw new V;const D=Math.floor(c/2);u+=D,h+=D;const I=h+Math.floor((y-1)*c)-p;if(I>0){if(I>D)throw new V;h-=I}const b=u+Math.floor((C-1)*c)-d;if(b>0){if(b>D)throw new V;u-=b}const T=new vt(y,C);for(let M=0;M<C;M++){const N=u+Math.floor(M*c);for(let L=0;L<y;L++)i.get(h+Math.floor(L*c),N)&&T.set(L,M)}return T}static moduleSize(i,o){const a=o.getHeight(),c=o.getWidth();let u=i[0],d=i[1],h=!0,p=0;for(;u<c&&d<a;){if(h!==o.get(u,d)){if(5==++p)break;h=!h}u++,d++}if(u===c||d===a)throw new V;return(u-i[0])/7}}or.NO_POINTS=new Array;class pe{PDF417Common(){}static getBitCountSum(i){return Ve.sum(i)}static toIntArray(i){if(null==i||!i.length)return pe.EMPTY_INT_ARRAY;const o=new Int32Array(i.length);let a=0;for(const c of i)o[a++]=c;return o}static getCodeword(i){const o=Et.binarySearch(pe.SYMBOL_TABLE,262143&i);return o<0?-1:(pe.CODEWORD_TABLE[o]-1)%pe.NUMBER_OF_CODEWORDS}}pe.NUMBER_OF_CODEWORDS=929,pe.MAX_CODEWORDS_IN_BARCODE=pe.NUMBER_OF_CODEWORDS-1,pe.MIN_ROWS_IN_BARCODE=3,pe.MAX_ROWS_IN_BARCODE=90,pe.MODULES_IN_CODEWORD=17,pe.MODULES_IN_STOP_PATTERN=18,pe.BARS_IN_MODULE=8,pe.EMPTY_INT_ARRAY=new Int32Array([]),pe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),pe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ol{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Se{static detectMultiple(i,o,a){let c=i.getBlackMatrix(),u=Se.detect(a,c);return u.length||(c=c.clone(),c.rotate180(),u=Se.detect(a,c)),new Ol(c,u)}static detect(i,o){const a=new Array;let c=0,u=0,d=!1;for(;c<o.getHeight();){const h=Se.findVertices(o,c,u);if(null!=h[0]||null!=h[3]){if(d=!0,a.push(h),!i)break;null!=h[2]?(u=Math.trunc(h[2].getX()),c=Math.trunc(h[2].getY())):(u=Math.trunc(h[4].getX()),c=Math.trunc(h[4].getY()))}else{if(!d)break;d=!1,u=0;for(const p of a)null!=p[1]&&(c=Math.trunc(Math.max(c,p[1].getY()))),null!=p[3]&&(c=Math.max(c,Math.trunc(p[3].getY())));c+=Se.ROW_STEP}}return a}static findVertices(i,o,a){const c=i.getHeight(),u=i.getWidth(),d=new Array(8);return Se.copyToResult(d,Se.findRowsWithPattern(i,c,u,o,a,Se.START_PATTERN),Se.INDEXES_START_PATTERN),null!=d[4]&&(a=Math.trunc(d[4].getX()),o=Math.trunc(d[4].getY())),Se.copyToResult(d,Se.findRowsWithPattern(i,c,u,o,a,Se.STOP_PATTERN),Se.INDEXES_STOP_PATTERN),d}static copyToResult(i,o,a){for(let c=0;c<a.length;c++)i[a[c]]=o[c]}static findRowsWithPattern(i,o,a,c,u,d){const h=new Array(4);let p=!1;const y=new Int32Array(d.length);for(;c<o;c+=Se.ROW_STEP){let D=Se.findGuardPattern(i,u,c,a,!1,d,y);if(null!=D){for(;c>0;){const I=Se.findGuardPattern(i,u,--c,a,!1,d,y);if(null==I){c++;break}D=I}h[0]=new oe(D[0],c),h[1]=new oe(D[1],c),p=!0;break}}let C=c+1;if(p){let D=0,I=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;C<o;C++){const b=Se.findGuardPattern(i,I[0],C,a,!1,d,y);if(null!=b&&Math.abs(I[0]-b[0])<Se.MAX_PATTERN_DRIFT&&Math.abs(I[1]-b[1])<Se.MAX_PATTERN_DRIFT)I=b,D=0;else{if(D>Se.SKIPPED_ROW_COUNT_MAX)break;D++}}C-=D+1,h[2]=new oe(I[0],C),h[3]=new oe(I[1],C)}return C-c<Se.BARCODE_MIN_HEIGHT&&Et.fill(h,null),h}static findGuardPattern(i,o,a,c,u,d,h){Et.fillWithin(h,0,h.length,0);let p=o,y=0;for(;i.get(p,a)&&p>0&&y++<Se.MAX_PIXEL_DRIFT;)p--;let C=p,D=0,I=d.length;for(let b=u;C<c;C++)if(i.get(C,a)!==b)h[D]++;else{if(D===I-1){if(Se.patternMatchVariance(h,d,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE)return new Int32Array([p,C]);p+=h[0]+h[1],qe.arraycopy(h,2,h,0,D-1),h[D-1]=0,h[D]=0,D--}else D++;h[D]=1,b=!b}return D===I-1&&Se.patternMatchVariance(h,d,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE?new Int32Array([p,C-1]):null}static patternMatchVariance(i,o,a){let c=i.length,u=0,d=0;for(let y=0;y<c;y++)u+=i[y],d+=o[y];if(u<d)return 1/0;let h=u/d;a*=h;let p=0;for(let y=0;y<c;y++){let C=i[y],D=o[y]*h,I=C>D?C-D:D-C;if(I>a)return 1/0;p+=I}return p/u}}Se.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Se.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Se.MAX_AVG_VARIANCE=.42,Se.MAX_INDIVIDUAL_VARIANCE=.8,Se.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Se.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Se.MAX_PIXEL_DRIFT=3,Se.MAX_PATTERN_DRIFT=5,Se.SKIPPED_ROW_COUNT_MAX=25,Se.ROW_STEP=5,Se.BARCODE_MIN_HEIGHT=10;class Ze{constructor(i,o){if(0===o.length)throw new te;this.field=i;let a=o.length;if(a>1&&0===o[0]){let c=1;for(;c<a&&0===o[c];)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),qe.arraycopy(o,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(0===i)return this.getCoefficient(0);if(1===i){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let o=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)o=this.field.add(this.field.multiply(i,o),this.coefficients[c]);return o}add(i){if(!this.field.equals(i.field))throw new te("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,a=i.coefficients;if(o.length>a.length){let d=o;o=a,a=d}let c=new Int32Array(a.length),u=a.length-o.length;qe.arraycopy(a,0,c,0,u);for(let d=u;d<a.length;d++)c[d]=this.field.add(o[d-u],a[d]);return new Ze(this.field,c)}subtract(i){if(!this.field.equals(i.field))throw new te("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof Ze?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new te("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new Ze(this.field,new Int32Array([0]));let o=this.coefficients,a=o.length,c=i.coefficients,u=c.length,d=new Int32Array(a+u-1);for(let h=0;h<a;h++){let p=o[h];for(let y=0;y<u;y++)d[h+y]=this.field.add(d[h+y],this.field.multiply(p,c[y]))}return new Ze(this.field,d)}negative(){let i=this.coefficients.length,o=new Int32Array(i);for(let a=0;a<i;a++)o[a]=this.field.subtract(0,this.coefficients[a]);return new Ze(this.field,o)}multiplyScalar(i){if(0===i)return new Ze(this.field,new Int32Array([0]));if(1===i)return this;let o=this.coefficients.length,a=new Int32Array(o);for(let c=0;c<o;c++)a[c]=this.field.multiply(this.coefficients[c],i);return new Ze(this.field,a)}multiplyByMonomial(i,o){if(i<0)throw new te;if(0===o)return new Ze(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+i);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],o);return new Ze(this.field,c)}toString(){let i=new Ge;for(let o=this.getDegree();o>=0;o--){let a=this.getCoefficient(o);0!==a&&(a<0?(i.append(" - "),a=-a):i.length()>0&&i.append(" + "),(0===o||1!==a)&&i.append(a),0!==o&&(1===o?i.append("x"):(i.append("x^"),i.append(o))))}return i.toString()}}class qs extends class Ye{add(i,o){return(i+o)%this.modulus}subtract(i,o){return(this.modulus+i-o)%this.modulus}exp(i){return this.expTable[i]}log(i){if(0===i)throw new te;return this.logTable[i]}inverse(i){if(0===i)throw new ks;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,o){return 0===i||0===o?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}{constructor(i,o){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let a=1;for(let c=0;c<i;c++)this.expTable[c]=a,a=a*o%i;for(let c=0;c<i-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Ze(this,new Int32Array([0])),this.one=new Ze(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new te;if(0===o)return this.zero;let a=new Int32Array(i+1);return a[0]=o,new Ze(this,a)}}qs.PDF417_GF=new qs(pe.NUMBER_OF_CODEWORDS,3);class Rl{constructor(){this.field=qs.PDF417_GF}decode(i,o,a){let c=new Ze(this.field,i),u=new Int32Array(o),d=!1;for(let T=o;T>0;T--){let M=c.evaluateAt(this.field.exp(T));u[o-T]=M,0!==M&&(d=!0)}if(!d)return 0;let h=this.field.getOne();if(null!=a)for(const T of a){let M=this.field.exp(i.length-1-T),N=new Ze(this.field,new Int32Array([this.field.subtract(0,M),1]));h=h.multiply(N)}let p=new Ze(this.field,u),y=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),p,o),C=y[0],D=y[1],I=this.findErrorLocations(C),b=this.findErrorMagnitudes(D,C,I);for(let T=0;T<I.length;T++){let M=i.length-1-this.field.log(I[T]);if(M<0)throw It.getChecksumInstance();i[M]=this.field.subtract(i[M],b[T])}return I.length}runEuclideanAlgorithm(i,o,a){if(i.getDegree()<o.getDegree()){let I=i;i=o,o=I}let c=i,u=o,d=this.field.getZero(),h=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let I=c,b=d;if(c=u,d=h,c.isZero())throw It.getChecksumInstance();u=I;let T=this.field.getZero(),M=c.getCoefficient(c.getDegree()),N=this.field.inverse(M);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let L=u.getDegree()-c.getDegree(),W=this.field.multiply(u.getCoefficient(u.getDegree()),N);T=T.add(this.field.buildMonomial(L,W)),u=u.subtract(c.multiplyByMonomial(L,W))}h=T.multiply(d).subtract(b).negative()}let p=h.getCoefficient(0);if(0===p)throw It.getChecksumInstance();let y=this.field.inverse(p);return[h.multiply(y),u.multiply(y)]}findErrorLocations(i){let o=i.getDegree(),a=new Int32Array(o),c=0;for(let u=1;u<this.field.getSize()&&c<o;u++)0===i.evaluateAt(u)&&(a[c]=this.field.inverse(u),c++);if(c!==o)throw It.getChecksumInstance();return a}findErrorMagnitudes(i,o,a){let c=o.getDegree(),u=new Int32Array(c);for(let y=1;y<=c;y++)u[c-y]=this.field.multiply(y,o.getCoefficient(y));let d=new Ze(this.field,u),h=a.length,p=new Int32Array(h);for(let y=0;y<h;y++){let C=this.field.inverse(a[y]),D=this.field.subtract(0,i.evaluateAt(C)),I=this.field.inverse(d.evaluateAt(C));p[y]=this.field.multiply(D,I)}return p}}class Zr{constructor(i,o,a,c,u){i instanceof Zr?this.constructor_2(i):this.constructor_1(i,o,a,c,u)}constructor_1(i,o,a,c,u){const d=null==o||null==a,h=null==c||null==u;if(d&&h)throw new V;d?(o=new oe(0,c.getY()),a=new oe(0,u.getY())):h&&(c=new oe(i.getWidth()-1,o.getY()),u=new oe(i.getWidth()-1,a.getY())),this.image=i,this.topLeft=o,this.bottomLeft=a,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(o.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(o.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,o){return null==i?o:null==o?i:new Zr(i.image,i.topLeft,i.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(i,o,a){let c=this.topLeft,u=this.bottomLeft,d=this.topRight,h=this.bottomRight;if(i>0){let p=a?this.topLeft:this.topRight,y=Math.trunc(p.getY()-i);y<0&&(y=0);let C=new oe(p.getX(),y);a?c=C:d=C}if(o>0){let p=a?this.bottomLeft:this.bottomRight,y=Math.trunc(p.getY()+o);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);let C=new oe(p.getX(),y);a?u=C:h=C}return new Zr(this.image,c,u,d,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class lt{constructor(i,o,a,c){this.columnCount=i,this.errorCorrectionLevel=c,this.rowCountUpperPart=o,this.rowCountLowerPart=a,this.rowCount=o+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Vi{constructor(){this.buffer=""}static form(i,o){let a=-1;return i.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function c(d,h,p,y,C,D){if("%%"===d)return"%";if(void 0===o[++a])return;d=y?parseInt(y.substr(1)):void 0;let b,I=C?parseInt(C.substr(1)):void 0;switch(D){case"s":b=o[a];break;case"c":b=o[a][0];break;case"f":b=parseFloat(o[a]).toFixed(d);break;case"p":b=parseFloat(o[a]).toPrecision(d);break;case"e":b=parseFloat(o[a]).toExponential(d);break;case"x":b=parseInt(o[a]).toString(I||16);break;case"d":b=parseFloat(parseInt(o[a],I||10).toPrecision(d)).toFixed(0)}b="object"==typeof b?JSON.stringify(b):(+b).toString(I);let T=parseInt(p),M=p&&p[0]+""=="0"?"0":" ";for(;b.length<T;)b=void 0!==h?b+M:M+b;return b})}format(i,...o){this.buffer+=Vi.form(i,o)}toString(){return this.buffer}}let Ir=(()=>{class x{constructor(o){this.boundingBox=new Zr(o),this.codewords=new Array(o.getMaxY()-o.getMinY()+1)}getCodewordNearby(o){let a=this.getCodeword(o);if(null!=a)return a;for(let c=1;c<x.MAX_NEARBY_DISTANCE;c++){let u=this.imageRowToCodewordIndex(o)-c;if(u>=0&&(a=this.codewords[u],null!=a)||(u=this.imageRowToCodewordIndex(o)+c,u<this.codewords.length&&(a=this.codewords[u],null!=a)))return a}return null}imageRowToCodewordIndex(o){return o-this.boundingBox.getMinY()}setCodeword(o,a){this.codewords[this.imageRowToCodewordIndex(o)]=a}getCodeword(o){return this.codewords[this.imageRowToCodewordIndex(o)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const o=new Vi;let a=0;for(const c of this.codewords)null!=c?o.format("%3d: %3d|%3d%n",a++,c.getRowNumber(),c.getValue()):o.format("%3d:    |   %n",a++);return o.toString()}}return x.MAX_NEARBY_DISTANCE=5,x})();class sr{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let o=this.values.get(i);null==o&&(o=0),o++,this.values.set(i,o)}getValue(){let i=-1,o=new Array;for(const[a,c]of this.values.entries()){const u={getKey:()=>a,getValue:()=>c};u.getValue()>i?(i=u.getValue(),o=[],o.push(u.getKey())):u.getValue()===i&&o.push(u.getKey())}return pe.toIntArray(o)}getConfidence(i){return this.values.get(i)}}class Ll extends Ir{constructor(i,o){super(i),this._isLeft=o}setRowNumbers(){for(let i of this.getCodewords())i?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,i);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=-1,y=1,C=0;for(let D=d;D<h;D++){if(null==o[D])continue;let I=o[D],b=I.getRowNumber()-p;if(0===b)C++;else if(1===b)y=Math.max(y,C),C=1,p=I.getRowNumber();else if(b<0||I.getRowNumber()>=i.getRowCount()||b>D)o[D]=null;else{let T;T=y>2?(y-2)*b:b;let M=T>=D;for(let N=1;N<=T&&!M;N++)M=null!=o[D-N];M?o[D]=null:(p=I.getRowNumber(),C=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(null==i)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let o=new Int32Array(i.getRowCount());for(let a of this.getCodewords())if(null!=a){let c=a.getRowNumber();if(c>=o.length)continue;o[c]++}return o}adjustIncompleteIndicatorColumnRowNumbers(i){let o=this.getBoundingBox(),a=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(c.getY())),h=this.getCodewords(),p=-1;for(let y=u;y<d;y++){if(null==h[y])continue;let C=h[y];C.setRowNumberAsRowIndicatorColumn();let D=C.getRowNumber()-p;0===D||(1===D?p=C.getRowNumber():C.getRowNumber()>=i.getRowCount()?h[y]=null:p=C.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),o=new sr,a=new sr,c=new sr,u=new sr;for(let h of i){if(null==h)continue;h.setRowNumberAsRowIndicatorColumn();let p=h.getValue()%30,y=h.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:a.setValue(3*p+1);break;case 1:u.setValue(p/3),c.setValue(p%3);break;case 2:o.setValue(p+1)}}if(0===o.getValue().length||0===a.getValue().length||0===c.getValue().length||0===u.getValue().length||o.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<pe.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>pe.MAX_ROWS_IN_BARCODE)return null;let d=new lt(o.getValue()[0],a.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,d),d}removeIncorrectCodewords(i,o){for(let a=0;a<i.length;a++){let c=i[a];if(null==i[a])continue;let u=c.getValue()%30,d=c.getRowNumber();if(d>o.getRowCount())i[a]=null;else switch(this._isLeft||(d+=2),d%3){case 0:3*u+1!==o.getRowCountUpperPart()&&(i[a]=null);break;case 1:(Math.trunc(u/3)!==o.getErrorCorrectionLevel()||u%3!==o.getRowCountLowerPart())&&(i[a]=null);break;case 2:u+1!==o.getColumnCount()&&(i[a]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class $r{constructor(i,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let o,i=pe.MAX_CODEWORDS_IN_BARCODE;do{o=i,i=this.adjustRowNumbersAndGetCount()}while(i>0&&i<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(0===i)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let a=this.detectionResultColumns[o].getCodewords();for(let c=0;c<a.length;c++)null!=a[c]&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(o,c,a))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let i=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<i.length;a++)if(null!=i[a]&&null!=o[a]&&i[a].getRowNumber()===o[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[a];null!=u&&(u.setRowNumber(i[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let i=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<o.length;a++){if(null==o[a])continue;let c=o[a].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let h=this.detectionResultColumns[d].getCodewords()[a];null!=h&&(u=$r.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let i=0,o=this.detectionResultColumns[0].getCodewords();for(let a=0;a<o.length;a++){if(null==o[a])continue;let c=o[a].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let h=this.detectionResultColumns[d].getCodewords()[a];null!=h&&(u=$r.adjustRowNumberIfValid(c,u,h),h.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,o,a){return null==a||a.hasValidRowNumber()||(a.isValidRowNumber(i)?(a.setRowNumber(i),o=0):++o),o}adjustRowNumbers(i,o,a){if(!this.detectionResultColumns[i-1])return;let c=a[o],u=this.detectionResultColumns[i-1].getCodewords(),d=u;null!=this.detectionResultColumns[i+1]&&(d=this.detectionResultColumns[i+1].getCodewords());let h=new Array(14);h[2]=u[o],h[3]=d[o],o>0&&(h[0]=a[o-1],h[4]=u[o-1],h[5]=d[o-1]),o>1&&(h[8]=a[o-2],h[10]=u[o-2],h[11]=d[o-2]),o<a.length-1&&(h[1]=a[o+1],h[6]=u[o+1],h[7]=d[o+1]),o<a.length-2&&(h[9]=a[o+2],h[12]=u[o+2],h[13]=d[o+2]);for(let p of h)if($r.adjustRowNumber(c,p))return}static adjustRowNumber(i,o){return!(null==o||!o.hasValidRowNumber()||o.getBucket()!==i.getBucket()||(i.setRowNumber(o.getRowNumber()),0))}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,o){this.detectionResultColumns[i]=o}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];null==i&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new Vi;for(let a=0;a<i.getCodewords().length;a++){o.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(null==this.detectionResultColumns[c]){o.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[a];null!=u?o.format(" %3d|%3d",u.getRowNumber(),u.getValue()):o.format("    |   ")}o.format("%n")}return o.toString()}}let Pl=(()=>{class x{constructor(o,a,c,u){this.rowNumber=x.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(o),this.endX=Math.trunc(a),this.bucket=Math.trunc(c),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(o){return o!==x.BARCODE_ROW_UNKNOWN&&this.bucket===o%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(o){this.rowNumber=o}toString(){return this.rowNumber+"|"+this.value}}return x.BARCODE_ROW_UNKNOWN=-1,x})();class en{static initialize(){for(let i=0;i<pe.SYMBOL_TABLE.length;i++){let o=pe.SYMBOL_TABLE[i],a=1&o;for(let c=0;c<pe.BARS_IN_MODULE;c++){let u=0;for(;(1&o)===a;)u+=1,o>>=1;a=1&o,en.RATIOS_TABLE[i]||(en.RATIOS_TABLE[i]=new Array(pe.BARS_IN_MODULE)),en.RATIOS_TABLE[i][pe.BARS_IN_MODULE-c-1]=Math.fround(u/pe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let o=en.getDecodedCodewordValue(en.sampleBitCounts(i));return-1!==o?o:en.getClosestDecodedValue(i)}static sampleBitCounts(i){let o=Ve.sum(i),a=new Int32Array(pe.BARS_IN_MODULE),c=0,u=0;for(let d=0;d<pe.MODULES_IN_CODEWORD;d++)u+i[c]<=o/(2*pe.MODULES_IN_CODEWORD)+d*o/pe.MODULES_IN_CODEWORD&&(u+=i[c],c++),a[c]++;return a}static getDecodedCodewordValue(i){let o=en.getBitValue(i);return-1===pe.getCodeword(o)?-1:o}static getBitValue(i){let o=0;for(let a=0;a<i.length;a++)for(let c=0;c<i[a];c++)o=o<<1|(a%2==0?1:0);return Math.trunc(o)}static getClosestDecodedValue(i){let o=Ve.sum(i),a=new Array(pe.BARS_IN_MODULE);if(o>1)for(let d=0;d<a.length;d++)a[d]=Math.fround(i[d]/o);let c=vo.MAX_VALUE,u=-1;this.bSymbolTableReady||en.initialize();for(let d=0;d<en.RATIOS_TABLE.length;d++){let h=0,p=en.RATIOS_TABLE[d];for(let y=0;y<pe.BARS_IN_MODULE;y++){let C=Math.fround(p[y]-a[y]);if(h+=Math.fround(C*C),h>=c)break}h<c&&(c=h,u=pe.SYMBOL_TABLE[d])}return u}}en.bSymbolTableReady=!1,en.RATIOS_TABLE=new Array(pe.SYMBOL_TABLE.length).map(x=>new Array(pe.BARS_IN_MODULE));class Uo{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class gi{static parseLong(i,o){return parseInt(i,o)}}let jo=(()=>{class x extends zt{}return x.kind="NullPointerException",x})();class Fl extends zt{}class xe extends class Qs{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,o,a){if(null==i)throw new jo;if(o<0||o>i.length||a<0||o+a>i.length||o+a<0)throw new To;if(0!==a)for(let c=0;c<a;c++)this.write(i[o+c])}flush(){}close(){}}{constructor(i=32){if(super(),this.count=0,i<0)throw new te("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let a=this.buf.length<<1;if(a-i<0&&(a=i),a<0){if(i<0)throw new Fl;a=Ce.MAX_VALUE}this.buf=Et.copyOfUint8Array(this.buf,a)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,o,a){if(o<0||o>i.length||a<0||o+a-i.length>0)throw new To;this.ensureCapacity(this.count+a),qe.arraycopy(i,o,this.buf,this.count,a),this.count+=a}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Et.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?"string"==typeof i?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var ze=(()=>{return(x=ze||(ze={}))[x.ALPHA=0]="ALPHA",x[x.LOWER=1]="LOWER",x[x.MIXED=2]="MIXED",x[x.PUNCT=3]="PUNCT",x[x.ALPHA_SHIFT=4]="ALPHA_SHIFT",x[x.PUNCT_SHIFT=5]="PUNCT_SHIFT",ze;var x})();function Ks(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let $t;function Yn(x){if(typeof $t>"u"&&($t=Ks()),null===$t)throw new Error("BigInt is not supported!");return $t(x)}class P{static decode(i,o){let a=new Ge(""),c=Y.ISO8859_1;a.enableDecoding(c);let u=1,d=i[u++],h=new Uo;for(;u<i[0];){switch(d){case P.TEXT_COMPACTION_MODE_LATCH:u=P.textCompaction(i,u,a);break;case P.BYTE_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH_6:u=P.byteCompaction(d,i,c,u,a);break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[u++]);break;case P.NUMERIC_COMPACTION_MODE_LATCH:u=P.numericCompaction(i,u,a);break;case P.ECI_CHARSET:Y.getCharacterSetECIByValue(i[u++]);break;case P.ECI_GENERAL_PURPOSE:u+=2;break;case P.ECI_USER_DEFINED:u++;break;case P.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=P.decodeMacroBlock(i,u,h);break;case P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case P.MACRO_PDF417_TERMINATOR:throw new $;default:u--,u=P.textCompaction(i,u,a)}if(!(u<i.length))throw $.getFormatInstance();d=i[u++]}if(0===a.length())throw $.getFormatInstance();let p=new ci(null,a.toString(),null,o);return p.setOther(h),p}static decodeMacroBlock(i,o,a){if(o+P.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw $.getFormatInstance();let c=new Int32Array(P.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<P.NUMBER_OF_SEQUENCE_CODEWORDS;h++,o++)c[h]=i[o];a.setSegmentIndex(Ce.parseInt(P.decodeBase900toBase10(c,P.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new Ge;o=P.textCompaction(i,o,u),a.setFileId(u.toString());let d=-1;for(i[o]===P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=o+1);o<i[0];)switch(i[o]){case P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i[++o]){case P.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new Ge;o=P.textCompaction(i,o+1,h),a.setFileName(h.toString());break;case P.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let p=new Ge;o=P.textCompaction(i,o+1,p),a.setSender(p.toString());break;case P.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let y=new Ge;o=P.textCompaction(i,o+1,y),a.setAddressee(y.toString());break;case P.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new Ge;o=P.numericCompaction(i,o+1,C),a.setSegmentCount(Ce.parseInt(C.toString()));break;case P.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let D=new Ge;o=P.numericCompaction(i,o+1,D),a.setTimestamp(gi.parseLong(D.toString()));break;case P.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new Ge;o=P.numericCompaction(i,o+1,I),a.setChecksum(Ce.parseInt(I.toString()));break;case P.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let b=new Ge;o=P.numericCompaction(i,o+1,b),a.setFileSize(gi.parseLong(b.toString()));break;default:throw $.getFormatInstance()}break;case P.MACRO_PDF417_TERMINATOR:o++,a.setLastSegment(!0);break;default:throw $.getFormatInstance()}if(-1!==d){let h=o-d;a.isLastSegment()&&h--,a.setOptionalData(Et.copyOfRange(i,d,d+h))}return o}static textCompaction(i,o,a){let c=new Int32Array(2*(i[0]-o)),u=new Int32Array(2*(i[0]-o)),d=0,h=!1;for(;o<i[0]&&!h;){let p=i[o++];if(p<P.TEXT_COMPACTION_MODE_LATCH)c[d]=p/30,c[d+1]=p%30,d+=2;else switch(p){case P.TEXT_COMPACTION_MODE_LATCH:c[d++]=P.TEXT_COMPACTION_MODE_LATCH;break;case P.BYTE_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH_6:case P.NUMERIC_COMPACTION_MODE_LATCH:case P.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case P.MACRO_PDF417_TERMINATOR:o--,h=!0;break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[d]=P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,p=i[o++],u[d]=p,d++}}return P.decodeTextCompaction(c,u,d,a),o}static decodeTextCompaction(i,o,a,c){let u=ze.ALPHA,d=ze.ALPHA,h=0;for(;h<a;){let p=i[h],y="";switch(u){case ze.ALPHA:if(p<26)y=String.fromCharCode(65+p);else switch(p){case 26:y=" ";break;case P.LL:u=ze.LOWER;break;case P.ML:u=ze.MIXED;break;case P.PS:d=u,u=ze.PUNCT_SHIFT;break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[h]);break;case P.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA}break;case ze.LOWER:if(p<26)y=String.fromCharCode(97+p);else switch(p){case 26:y=" ";break;case P.AS:d=u,u=ze.ALPHA_SHIFT;break;case P.ML:u=ze.MIXED;break;case P.PS:d=u,u=ze.PUNCT_SHIFT;break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[h]);break;case P.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA}break;case ze.MIXED:if(p<P.PL)y=P.MIXED_CHARS[p];else switch(p){case P.PL:u=ze.PUNCT;break;case 26:y=" ";break;case P.LL:u=ze.LOWER;break;case P.AL:u=ze.ALPHA;break;case P.PS:d=u,u=ze.PUNCT_SHIFT;break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[h]);break;case P.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA}break;case ze.PUNCT:if(p<P.PAL)y=P.PUNCT_CHARS[p];else switch(p){case P.PAL:u=ze.ALPHA;break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[h]);break;case P.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA}break;case ze.ALPHA_SHIFT:if(u=d,p<26)y=String.fromCharCode(65+p);else switch(p){case 26:y=" ";break;case P.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA}break;case ze.PUNCT_SHIFT:if(u=d,p<P.PAL)y=P.PUNCT_CHARS[p];else switch(p){case P.PAL:u=ze.ALPHA;break;case P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(o[h]);break;case P.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA}}""!==y&&c.append(y),h++}}static byteCompaction(i,o,a,c,u){let d=new xe,h=0,p=0,y=!1;switch(i){case P.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),D=o[c++];for(;c<o[0]&&!y;)switch(C[h++]=D,p=900*p+D,D=o[c++],D){case P.TEXT_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH:case P.NUMERIC_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH_6:case P.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case P.MACRO_PDF417_TERMINATOR:c--,y=!0;break;default:if(h%5==0&&h>0){for(let I=0;I<6;++I)d.write(Number(Yn(p)>>Yn(8*(5-I))));p=0,h=0}}c===o[0]&&D<P.TEXT_COMPACTION_MODE_LATCH&&(C[h++]=D);for(let I=0;I<h;I++)d.write(C[I]);break;case P.BYTE_COMPACTION_MODE_LATCH_6:for(;c<o[0]&&!y;){let I=o[c++];if(I<P.TEXT_COMPACTION_MODE_LATCH)h++,p=900*p+I;else switch(I){case P.TEXT_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH:case P.NUMERIC_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH_6:case P.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case P.MACRO_PDF417_TERMINATOR:c--,y=!0}if(h%5==0&&h>0){for(let b=0;b<6;++b)d.write(Number(Yn(p)>>Yn(8*(5-b))));p=0,h=0}}}return u.append(Ft.decode(d.toByteArray(),a)),c}static numericCompaction(i,o,a){let c=0,u=!1,d=new Int32Array(P.MAX_NUMERIC_CODEWORDS);for(;o<i[0]&&!u;){let h=i[o++];if(o===i[0]&&(u=!0),h<P.TEXT_COMPACTION_MODE_LATCH)d[c]=h,c++;else switch(h){case P.TEXT_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH:case P.BYTE_COMPACTION_MODE_LATCH_6:case P.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case P.MACRO_PDF417_TERMINATOR:o--,u=!0}(c%P.MAX_NUMERIC_CODEWORDS==0||h===P.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(a.append(P.decodeBase900toBase10(d,c)),c=0)}return o}static decodeBase900toBase10(i,o){let a=Yn(0);for(let u=0;u<o;u++)a+=P.EXP900[o-u-1]*Yn(i[u]);let c=a.toString();if("1"!==c.charAt(0))throw new $;return c.substring(1)}}P.TEXT_COMPACTION_MODE_LATCH=900,P.BYTE_COMPACTION_MODE_LATCH=901,P.NUMERIC_COMPACTION_MODE_LATCH=902,P.BYTE_COMPACTION_MODE_LATCH_6=924,P.ECI_USER_DEFINED=925,P.ECI_GENERAL_PURPOSE=926,P.ECI_CHARSET=927,P.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,P.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,P.MACRO_PDF417_TERMINATOR=922,P.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,P.MAX_NUMERIC_CODEWORDS=15,P.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,P.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,P.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,P.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,P.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,P.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,P.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,P.PL=25,P.LL=27,P.AS=27,P.ML=28,P.AL=28,P.PS=29,P.PAL=29,P.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",P.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",P.EXP900=Ks()?function Zd(){let x=[];x[0]=Yn(1);let i=Yn(900);x[1]=i;for(let o=2;o<16;o++)x[o]=x[o-1]*i;return x}():[],P.NUMBER_OF_SEQUENCE_CODEWORDS=2;class de{constructor(){}static decode(i,o,a,c,u,d,h){let D,p=new Zr(i,o,a,c,u),y=null,C=null;for(let T=!0;;T=!1){if(null!=o&&(y=de.getRowIndicatorColumn(i,p,o,!0,d,h)),null!=c&&(C=de.getRowIndicatorColumn(i,p,c,!1,d,h)),D=de.merge(y,C),null==D)throw V.getNotFoundInstance();let M=D.getBoundingBox();if(!T||null==M||!(M.getMinY()<p.getMinY()||M.getMaxY()>p.getMaxY()))break;p=M}D.setBoundingBox(p);let I=D.getBarcodeColumnCount()+1;D.setDetectionResultColumn(0,y),D.setDetectionResultColumn(I,C);let b=null!=y;for(let T=1;T<=I;T++){let N,M=b?T:I-T;if(void 0!==D.getDetectionResultColumn(M))continue;N=0===M||M===I?new Ll(p,0===M):new Ir(p),D.setDetectionResultColumn(M,N);let L=-1,W=L;for(let Z=p.getMinY();Z<=p.getMaxY();Z++){if(L=de.getStartColumn(D,M,Z,b),L<0||L>p.getMaxX()){if(-1===W)continue;L=W}let B=de.detectCodeword(i,p.getMinX(),p.getMaxX(),b,L,Z,d,h);null!=B&&(N.setCodeword(Z,B),W=L,d=Math.min(d,B.getWidth()),h=Math.max(h,B.getWidth()))}}return de.createDecoderResult(D)}static merge(i,o){if(null==i&&null==o)return null;let a=de.getBarcodeMetadata(i,o);if(null==a)return null;let c=Zr.merge(de.adjustBoundingBox(i),de.adjustBoundingBox(o));return new $r(a,c)}static adjustBoundingBox(i){if(null==i)return null;let o=i.getRowHeights();if(null==o)return null;let a=de.getMax(o),c=0;for(let h of o)if(c+=a-h,h>0)break;let u=i.getCodewords();for(let h=0;c>0&&null==u[h];h++)c--;let d=0;for(let h=o.length-1;h>=0&&(d+=a-o[h],!(o[h]>0));h--);for(let h=u.length-1;d>0&&null==u[h];h--)d--;return i.getBoundingBox().addMissingRows(c,d,i.isLeft())}static getMax(i){let o=-1;for(let a of i)o=Math.max(o,a);return o}static getBarcodeMetadata(i,o){let a,c;return null==i||null==(a=i.getBarcodeMetadata())?null==o?null:o.getBarcodeMetadata():null==o||null==(c=o.getBarcodeMetadata())?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(i,o,a,c,u,d){let h=new Ll(o,c);for(let p=0;p<2;p++){let y=0===p?1:-1,C=Math.trunc(Math.trunc(a.getX()));for(let D=Math.trunc(Math.trunc(a.getY()));D<=o.getMaxY()&&D>=o.getMinY();D+=y){let I=de.detectCodeword(i,0,i.getWidth(),c,C,D,u,d);null!=I&&(h.setCodeword(D,I),C=c?I.getStartX():I.getEndX())}}return h}static adjustCodewordCount(i,o){let a=o[0][1],c=a.getValue(),u=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-de.getNumberOfECCodeWords(i.getBarcodeECLevel());if(0===c.length){if(u<1||u>pe.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();a.setValue(u)}else c[0]!==u&&a.setValue(u)}static createDecoderResult(i){let o=de.createBarcodeMatrix(i);de.adjustCodewordCount(i,o);let a=new Array,c=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),u=[],d=new Array;for(let p=0;p<i.getBarcodeRowCount();p++)for(let y=0;y<i.getBarcodeColumnCount();y++){let C=o[p][y+1].getValue(),D=p*i.getBarcodeColumnCount()+y;0===C.length?a.push(D):1===C.length?c[D]=C[0]:(d.push(D),u.push(C))}let h=new Array(u.length);for(let p=0;p<h.length;p++)h[p]=u[p];return de.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),c,pe.toIntArray(a),pe.toIntArray(d),h)}static createDecoderResultFromAmbiguousValues(i,o,a,c,u){let d=new Int32Array(c.length),h=100;for(;h-- >0;){for(let p=0;p<d.length;p++)o[c[p]]=u[p][d[p]];try{return de.decodeCodewords(o,i,a)}catch(p){if(!(p instanceof It))throw p}if(0===d.length)throw It.getChecksumInstance();for(let p=0;p<d.length;p++){if(d[p]<u[p].length-1){d[p]++;break}if(d[p]=0,p===d.length-1)throw It.getChecksumInstance()}}throw It.getChecksumInstance()}static createBarcodeMatrix(i){let o=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let c=0;c<o.length;c++)for(let u=0;u<o[c].length;u++)o[c][u]=new sr;let a=0;for(let c of i.getDetectionResultColumns()){if(null!=c)for(let u of c.getCodewords())if(null!=u){let d=u.getRowNumber();if(d>=0){if(d>=o.length)continue;o[d][a].setValue(u.getValue())}}a++}return o}static isValidBarcodeColumn(i,o){return o>=0&&o<=i.getBarcodeColumnCount()+1}static getStartColumn(i,o,a,c){let u=c?1:-1,d=null;if(de.isValidBarcodeColumn(i,o-u)&&(d=i.getDetectionResultColumn(o-u).getCodeword(a)),null!=d)return c?d.getEndX():d.getStartX();if(d=i.getDetectionResultColumn(o).getCodewordNearby(a),null!=d)return c?d.getStartX():d.getEndX();if(de.isValidBarcodeColumn(i,o-u)&&(d=i.getDetectionResultColumn(o-u).getCodewordNearby(a)),null!=d)return c?d.getEndX():d.getStartX();let h=0;for(;de.isValidBarcodeColumn(i,o-u);){o-=u;for(let p of i.getDetectionResultColumn(o).getCodewords())if(null!=p)return(c?p.getEndX():p.getStartX())+u*h*(p.getEndX()-p.getStartX());h++}return c?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,o,a,c,u,d,h,p){u=de.adjustCodewordStartColumn(i,o,a,c,u,d);let y=de.getModuleBitCount(i,o,a,c,u,d);if(null==y)return null;let C,D=Ve.sum(y);if(c)C=u+D;else{for(let T=0;T<y.length/2;T++){let M=y[T];y[T]=y[y.length-1-T],y[y.length-1-T]=M}C=u,u=C-D}if(!de.checkCodewordSkew(D,h,p))return null;let I=en.getDecodedValue(y),b=pe.getCodeword(I);return-1===b?null:new Pl(u,C,de.getCodewordBucketNumber(I),b)}static getModuleBitCount(i,o,a,c,u,d){let h=u,p=new Int32Array(8),y=0,C=c?1:-1,D=c;for(;(c?h<a:h>=o)&&y<p.length;)i.get(h,d)===D?(p[y]++,h+=C):(y++,D=!D);return y===p.length||h===(c?a:o)&&y===p.length-1?p:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,o,a,c,u,d){let h=u,p=c?-1:1;for(let y=0;y<2;y++){for(;(c?h>=o:h<a)&&c===i.get(h,d);){if(Math.abs(u-h)>de.CODEWORD_SKEW_SIZE)return u;h+=p}p=-p,c=!c}return h}static checkCodewordSkew(i,o,a){return o-de.CODEWORD_SKEW_SIZE<=i&&i<=a+de.CODEWORD_SKEW_SIZE}static decodeCodewords(i,o,a){if(0===i.length)throw $.getFormatInstance();let c=1<<o+1,u=de.correctErrors(i,a,c);de.verifyCodewordCount(i,c);let d=P.decode(i,""+o);return d.setErrorsCorrected(u),d.setErasures(a.length),d}static correctErrors(i,o,a){if(null!=o&&o.length>a/2+de.MAX_ERRORS||a<0||a>de.MAX_EC_CODEWORDS)throw It.getChecksumInstance();return de.errorCorrection.decode(i,a,o)}static verifyCodewordCount(i,o){if(i.length<4)throw $.getFormatInstance();let a=i[0];if(a>i.length)throw $.getFormatInstance();if(0===a){if(!(o<i.length))throw $.getFormatInstance();i[0]=i.length-o}}static getBitCountForCodeword(i){let o=new Int32Array(8),a=0,c=o.length-1;for(;!((1&i)!==a&&(a=1&i,c--,c<0));)o[c]++,i>>=1;return o}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return de.getCodewordBucketNumber(de.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let o=new Vi;for(let a=0;a<i.length;a++){o.format("Row %2d: ",a);for(let c=0;c<i[a].length;c++){let u=i[a][c];0===u.getValue().length?o.format("        ",null):o.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}o.format("%n")}return o.toString()}}de.CODEWORD_SKEW_SIZE=2,de.MAX_ERRORS=3,de.MAX_EC_CODEWORDS=512,de.errorCorrection=new Rl;class Wt{decode(i,o=null){let a=Wt.decode(i,o,!1);if(null==a||0===a.length||null==a[0])throw V.getNotFoundInstance();return a[0]}decodeMultiple(i,o=null){try{return Wt.decode(i,o,!0)}catch(a){throw a instanceof $||a instanceof It?V.getNotFoundInstance():a}}static decode(i,o,a){const c=new Array,u=Se.detectMultiple(i,o,a);for(const d of u.getPoints()){const h=de.decode(u.getBits(),d[4],d[5],d[6],d[7],Wt.getMinCodewordWidth(d),Wt.getMaxCodewordWidth(d)),p=new Bt(h.getText(),h.getRawBytes(),void 0,d,ce.PDF_417);p.putMetadata(mt.ERROR_CORRECTION_LEVEL,h.getECLevel());const y=h.getOther();null!=y&&p.putMetadata(mt.PDF417_EXTRA_METADATA,y),c.push(p)}return c.map(d=>d)}static getMaxWidth(i,o){return null==i||null==o?0:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMinWidth(i,o){return null==i||null==o?Ce.MAX_VALUE:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Wt.getMaxWidth(i[0],i[4]),Wt.getMaxWidth(i[6],i[2])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN),Math.max(Wt.getMaxWidth(i[1],i[5]),Wt.getMaxWidth(i[7],i[3])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Wt.getMinWidth(i[0],i[4]),Wt.getMinWidth(i[6],i[2])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN),Math.min(Wt.getMinWidth(i[1],i[5]),Wt.getMinWidth(i[7],i[3])*pe.MODULES_IN_CODEWORD/pe.MODULES_IN_STOP_PATTERN)))}reset(){}}let Js=(()=>{class x extends zt{}return x.kind="ReaderException",x})();class Sn{constructor(i,o){this.verbose=!0===i,o&&this.setHints(o)}decode(i,o){return o&&this.setHints(o),this.decodeInternal(i)}decodeWithState(i){return null==this.readers&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const o=!nt(i)&&!0===i.get(rt.TRY_HARDER),a=nt(i)?null:i.get(rt.POSSIBLE_FORMATS),c=new Array;if(!nt(a)){const u=a.some(d=>d===ce.UPC_A||d===ce.UPC_E||d===ce.EAN_13||d===ce.EAN_8||d===ce.CODABAR||d===ce.CODE_39||d===ce.CODE_93||d===ce.CODE_128||d===ce.ITF||d===ce.RSS_14||d===ce.RSS_EXPANDED);u&&!o&&c.push(new Yr(i,this.verbose)),a.includes(ce.QR_CODE)&&c.push(new or),a.includes(ce.DATA_MATRIX)&&c.push(new Xr),a.includes(ce.AZTEC)&&c.push(new Bn),a.includes(ce.PDF_417)&&c.push(new Wt),u&&o&&c.push(new Yr(i,this.verbose))}0===c.length&&(o||c.push(new Yr(i,this.verbose)),c.push(new or),c.push(new Xr),c.push(new Bn),c.push(new Wt),o&&c.push(new Yr(i,this.verbose))),this.readers=c}reset(){if(null!==this.readers)for(const i of this.readers)i.reset()}decodeInternal(i){if(null===this.readers)throw new Js("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(i,this.hints)}catch(a){if(a instanceof Js)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}var Xn=(()=>{return(x=Xn||(Xn={}))[x.ERROR_CORRECTION=0]="ERROR_CORRECTION",x[x.CHARACTER_SET=1]="CHARACTER_SET",x[x.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",x[x.MIN_SIZE=3]="MIN_SIZE",x[x.MAX_SIZE=4]="MAX_SIZE",x[x.MARGIN=5]="MARGIN",x[x.PDF417_COMPACT=6]="PDF417_COMPACT",x[x.PDF417_COMPACTION=7]="PDF417_COMPACTION",x[x.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",x[x.AZTEC_LAYERS=9]="AZTEC_LAYERS",x[x.QR_VERSION=10]="QR_VERSION",Xn;var x})(),fe=Xn;class qr{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Gt(i,Int32Array.from([1])))}buildGenerator(i){const o=this.cachedGenerators;if(i>=o.length){let a=o[o.length-1];const c=this.field;for(let u=o.length;u<=i;u++){const d=a.multiply(new Gt(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));o.push(d),a=d}}return o[i]}encode(i,o){if(0===o)throw new te("No error correction bytes");const a=i.length-o;if(a<=0)throw new te("No data bytes provided");const c=this.buildGenerator(o),u=new Int32Array(a);qe.arraycopy(i,0,u,0,a);let d=new Gt(this.field,u);d=d.multiplyByMonomial(o,1);const p=d.divide(c)[1].getCoefficients(),y=o-p.length;for(let C=0;C<y;C++)i[a+C]=0;qe.arraycopy(p,0,i,a+y,p.length)}}let ar=(()=>{class x{constructor(){}static applyMaskPenaltyRule1(o){return x.applyMaskPenaltyRule1Internal(o,!0)+x.applyMaskPenaltyRule1Internal(o,!1)}static applyMaskPenaltyRule2(o){let a=0;const c=o.getArray(),u=o.getWidth(),d=o.getHeight();for(let h=0;h<d-1;h++){const p=c[h];for(let y=0;y<u-1;y++){const C=p[y];C===p[y+1]&&C===c[h+1][y]&&C===c[h+1][y+1]&&a++}}return x.N2*a}static applyMaskPenaltyRule3(o){let a=0;const c=o.getArray(),u=o.getWidth(),d=o.getHeight();for(let h=0;h<d;h++)for(let p=0;p<u;p++){const y=c[h];p+6<u&&1===y[p]&&0===y[p+1]&&1===y[p+2]&&1===y[p+3]&&1===y[p+4]&&0===y[p+5]&&1===y[p+6]&&(x.isWhiteHorizontal(y,p-4,p)||x.isWhiteHorizontal(y,p+7,p+11))&&a++,h+6<d&&1===c[h][p]&&0===c[h+1][p]&&1===c[h+2][p]&&1===c[h+3][p]&&1===c[h+4][p]&&0===c[h+5][p]&&1===c[h+6][p]&&(x.isWhiteVertical(c,p,h-4,h)||x.isWhiteVertical(c,p,h+7,h+11))&&a++}return a*x.N3}static isWhiteHorizontal(o,a,c){a=Math.max(a,0),c=Math.min(c,o.length);for(let u=a;u<c;u++)if(1===o[u])return!1;return!0}static isWhiteVertical(o,a,c,u){c=Math.max(c,0),u=Math.min(u,o.length);for(let d=c;d<u;d++)if(1===o[d][a])return!1;return!0}static applyMaskPenaltyRule4(o){let a=0;const c=o.getArray(),u=o.getWidth(),d=o.getHeight();for(let y=0;y<d;y++){const C=c[y];for(let D=0;D<u;D++)1===C[D]&&a++}const h=o.getHeight()*o.getWidth();return Math.floor(10*Math.abs(2*a-h)/h)*x.N4}static getDataMaskBit(o,a,c){let u,d;switch(o){case 0:u=c+a&1;break;case 1:u=1&c;break;case 2:u=a%3;break;case 3:u=(c+a)%3;break;case 4:u=Math.floor(c/2)+Math.floor(a/3)&1;break;case 5:d=c*a,u=(1&d)+d%3;break;case 6:d=c*a,u=(1&d)+d%3&1;break;case 7:d=c*a,u=d%3+(c+a&1)&1;break;default:throw new te("Invalid mask pattern: "+o)}return 0===u}static applyMaskPenaltyRule1Internal(o,a){let c=0;const u=a?o.getHeight():o.getWidth(),d=a?o.getWidth():o.getHeight(),h=o.getArray();for(let p=0;p<u;p++){let y=0,C=-1;for(let D=0;D<d;D++){const I=a?h[p][D]:h[D][p];I===C?y++:(y>=5&&(c+=x.N1+(y-5)),y=1,C=I)}y>=5&&(c+=x.N1+(y-5))}return c}}return x.N1=3,x.N2=3,x.N3=40,x.N4=10,x})();class Qr{constructor(i,o){this.width=i,this.height=o;const a=new Array(o);for(let c=0;c!==o;c++)a[c]=new Uint8Array(i);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(i,o){return this.bytes[o][i]}getArray(){return this.bytes}setNumber(i,o,a){this.bytes[o][i]=a}setBoolean(i,o,a){this.bytes[o][i]=a?1:0}clear(i){for(const o of this.bytes)Et.fill(o,i)}equals(i){if(!(i instanceof Qr))return!1;const o=i;if(this.width!==o.width||this.height!==o.height)return!1;for(let a=0,c=this.height;a<c;++a){const u=this.bytes[a],d=o.bytes[a];for(let h=0,p=this.width;h<p;++h)if(u[h]!==d[h])return!1}return!0}toString(){const i=new Ge;for(let o=0,a=this.height;o<a;++o){const c=this.bytes[o];for(let u=0,d=this.width;u<d;++u)switch(c[u]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ")}i.append("\n")}return i.toString()}}let pi=(()=>{class x{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const o=new Ge;return o.append("<<\n"),o.append(" mode: "),o.append(this.mode?this.mode.toString():"null"),o.append("\n ecLevel: "),o.append(this.ecLevel?this.ecLevel.toString():"null"),o.append("\n version: "),o.append(this.version?this.version.toString():"null"),o.append("\n maskPattern: "),o.append(this.maskPattern.toString()),this.matrix?(o.append("\n matrix:\n"),o.append(this.matrix.toString())):o.append("\n matrix: null\n"),o.append(">>\n"),o.toString()}setMode(o){this.mode=o}setECLevel(o){this.ecLevel=o}setVersion(o){this.version=o}setMaskPattern(o){this.maskPattern=o}setMatrix(o){this.matrix=o}static isValidMaskPattern(o){return o>=0&&o<x.NUM_MASK_PATTERNS}}return x.NUM_MASK_PATTERNS=8,x})(),Fe=(()=>{class x extends zt{}return x.kind="WriterException",x})();class le{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,o,a,c,u){le.clearMatrix(u),le.embedBasicPatterns(a,u),le.embedTypeInfo(o,c,u),le.maybeEmbedVersionInfo(a,u),le.embedDataBits(i,c,u)}static embedBasicPatterns(i,o){le.embedPositionDetectionPatternsAndSeparators(o),le.embedDarkDotAtLeftBottomCorner(o),le.maybeEmbedPositionAdjustmentPatterns(i,o),le.embedTimingPatterns(o)}static embedTypeInfo(i,o,a){const c=new Qe;le.makeTypeInfoBits(i,o,c);for(let u=0,d=c.getSize();u<d;++u){const h=c.get(c.getSize()-1-u),p=le.TYPE_INFO_COORDINATES[u];if(a.setBoolean(p[0],p[1],h),u<8){const D=a.getWidth()-u-1;a.setBoolean(D,8,h)}else{const I=a.getHeight()-7+(u-8);a.setBoolean(8,I,h)}}}static maybeEmbedVersionInfo(i,o){if(i.getVersionNumber()<7)return;const a=new Qe;le.makeVersionInfoBits(i,a);let c=17;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const h=a.get(c);c--,o.setBoolean(u,o.getHeight()-11+d,h),o.setBoolean(o.getHeight()-11+d,u,h)}}static embedDataBits(i,o,a){let c=0,u=-1,d=a.getWidth()-1,h=a.getHeight()-1;for(;d>0;){for(6===d&&(d-=1);h>=0&&h<a.getHeight();){for(let p=0;p<2;++p){const y=d-p;if(!le.isEmpty(a.get(y,h)))continue;let C;c<i.getSize()?(C=i.get(c),++c):C=!1,255!==o&&ar.getDataMaskBit(o,y,h)&&(C=!C),a.setBoolean(y,h,C)}h+=u}u=-u,h+=u,d-=2}if(c!==i.getSize())throw new Fe("Not all bits consumed: "+c+"/"+i.getSize())}static findMSBSet(i){return 32-Ce.numberOfLeadingZeros(i)}static calculateBCHCode(i,o){if(0===o)throw new te("0 polynomial");const a=le.findMSBSet(o);for(i<<=a-1;le.findMSBSet(i)>=a;)i^=o<<le.findMSBSet(i)-a;return i}static makeTypeInfoBits(i,o,a){if(!pi.isValidMaskPattern(o))throw new Fe("Invalid mask pattern");const c=i.getBits()<<3|o;a.appendBits(c,5);const u=le.calculateBCHCode(c,le.TYPE_INFO_POLY);a.appendBits(u,10);const d=new Qe;if(d.appendBits(le.TYPE_INFO_MASK_PATTERN,15),a.xor(d),15!==a.getSize())throw new Fe("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(i,o){o.appendBits(i.getVersionNumber(),6);const a=le.calculateBCHCode(i.getVersionNumber(),le.VERSION_INFO_POLY);if(o.appendBits(a,12),18!==o.getSize())throw new Fe("should not happen but we got: "+o.getSize())}static isEmpty(i){return 255===i}static embedTimingPatterns(i){for(let o=8;o<i.getWidth()-8;++o){const a=(o+1)%2;le.isEmpty(i.get(o,6))&&i.setNumber(o,6,a),le.isEmpty(i.get(6,o))&&i.setNumber(6,o,a)}}static embedDarkDotAtLeftBottomCorner(i){if(0===i.get(8,i.getHeight()-8))throw new Fe;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,o,a){for(let c=0;c<8;++c){if(!le.isEmpty(a.get(i+c,o)))throw new Fe;a.setNumber(i+c,o,0)}}static embedVerticalSeparationPattern(i,o,a){for(let c=0;c<7;++c){if(!le.isEmpty(a.get(i,o+c)))throw new Fe;a.setNumber(i,o+c,0)}}static embedPositionAdjustmentPattern(i,o,a){for(let c=0;c<5;++c){const u=le.POSITION_ADJUSTMENT_PATTERN[c];for(let d=0;d<5;++d)a.setNumber(i+d,o+c,u[d])}}static embedPositionDetectionPattern(i,o,a){for(let c=0;c<7;++c){const u=le.POSITION_DETECTION_PATTERN[c];for(let d=0;d<7;++d)a.setNumber(i+d,o+c,u[d])}}static embedPositionDetectionPatternsAndSeparators(i){const o=le.POSITION_DETECTION_PATTERN[0].length;le.embedPositionDetectionPattern(0,0,i),le.embedPositionDetectionPattern(i.getWidth()-o,0,i),le.embedPositionDetectionPattern(0,i.getWidth()-o,i);le.embedHorizontalSeparationPattern(0,7,i),le.embedHorizontalSeparationPattern(i.getWidth()-8,7,i),le.embedHorizontalSeparationPattern(0,i.getWidth()-8,i);le.embedVerticalSeparationPattern(7,0,i),le.embedVerticalSeparationPattern(i.getHeight()-7-1,0,i),le.embedVerticalSeparationPattern(7,i.getHeight()-7,i)}static maybeEmbedPositionAdjustmentPatterns(i,o){if(i.getVersionNumber()<2)return;const a=i.getVersionNumber()-1,c=le.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,d=c.length;u!==d;u++){const h=c[u];if(h>=0)for(let p=0;p!==d;p++){const y=c[p];y>=0&&le.isEmpty(o.get(y,h))&&le.embedPositionAdjustmentPattern(y-2,h-2,o)}}}}le.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),le.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),le.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),le.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),le.VERSION_INFO_POLY=7973,le.TYPE_INFO_POLY=1335,le.TYPE_INFO_MASK_PATTERN=21522;class Bl{constructor(i,o){this.dataBytes=i,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Je{constructor(){}static calculateMaskPenalty(i){return ar.applyMaskPenaltyRule1(i)+ar.applyMaskPenaltyRule2(i)+ar.applyMaskPenaltyRule3(i)+ar.applyMaskPenaltyRule4(i)}static encode(i,o,a=null){let c=Je.DEFAULT_BYTE_MODE_ENCODING;const u=null!==a&&void 0!==a.get(fe.CHARACTER_SET);u&&(c=a.get(fe.CHARACTER_SET).toString());const d=this.chooseMode(i,c),h=new Qe;if(d===ae.BYTE&&(u||Je.DEFAULT_BYTE_MODE_ENCODING!==c)){const Z=Y.getCharacterSetECIByName(c);void 0!==Z&&this.appendECI(Z,h)}this.appendModeInfo(d,h);const p=new Qe;let y;if(this.appendBytes(i,d,p,c),null!==a&&void 0!==a.get(fe.QR_VERSION)){const Z=Number.parseInt(a.get(fe.QR_VERSION).toString(),10);y=se.getVersionForNumber(Z);const B=this.calculateBitsNeeded(d,h,p,y);if(!this.willFit(B,y,o))throw new Fe("Data too big for requested version")}else y=this.recommendVersion(o,d,h,p);const C=new Qe;C.appendBitArray(h);const D=d===ae.BYTE?p.getSizeInBytes():i.length;this.appendLengthInfo(D,y,d,C),C.appendBitArray(p);const I=y.getECBlocksForLevel(o),b=y.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(b,C);const T=this.interleaveWithECBytes(C,y.getTotalCodewords(),b,I.getNumBlocks()),M=new pi;M.setECLevel(o),M.setMode(d),M.setVersion(y);const N=y.getDimensionForVersion(),L=new Qr(N,N),W=this.chooseMaskPattern(T,o,y,L);return M.setMaskPattern(W),le.buildMatrix(T,o,y,W,L),M.setMatrix(L),M}static recommendVersion(i,o,a,c){const u=this.calculateBitsNeeded(o,a,c,se.getVersionForNumber(1)),d=this.chooseVersion(u,i),h=this.calculateBitsNeeded(o,a,c,d);return this.chooseVersion(h,i)}static calculateBitsNeeded(i,o,a,c){return o.getSize()+i.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(i){return i<Je.ALPHANUMERIC_TABLE.length?Je.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,o=null){if(Y.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(i))return ae.KANJI;let a=!1,c=!1;for(let u=0,d=i.length;u<d;++u){const h=i.charAt(u);if(Je.isDigit(h))a=!0;else{if(-1===this.getAlphanumericCode(h.charCodeAt(0)))return ae.BYTE;c=!0}}return c?ae.ALPHANUMERIC:a?ae.NUMERIC:ae.BYTE}static isOnlyDoubleByteKanji(i){let o;try{o=Ft.encode(i,Y.SJIS)}catch{return!1}const a=o.length;if(a%2!=0)return!1;for(let c=0;c<a;c+=2){const u=255&o[c];if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(i,o,a,c){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let h=0;h<pi.NUM_MASK_PATTERNS;h++){le.buildMatrix(i,o,a,h,c);let p=this.calculateMaskPenalty(c);p<u&&(u=p,d=h)}return d}static chooseVersion(i,o){for(let a=1;a<=40;a++){const c=se.getVersionForNumber(a);if(Je.willFit(i,c,o))return c}throw new Fe("Data too big")}static willFit(i,o,a){return o.getTotalCodewords()-o.getECBlocksForLevel(a).getTotalECCodewords()>=(i+7)/8}static terminateBits(i,o){const a=8*i;if(o.getSize()>a)throw new Fe("data bits cannot fit in the QR Code"+o.getSize()+" > "+a);for(let d=0;d<4&&o.getSize()<a;++d)o.appendBit(!1);const c=7&o.getSize();if(c>0)for(let d=c;d<8;d++)o.appendBit(!1);const u=i-o.getSizeInBytes();for(let d=0;d<u;++d)o.appendBits(0==(1&d)?236:17,8);if(o.getSize()!==a)throw new Fe("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,o,a,c,u,d){if(c>=a)throw new Fe("Block ID too large");const h=i%a,p=a-h,y=Math.floor(i/a),C=y+1,D=Math.floor(o/a),I=D+1,b=y-D,T=C-I;if(b!==T)throw new Fe("EC bytes mismatch");if(a!==p+h)throw new Fe("RS blocks mismatch");if(i!==(D+b)*p+(I+T)*h)throw new Fe("Total bytes mismatch");c<p?(u[0]=D,d[0]=b):(u[0]=I,d[0]=T)}static interleaveWithECBytes(i,o,a,c){if(i.getSizeInBytes()!==a)throw new Fe("Number of bits and data bytes does not match");let u=0,d=0,h=0;const p=new Array;for(let C=0;C<c;++C){const D=new Int32Array(1),I=new Int32Array(1);Je.getNumDataBytesAndNumECBytesForBlockID(o,a,c,C,D,I);const b=D[0],T=new Uint8Array(b);i.toBytes(8*u,T,0,b);const M=Je.generateECBytes(T,I[0]);p.push(new Bl(T,M)),d=Math.max(d,b),h=Math.max(h,M.length),u+=D[0]}if(a!==u)throw new Fe("Data bytes does not match offset");const y=new Qe;for(let C=0;C<d;++C)for(const D of p){const I=D.getDataBytes();C<I.length&&y.appendBits(I[C],8)}for(let C=0;C<h;++C)for(const D of p){const I=D.getErrorCorrectionBytes();C<I.length&&y.appendBits(I[C],8)}if(o!==y.getSizeInBytes())throw new Fe("Interleaving error: "+o+" and "+y.getSizeInBytes()+" differ.");return y}static generateECBytes(i,o){const a=i.length,c=new Int32Array(a+o);for(let d=0;d<a;d++)c[d]=255&i[d];new qr(ke.QR_CODE_FIELD_256).encode(c,o);const u=new Uint8Array(o);for(let d=0;d<o;d++)u[d]=c[a+d];return u}static appendModeInfo(i,o){o.appendBits(i.getBits(),4)}static appendLengthInfo(i,o,a,c){const u=a.getCharacterCountBits(o);if(i>=1<<u)throw new Fe(i+" is bigger than "+((1<<u)-1));c.appendBits(i,u)}static appendBytes(i,o,a,c){switch(o){case ae.NUMERIC:Je.appendNumericBytes(i,a);break;case ae.ALPHANUMERIC:Je.appendAlphanumericBytes(i,a);break;case ae.BYTE:Je.append8BitBytes(i,a,c);break;case ae.KANJI:Je.appendKanjiBytes(i,a);break;default:throw new Fe("Invalid mode: "+o)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const o=Je.getDigit(i);return o>=0&&o<=9}static appendNumericBytes(i,o){const a=i.length;let c=0;for(;c<a;){const u=Je.getDigit(i.charAt(c));if(c+2<a){const d=Je.getDigit(i.charAt(c+1)),h=Je.getDigit(i.charAt(c+2));o.appendBits(100*u+10*d+h,10),c+=3}else if(c+1<a){const d=Je.getDigit(i.charAt(c+1));o.appendBits(10*u+d,7),c+=2}else o.appendBits(u,4),c++}}static appendAlphanumericBytes(i,o){const a=i.length;let c=0;for(;c<a;){const u=Je.getAlphanumericCode(i.charCodeAt(c));if(-1===u)throw new Fe;if(c+1<a){const d=Je.getAlphanumericCode(i.charCodeAt(c+1));if(-1===d)throw new Fe;o.appendBits(45*u+d,11),c+=2}else o.appendBits(u,6),c++}}static append8BitBytes(i,o,a){let c;try{c=Ft.encode(i,a)}catch(u){throw new Fe(u)}for(let u=0,d=c.length;u!==d;u++)o.appendBits(c[u],8)}static appendKanjiBytes(i,o){let a;try{a=Ft.encode(i,Y.SJIS)}catch(u){throw new Fe(u)}const c=a.length;for(let u=0;u<c;u+=2){const p=(255&a[u])<<8&4294967295|255&a[u+1];let y=-1;if(p>=33088&&p<=40956?y=p-33088:p>=57408&&p<=60351&&(y=p-49472),-1===y)throw new Fe("Invalid byte sequence");o.appendBits(192*(y>>8)+(255&y),13)}}static appendECI(i,o){o.appendBits(ae.ECI.getBits(),4),o.appendBits(i.getValue(),8)}}Je.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Je.DEFAULT_BYTE_MODE_ENCODING=Y.UTF8.getName();let kl=(()=>{class x{write(o,a,c,u=null){if(0===o.length)throw new te("Found empty contents");if(a<0||c<0)throw new te("Requested dimensions are too small: "+a+"x"+c);let d=Q.L,h=x.QUIET_ZONE_SIZE;null!==u&&(void 0!==u.get(fe.ERROR_CORRECTION)&&(d=Q.fromString(u.get(fe.ERROR_CORRECTION).toString())),void 0!==u.get(fe.MARGIN)&&(h=Number.parseInt(u.get(fe.MARGIN).toString(),10)));const p=Je.encode(o,d,u);return this.renderResult(p,a,c,h)}writeToDom(o,a,c,u,d=null){"string"==typeof o&&(o=document.querySelector(o));const h=this.write(a,c,u,d);o&&o.appendChild(h)}renderResult(o,a,c,u){const d=o.getMatrix();if(null===d)throw new rr;const h=d.getWidth(),p=d.getHeight(),y=h+2*u,C=p+2*u,D=Math.max(a,y),I=Math.max(c,C),b=Math.min(Math.floor(D/y),Math.floor(I/C)),T=Math.floor((D-h*b)/2),M=Math.floor((I-p*b)/2),N=this.createSVGElement(D,I);for(let L=0,W=M;L<p;L++,W+=b)for(let Z=0,B=T;Z<h;Z++,B+=b)if(1===d.get(Z,L)){const Me=this.createSvgRectElement(B,W,b,b);N.appendChild(Me)}return N}createSVGElement(o,a){const c=document.createElementNS(x.SVG_NS,"svg");return c.setAttributeNS(null,"height",o.toString()),c.setAttributeNS(null,"width",a.toString()),c}createSvgRectElement(o,a,c,u){const d=document.createElementNS(x.SVG_NS,"rect");return d.setAttributeNS(null,"x",o.toString()),d.setAttributeNS(null,"y",a.toString()),d.setAttributeNS(null,"height",c.toString()),d.setAttributeNS(null,"width",u.toString()),d.setAttributeNS(null,"fill","#000000"),d}}return x.QUIET_ZONE_SIZE=4,x.SVG_NS="http://www.w3.org/2000/svg",x})(),Ho=(()=>{class x{encode(o,a,c,u,d){if(0===o.length)throw new te("Found empty contents");if(a!==ce.QR_CODE)throw new te("Can only encode QR_CODE, but got "+a);if(c<0||u<0)throw new te(`Requested dimensions are too small: ${c}x${u}`);let h=Q.L,p=x.QUIET_ZONE_SIZE;null!==d&&(void 0!==d.get(fe.ERROR_CORRECTION)&&(h=Q.fromString(d.get(fe.ERROR_CORRECTION).toString())),void 0!==d.get(fe.MARGIN)&&(p=Number.parseInt(d.get(fe.MARGIN).toString(),10)));const y=Je.encode(o,h,d);return x.renderResult(y,c,u,p)}static renderResult(o,a,c,u){const d=o.getMatrix();if(null===d)throw new rr;const h=d.getWidth(),p=d.getHeight(),y=h+2*u,C=p+2*u,D=Math.max(a,y),I=Math.max(c,C),b=Math.min(Math.floor(D/y),Math.floor(I/C)),T=Math.floor((D-h*b)/2),M=Math.floor((I-p*b)/2),N=new vt(D,I);for(let L=0,W=M;L<p;L++,W+=b)for(let Z=0,B=T;Z<h;Z++,B+=b)1===d.get(Z,L)&&N.setRegion(B,W,b,b);return N}}return x.QUIET_ZONE_SIZE=4,x})();let mi=(()=>{class x extends zr{constructor(o,a,c,u,d,h,p,y){if(super(h,p),this.yuvData=o,this.dataWidth=a,this.dataHeight=c,this.left=u,this.top=d,u+h>a||d+p>c)throw new te("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(h,p)}getRow(o,a){if(o<0||o>=this.getHeight())throw new te("Requested row is outside the image: "+o);const c=this.getWidth();return(null==a||a.length<c)&&(a=new Uint8ClampedArray(c)),qe.arraycopy(this.yuvData,(o+this.top)*this.dataWidth+this.left,a,0,c),a}getMatrix(){const o=this.getWidth(),a=this.getHeight();if(o===this.dataWidth&&a===this.dataHeight)return this.yuvData;const c=o*a,u=new Uint8ClampedArray(c);let d=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return qe.arraycopy(this.yuvData,d,u,0,c),u;for(let h=0;h<a;h++)qe.arraycopy(this.yuvData,d,u,h*o,o),d+=this.dataWidth;return u}isCropSupported(){return!0}crop(o,a,c,u){return new x(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+a,c,u,!1)}renderThumbnail(){const o=this.getWidth()/x.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/x.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(o*a),u=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let h=0;h<a;h++){const p=h*o;for(let y=0;y<o;y++)c[p+y]=4278190080|65793*(255&u[d+y*x.THUMBNAIL_SCALE_FACTOR]);d+=this.dataWidth*x.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/x.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/x.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(o,a){const c=this.yuvData;for(let u=0,d=this.top*this.dataWidth+this.left;u<a;u++,d+=this.dataWidth){const h=d+o/2;for(let p=d,y=d+o-1;p<h;p++,y--){const C=c[p];c[p]=c[y],c[y]=C}}}invert(){return new pt(this)}}return x.THUMBNAIL_SCALE_FACTOR=2,x})();class zo extends zr{constructor(i,o,a,c,u,d,h){if(super(o,a),this.dataWidth=c,this.dataHeight=u,this.left=d,this.top=h,4===i.BYTES_PER_ELEMENT){const p=o*a,y=new Uint8ClampedArray(p);for(let C=0;C<p;C++){const D=i[C];y[C]=((D>>16&255)+(D>>7&510)+(255&D))/4&255}this.luminances=y}else this.luminances=i;if(void 0===c&&(this.dataWidth=o),void 0===u&&(this.dataHeight=a),void 0===d&&(this.left=0),void 0===h&&(this.top=0),this.left+o>this.dataWidth||this.top+a>this.dataHeight)throw new te("Crop rectangle does not fit within image data.")}getRow(i,o){if(i<0||i>=this.getHeight())throw new te("Requested row is outside the image: "+i);const a=this.getWidth();return(null==o||o.length<a)&&(o=new Uint8ClampedArray(a)),qe.arraycopy(this.luminances,(i+this.top)*this.dataWidth+this.left,o,0,a),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.luminances;const a=i*o,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return qe.arraycopy(this.luminances,u,c,0,a),c;for(let d=0;d<o;d++)qe.arraycopy(this.luminances,u,c,d*i,i),u+=this.dataWidth;return c}isCropSupported(){return!0}crop(i,o,a,c){return new zo(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+i,this.top+o)}invert(){return new pt(this)}}class Go extends Y{static forName(i){return this.getCharacterSetECIByName(i)}}class tn{}tn.ISO_8859_1=Y.ISO8859_1;class qt{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Xe{static singletonList(i){return[i]}static min(i,o){return i.sort(o)[0]}}class Dt extends class Qt{constructor(i){this.previous=i}getPrevious(){return this.previous}}{constructor(i,o,a){super(i),this.value=o,this.bitCount=a}appendTo(i,o){i.appendBits(this.value,this.bitCount)}add(i,o){return new Dt(this,i,o)}addBinaryShift(i,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Dt(this,i,o)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+Ce.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class _r extends Dt{constructor(i,o,a){super(i,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=a}appendTo(i,o){for(let a=0;a<this.binaryShiftByteCount;a++)(0===a||31===a&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):i.appendBits(0===a?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),i.appendBits(o[this.binaryShiftStart+a],8)}addBinaryShift(i,o){return new _r(this,i,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Yt(x,i,o){return new Dt(x,i,o)}const K=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],br=new Dt(null,0,0),ut=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];const Kr=function wi(x){for(let i of x)Et.fill(i,-1);return x[0][4]=0,x[1][4]=0,x[1][0]=28,x[3][4]=0,x[2][4]=0,x[2][0]=15,x}(Et.createInt32Array(6,6));class ue{constructor(i,o,a,c){this.token=i,this.mode=o,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,o){let a=this.bitCount,c=this.token;if(i!==this.mode){let d=ut[this.mode][i];c=Yt(c,65535&d,d>>16),a+=d>>16}let u=2===i?4:5;return c=Yt(c,o,u),new ue(c,i,0,a+u)}shiftAndAppend(i,o){let a=this.token,c=2===this.mode?4:5;return a=Yt(a,Kr[this.mode][i],c),a=Yt(a,o,5),new ue(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(i){let o=this.token,a=this.mode,c=this.bitCount;if(4===this.mode||2===this.mode){let h=ut[a][0];o=Yt(o,65535&h,h>>16),c+=h>>16,a=0}let d=new ue(o,a,this.binaryShiftByteCount+1,c+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===d.binaryShiftByteCount&&(d=d.endBinaryShift(i+1)),d}endBinaryShift(i){if(0===this.binaryShiftByteCount)return this;let o=this.token;return o=function dn(x,i,o){return new _r(x,i,o)}(o,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new ue(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let o=this.bitCount+(ut[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?o+=ue.calculateBinaryShiftCost(i)-ue.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(o+=10),o<=i.bitCount}toBitArray(i){let o=[];for(let c=this.endBinaryShift(i.length).token;null!==c;c=c.getPrevious())o.unshift(c);let a=new Qe;for(const c of o)c.appendTo(a,i);return a}toString(){return ye.format("%s bits=%d bytes=%d",K[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}ue.INITIAL_STATE=new ue(br,0,0,0);const cr=function Ui(x){const i=ye.getCharCode(" "),o=ye.getCharCode("."),a=ye.getCharCode(",");x[0][i]=1;const c=ye.getCharCode("Z"),u=ye.getCharCode("A");for(let I=u;I<=c;I++)x[0][I]=I-u+2;x[1][i]=1;const d=ye.getCharCode("z"),h=ye.getCharCode("a");for(let I=h;I<=d;I++)x[1][I]=I-h+2;x[2][i]=1;const p=ye.getCharCode("9"),y=ye.getCharCode("0");for(let I=y;I<=p;I++)x[2][I]=I-y+2;x[2][a]=12,x[2][o]=13;const C=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let I=0;I<C.length;I++)x[3][ye.getCharCode(C[I])]=I;const D=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<D.length;I++)ye.getCharCode(D[I])>0&&(x[4][ye.getCharCode(D[I])]=I);return x}(Et.createInt32Array(5,256));class Sr{constructor(i){this.text=i}encode(){const i=ye.getCharCode(" "),o=ye.getCharCode("\n");let a=Xe.singletonList(ue.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,h=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case ye.getCharCode("\r"):d=h===o?2:0;break;case ye.getCharCode("."):d=h===i?3:0;break;case ye.getCharCode(","):d=h===i?4:0;break;case ye.getCharCode(":"):d=h===i?5:0;break;default:d=0}d>0?(a=Sr.updateStateListForPair(a,u,d),u++):a=this.updateStateListForChar(a,u)}return Xe.min(a,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,o){const a=[];for(let c of i)this.updateStateForChar(c,o,a);return Sr.simplifyStates(a)}updateStateForChar(i,o,a){let c=255&this.text[o],u=cr[i.getMode()][c]>0,d=null;for(let h=0;h<=4;h++){let p=cr[h][c];if(p>0){if(null==d&&(d=i.endBinaryShift(o)),!u||h===i.getMode()||2===h){const y=d.latchAndAppend(h,p);a.push(y)}if(!u&&Kr[i.getMode()][h]>=0){const y=d.shiftAndAppend(h,p);a.push(y)}}}if(i.getBinaryShiftByteCount()>0||0===cr[i.getMode()][c]){let h=i.addBinaryShiftChar(o);a.push(h)}}static updateStateListForPair(i,o,a){const c=[];for(let u of i)this.updateStateForPair(u,o,a,c);return this.simplifyStates(c)}static updateStateForPair(i,o,a,c){let u=i.endBinaryShift(o);if(c.push(u.latchAndAppend(4,a)),4!==i.getMode()&&c.push(u.shiftAndAppend(4,a)),3===a||4===a){let d=u.latchAndAppend(2,16-a).latchAndAppend(2,1);c.push(d)}if(i.getBinaryShiftByteCount()>0){let d=i.addBinaryShiftChar(o).addBinaryShiftChar(o+1);c.push(d)}}static simplifyStates(i){let o=[];for(const a of i){let c=!0;for(const u of o){if(u.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(u)&&(o=o.filter(d=>d!==u))}c&&o.push(a)}return o}}class Te{constructor(){}static encodeBytes(i){return Te.encode(i,Te.DEFAULT_EC_PERCENT,Te.DEFAULT_AZTEC_LAYERS)}static encode(i,o,a){let h,p,y,C,D,c=new Sr(i).encode(),u=Ce.truncDivision(c.getSize()*o,100)+11,d=c.getSize()+u;if(a!==Te.DEFAULT_AZTEC_LAYERS){if(h=a<0,p=Math.abs(a),p>(h?Te.MAX_NB_BITS_COMPACT:Te.MAX_NB_BITS))throw new te(ye.format("Illegal value %s for layers",a));y=Te.totalBitsInLayer(p,h),C=Te.WORD_SIZE[p];let B=y-y%C;if(D=Te.stuffBits(c,C),D.getSize()+u>B)throw new te("Data to large for user specified layer");if(h&&D.getSize()>64*C)throw new te("Data to large for user specified layer")}else{C=0,D=null;for(let B=0;;B++){if(B>Te.MAX_NB_BITS)throw new te("Data too large for an Aztec code");if(h=B<=3,p=h?B+1:B,y=Te.totalBitsInLayer(p,h),d>y)continue;(null==D||C!==Te.WORD_SIZE[p])&&(C=Te.WORD_SIZE[p],D=Te.stuffBits(c,C));let Me=y-y%C;if(!(h&&D.getSize()>64*C)&&D.getSize()+u<=Me)break}}let L,I=Te.generateCheckWords(D,y,C),b=D.getSize()/C,T=Te.generateModeMessage(h,p,b),M=(h?11:14)+4*p,N=new Int32Array(M);if(h){L=M;for(let B=0;B<N.length;B++)N[B]=B}else{L=M+1+2*Ce.truncDivision(Ce.truncDivision(M,2)-1,15);let B=Ce.truncDivision(M,2),Me=Ce.truncDivision(L,2);for(let Ie=0;Ie<B;Ie++){let nn=Ie+Ce.truncDivision(Ie,15);N[B-Ie-1]=Me-nn-1,N[B+Ie]=Me+nn+1}}let W=new vt(L);for(let B=0,Me=0;B<p;B++){let Ie=4*(p-B)+(h?9:12);for(let nn=0;nn<Ie;nn++){let Tn=2*nn;for(let fn=0;fn<2;fn++)I.get(Me+Tn+fn)&&W.set(N[2*B+fn],N[2*B+nn]),I.get(Me+2*Ie+Tn+fn)&&W.set(N[2*B+nn],N[M-1-2*B-fn]),I.get(Me+4*Ie+Tn+fn)&&W.set(N[M-1-2*B-fn],N[M-1-2*B-nn]),I.get(Me+6*Ie+Tn+fn)&&W.set(N[M-1-2*B-nn],N[2*B+fn])}Me+=8*Ie}if(Te.drawModeMessage(W,h,L,T),h)Te.drawBullsEye(W,Ce.truncDivision(L,2),5);else{Te.drawBullsEye(W,Ce.truncDivision(L,2),7);for(let B=0,Me=0;B<Ce.truncDivision(M,2)-1;B+=15,Me+=16)for(let Ie=1&Ce.truncDivision(L,2);Ie<L;Ie+=2)W.set(Ce.truncDivision(L,2)-Me,Ie),W.set(Ce.truncDivision(L,2)+Me,Ie),W.set(Ie,Ce.truncDivision(L,2)-Me),W.set(Ie,Ce.truncDivision(L,2)+Me)}let Z=new qt;return Z.setCompact(h),Z.setSize(L),Z.setLayers(p),Z.setCodeWords(b),Z.setMatrix(W),Z}static drawBullsEye(i,o,a){for(let c=0;c<a;c+=2)for(let u=o-c;u<=o+c;u++)i.set(u,o-c),i.set(u,o+c),i.set(o-c,u),i.set(o+c,u);i.set(o-a,o-a),i.set(o-a+1,o-a),i.set(o-a,o-a+1),i.set(o+a,o-a),i.set(o+a,o-a+1),i.set(o+a,o+a-1)}static generateModeMessage(i,o,a){let c=new Qe;return i?(c.appendBits(o-1,2),c.appendBits(a-1,6),c=Te.generateCheckWords(c,28,4)):(c.appendBits(o-1,5),c.appendBits(a-1,11),c=Te.generateCheckWords(c,40,4)),c}static drawModeMessage(i,o,a,c){let u=Ce.truncDivision(a,2);if(o)for(let d=0;d<7;d++){let h=u-3+d;c.get(d)&&i.set(h,u-5),c.get(d+7)&&i.set(u+5,h),c.get(20-d)&&i.set(h,u+5),c.get(27-d)&&i.set(u-5,h)}else for(let d=0;d<10;d++){let h=u-5+d+Ce.truncDivision(d,5);c.get(d)&&i.set(h,u-7),c.get(d+10)&&i.set(u+7,h),c.get(29-d)&&i.set(h,u+7),c.get(39-d)&&i.set(u-7,h)}}static generateCheckWords(i,o,a){let c=i.getSize()/a,u=new qr(Te.getGF(a)),d=Ce.truncDivision(o,a),h=Te.bitsToWords(i,a,d);u.encode(h,d-c);let p=o%a,y=new Qe;y.appendBits(0,p);for(const C of Array.from(h))y.appendBits(C,a);return y}static bitsToWords(i,o,a){let u,d,c=new Int32Array(a);for(u=0,d=i.getSize()/o;u<d;u++){let h=0;for(let p=0;p<o;p++)h|=i.get(u*o+p)?1<<o-p-1:0;c[u]=h}return c}static getGF(i){switch(i){case 4:return ke.AZTEC_PARAM;case 6:return ke.AZTEC_DATA_6;case 8:return ke.AZTEC_DATA_8;case 10:return ke.AZTEC_DATA_10;case 12:return ke.AZTEC_DATA_12;default:throw new te("Unsupported word size "+i)}}static stuffBits(i,o){let a=new Qe,c=i.getSize(),u=(1<<o)-2;for(let d=0;d<c;d+=o){let h=0;for(let p=0;p<o;p++)(d+p>=c||i.get(d+p))&&(h|=1<<o-1-p);(h&u)===u?(a.appendBits(h&u,o),d--):0==(h&u)?(a.appendBits(1|h,o),d--):a.appendBits(h,o)}return a}static totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}Te.DEFAULT_EC_PERCENT=33,Te.DEFAULT_AZTEC_LAYERS=0,Te.MAX_NB_BITS=32,Te.MAX_NB_BITS_COMPACT=4,Te.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class St{encode(i,o,a,c){return this.encodeWithHints(i,o,a,c,null)}encodeWithHints(i,o,a,c,u){let d=tn.ISO_8859_1,h=Te.DEFAULT_EC_PERCENT,p=Te.DEFAULT_AZTEC_LAYERS;return null!=u&&(u.has(fe.CHARACTER_SET)&&(d=Go.forName(u.get(fe.CHARACTER_SET).toString())),u.has(fe.ERROR_CORRECTION)&&(h=Ce.parseInt(u.get(fe.ERROR_CORRECTION).toString())),u.has(fe.AZTEC_LAYERS)&&(p=Ce.parseInt(u.get(fe.AZTEC_LAYERS).toString()))),St.encodeLayers(i,o,a,c,d,h,p)}static encodeLayers(i,o,a,c,u,d,h){if(o!==ce.AZTEC)throw new te("Can only encode AZTEC, but got "+o);let p=Te.encode(ye.getBytes(i,u),d,h);return St.renderResult(p,a,c)}static renderResult(i,o,a){let c=i.getMatrix();if(null==c)throw new rr;let u=c.getWidth(),d=c.getHeight(),h=Math.max(o,u),p=Math.max(a,d),y=Math.min(h/u,p/d),C=(h-u*y)/2,D=(p-d*y)/2,I=new vt(h,p);for(let b=0,T=D;b<d;b++,T+=y)for(let M=0,N=C;M<u;M++,N+=y)c.get(M,b)&&I.setRegion(N,T,y,y);return I}}G.AbstractExpandedDecoder=Ro,G.ArgumentException=ln,G.ArithmeticException=ks,G.AztecCode=qt,G.AztecCodeReader=Bn,G.AztecCodeWriter=St,G.AztecDecoder=Vs,G.AztecDetector=Cl,G.AztecDetectorResult=xl,G.AztecEncoder=Te,G.AztecHighLevelEncoder=Sr,G.AztecPoint=Kt,G.BarcodeFormat=ce,G.Binarizer=So,G.BinaryBitmap=Hn,G.BitArray=Qe,G.BitMatrix=vt,G.BitSource=ko,G.BrowserAztecCodeReader=class El extends yr{constructor(i=500){super(new Bn,i)}},G.BrowserBarcodeReader=class Sl extends yr{constructor(i=500,o){super(new Yr(o),i,o)}},G.BrowserCodeReader=yr,G.BrowserDatamatrixCodeReader=class Tl extends yr{constructor(i=500){super(new Xr,i)}},G.BrowserMultiFormatReader=class it extends yr{constructor(i=null,o=500){const a=new Sn;a.setHints(i),super(a,o)}decodeBitmap(i){return this.reader.decodeWithState(i)}},G.BrowserPDF417Reader=class $d extends yr{constructor(i=500){super(new Wt,i)}},G.BrowserQRCodeReader=class qd extends yr{constructor(i=500){super(new or,i)}},G.BrowserQRCodeSvgWriter=kl,G.CharacterSetECI=Y,G.ChecksumException=It,G.Code128Reader=X,G.Code39Reader=Hs,G.DataMatrixDecodedBitStreamParser=Pe,G.DataMatrixReader=Xr,G.DecodeHintType=rt,G.DecoderResult=ci,G.DefaultGridSampler=js,G.DetectorResult=Ri,G.EAN13Reader=fi,G.EncodeHintType=fe,G.Exception=zt,G.FormatException=$,G.GenericGF=ke,G.GenericGFPoly=Gt,G.GlobalHistogramBinarizer=_t,G.GridSampler=Us,G.GridSamplerInstance=xr,G.HTMLCanvasElementLuminanceSource=Gn,G.HybridBinarizer=be,G.ITFReader=Ke,G.IllegalArgumentException=te,G.IllegalStateException=rr,G.InvertedLuminanceSource=pt,G.LuminanceSource=zr,G.MathUtils=Ve,G.MultiFormatOneDReader=Yr,G.MultiFormatReader=Sn,G.MultiFormatWriter=class ea{encode(i,o,a,c,u){let d;if(o!==ce.QR_CODE)throw new te("No encoder available for format "+o);return d=new Ho,d.encode(i,o,a,c,u)}},G.NotFoundException=V,G.OneDReader=bt,G.PDF417DecodedBitStreamParser=P,G.PDF417DecoderErrorCorrection=Rl,G.PDF417Reader=Wt,G.PDF417ResultMetadata=Uo,G.PerspectiveTransform=yn,G.PlanarYUVLuminanceSource=mi,G.QRCodeByteMatrix=Qr,G.QRCodeDataMask=De,G.QRCodeDecodedBitStreamParser=Jt,G.QRCodeDecoderErrorCorrectionLevel=Q,G.QRCodeDecoderFormatInformation=Nt,G.QRCodeEncoder=Je,G.QRCodeEncoderQRCode=pi,G.QRCodeMaskUtil=ar,G.QRCodeMatrixUtil=le,G.QRCodeMode=ae,G.QRCodeReader=or,G.QRCodeVersion=se,G.QRCodeWriter=Ho,G.RGBLuminanceSource=zo,G.RSS14Reader=ft,G.RSSExpandedReader=j,G.ReaderException=Js,G.ReedSolomonDecoder=Oi,G.ReedSolomonEncoder=qr,G.ReedSolomonException=Ni,G.Result=Bt,G.ResultMetadataType=mt,G.ResultPoint=oe,G.StringUtils=ye,G.UnsupportedOperationException=zn,G.VideoInputDevice=Bs,G.WhiteRectangleDetector=di,G.WriterException=Fe,G.ZXingArrays=Et,G.ZXingCharset=Go,G.ZXingInteger=Ce,G.ZXingStandardCharsets=tn,G.ZXingStringBuilder=Ge,G.ZXingStringEncoding=Ft,G.ZXingSystem=qe,G.createAbstractExpandedDecoder=Ys,Object.defineProperty(G,"__esModule",{value:!0})}(Rs)}},Os=>{Os(Os.s=145)}]);